\hypertarget{signalized__intersection__schedule_8cpp_source}{}\doxysection{signalized\+\_\+intersection\+\_\+schedule.\+cpp}
\label{signalized__intersection__schedule_8cpp_source}\index{streets\_utils/streets\_vehicle\_scheduler/src/signalized\_intersection\_schedule.cpp@{streets\_utils/streets\_vehicle\_scheduler/src/signalized\_intersection\_schedule.cpp}}
\mbox{\hyperlink{signalized__intersection__schedule_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{signalized__intersection__schedule_8h}{signalized\_intersection\_schedule.h}}"{}}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacestreets__vehicle__scheduler}{streets\_vehicle\_scheduler}} \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00006}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7}{00006}}     std::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7}{signalized\_intersection\_schedule::toCSV}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00007}00007     }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00008}00008         std::string schedule\_info = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00009}00009         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&sched : \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}{vehicle\_schedules}} )\{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00010}00010             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00011}00011             schedule\_info += sched.v\_id + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00012}00012             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.entry\_lane) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00013}00013             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.link\_id) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00014}00014             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.eet) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00015}00015             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.et) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00016}00016             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.dt) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00017}00017             \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\_vehicles::vehicle\_state::EV}}) \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00018}00018                 schedule\_info += \textcolor{stringliteral}{"{}EV"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00019}00019             \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{streets\_vehicles::vehicle\_state::DV}}) \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00020}00020                 schedule\_info += \textcolor{stringliteral}{"{}DV"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00021}00021             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00022}00022                 schedule\_info += \textcolor{stringliteral}{"{}ND"{}};}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00023}00023             \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00024}00024             schedule\_info += \textcolor{stringliteral}{"{}\(\backslash\)n"{}};  }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00025}00025         \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00027}00027         \textcolor{keywordflow}{return} schedule\_info;}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00028}00028     \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00030}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a7afc1e1bcb2229d598de2be93b253a80}{00030}}     std::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a7afc1e1bcb2229d598de2be93b253a80}{signalized\_intersection\_schedule::toJson}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00031}00031         }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00032}00032         rapidjson::Document doc;}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00033}00033         doc.SetObject();}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00034}00034         rapidjson::Document::AllocatorType \&allocator = doc.GetAllocator();}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00036}00036         rapidjson::Value metadata(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00037}00037         metadata.AddMember(\textcolor{stringliteral}{"{}timestamp"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00038}00038         metadata.AddMember(\textcolor{stringliteral}{"{}intersection\_type"{}}, \textcolor{stringliteral}{"{}Carma/signalized\_intersection"{}}, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00039}00039         doc.AddMember(\textcolor{stringliteral}{"{}metadata"{}}, metadata, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00041}00041         rapidjson::Value json\_sched(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00042}00042         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&veh\_sched: \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}{vehicle\_schedules}} ) \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00043}00043             \textcolor{keywordflow}{if} (veh\_sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\_vehicles::vehicle\_state::EV}}) \{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00044}00044                 json\_sched.PushBack(veh\_sched.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00045}00045             \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00046}00046         \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00047}00047         doc.AddMember(\textcolor{stringliteral}{"{}payload"{}}, json\_sched, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00049}00049         rapidjson::StringBuffer buffer;                }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00050}00050         rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00051}00051         doc.Accept(writer);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00052}00052         std::string string\_sched = buffer.GetString();}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00054}00054         \textcolor{keywordflow}{return} string\_sched;}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00055}00055     \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00057}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_a2d0dca64d4ca5b4bc3ec690f03575f56}{00057}}     rapidjson::Value \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_a2d0dca64d4ca5b4bc3ec690f03575f56}{signalized\_vehicle\_schedule::toJson}}(rapidjson::Document::AllocatorType\& allocator)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00059}00059         rapidjson::Value vehicle\_sched(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00060}00060         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}v\_id"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1vehicle__schedule_ad9c43fcd19029d3f8ddc56486a0a2cf1}{v\_id}}, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00061}00061         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}et"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_a508a6d75fcf630309aa378c4fbeb3171}{et}}, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00062}00062         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}dt"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule_a4e258c3309f6d86f85f5fb36e801ee5d}{dt}}, allocator);}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00063}00063         \textcolor{keywordflow}{return} vehicle\_sched;}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00064}00064     \}}
\DoxyCodeLine{\Hypertarget{signalized__intersection__schedule_8cpp_source_l00065}00065 \}}

\end{DoxyCode}
