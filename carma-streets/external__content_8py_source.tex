\hypertarget{external__content_8py_source}{}\doxysection{external\+\_\+content.\+py}
\label{external__content_8py_source}\index{doc/\_extensions/zephyr/external\_content.py@{doc/\_extensions/zephyr/external\_content.py}}
\mbox{\hyperlink{external__content_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00001}\mbox{\hyperlink{namespacezephyr_1_1external__content}{00001}} \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00002}00002 \textcolor{stringliteral}{External content}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00003}00003 \textcolor{stringliteral}{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00004}00004 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00005}00005 \textcolor{stringliteral}{Copyright (c) 2021 Nordic Semiconductor ASA}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00006}00006 \textcolor{stringliteral}{SPDX-\/License-\/Identifier: Apache-\/2.0}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00007}00007 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00008}00008 \textcolor{stringliteral}{Introduction}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00009}00009 \textcolor{stringliteral}{============}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00010}00010 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00011}00011 \textcolor{stringliteral}{This extension allows to import sources from directories out of the Sphinx}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00012}00012 \textcolor{stringliteral}{source directory. They are copied to the source directory before starting the}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00013}00013 \textcolor{stringliteral}{build. Note that the copy is *smart*, that is, only updated files are actually}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00014}00014 \textcolor{stringliteral}{copied. Therefore, incremental builds detect changes correctly and behave as}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00015}00015 \textcolor{stringliteral}{expected.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00016}00016 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00017}00017 \textcolor{stringliteral}{Paths for external content included via e.g. figure, literalinclude, etc.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00018}00018 \textcolor{stringliteral}{are adjusted as needed.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00019}00019 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00020}00020 \textcolor{stringliteral}{Configuration options}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00021}00021 \textcolor{stringliteral}{=====================}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00022}00022 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00023}00023 \textcolor{stringliteral}{-\/ ``external\_content\_contents``: A list of external contents. Each entry is}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00024}00024 \textcolor{stringliteral}{  a tuple }\textcolor{keyword}{with} two fields: the external base directory \textcolor{keywordflow}{and} a file glob pattern.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00025}00025 -\/ ``external\_content\_directives``: A list of directives that should be analyzed}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00026}00026   \textcolor{keywordflow}{and} their paths adjusted \textcolor{keywordflow}{if} necessary. Defaults to ``DEFAULT\_DIRECTIVES``.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00027}00027 -\/ ``external\_content\_keep``: A list of file globs (relative to the destination}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00028}00028   directory) that should be kept even \textcolor{keywordflow}{if} they do \textcolor{keywordflow}{not} exist \textcolor{keywordflow}{in} the source}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00029}00029   directory. This option can be useful \textcolor{keywordflow}{for} auto-\/generated files \textcolor{keywordflow}{in} the}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00030}00030   destination directory.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00031}00031 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00032}00032 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00033}00033 \textcolor{stringliteral}{import filecmp}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00034}00034 \textcolor{stringliteral}{import os}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00035}00035 \textcolor{stringliteral}{from pathlib import Path}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00036}00036 \textcolor{stringliteral}{import re}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00037}00037 \textcolor{stringliteral}{import shutil}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00038}00038 \textcolor{stringliteral}{import tempfile}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00039}00039 \textcolor{stringliteral}{from typing import Dict, Any, List, Optional}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00040}00040 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00041}00041 \textcolor{stringliteral}{from sphinx.application import Sphinx}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00042}00042 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00043}00043 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00044}\mbox{\hyperlink{namespacezephyr_1_1external__content_ab733259d136b61d033974b890a451df8}{00044}} \textcolor{stringliteral}{\_\_version\_\_ = "{}0.1.0"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00045}00045 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00046}00046 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00047}\mbox{\hyperlink{namespacezephyr_1_1external__content_a9939d12d69003f1f6a1b9e2ec6233850}{00047}} \textcolor{stringliteral}{DEFAULT\_DIRECTIVES = ("{}figure"{}, "{}image"{}, "{}include"{}, "{}literalinclude"{})}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00048}00048 \textcolor{stringliteral}{"{}"{}"{}}Default directives \textcolor{keywordflow}{for} included content.\textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00049}00049 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00050}00050 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00051}\mbox{\hyperlink{namespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0}{00051}} \textcolor{stringliteral}{def adjust\_includes(}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00052}00052 \textcolor{stringliteral}{    fname: Path,}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00053}00053 \textcolor{stringliteral}{    basepath: Path,}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00054}00054 \textcolor{stringliteral}{    directives: List[str],}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00055}00055 \textcolor{stringliteral}{    encoding: str,}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00056}00056 \textcolor{stringliteral}{    dstpath: Optional[Path] = }\textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00057}00057 ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00058}00058     \textcolor{stringliteral}{"{}"{}"{}Adjust included content paths.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00059}00059 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00060}00060 \textcolor{stringliteral}{    Args:}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00061}00061 \textcolor{stringliteral}{        fname: File to be processed.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00062}00062 \textcolor{stringliteral}{        basepath: Base path to be used to resolve content location.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00063}00063 \textcolor{stringliteral}{        directives: Directives to be parsed }\textcolor{keywordflow}{and} adjusted.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00064}00064         encoding: Sources encoding.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00065}00065         dstpath: Destination path \textcolor{keywordflow}{for} fname \textcolor{keywordflow}{if} its path \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} the actual destination.}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00066}00066     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00067}00067 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00068}00068 \textcolor{stringliteral}{    }\textcolor{keywordflow}{if} fname.suffix != \textcolor{stringliteral}{"{}.rst"{}}:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00069}00069         \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00071}00071     dstpath = dstpath \textcolor{keywordflow}{or} fname.parent}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00073}00073     \textcolor{keyword}{def }\_adjust(m):}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00074}00074         directive, fpath = m.groups()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00076}00076         \textcolor{comment}{\# ignore absolute paths}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00077}00077         \textcolor{keywordflow}{if} fpath.startswith(\textcolor{stringliteral}{"{}/"{}}):}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00078}00078             fpath\_adj = fpath}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00079}00079         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00080}00080             fpath\_adj = Path(os.path.relpath(basepath / fpath, dstpath)).as\_posix()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00082}00082         \textcolor{keywordflow}{return} f\textcolor{stringliteral}{"{}.. \{directive\}:: \{fpath\_adj\}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00084}00084     \textcolor{keyword}{with} open(fname, \textcolor{stringliteral}{"{}r+"{}}, encoding=encoding) \textcolor{keyword}{as} f:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00085}00085         content = f.read()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00086}00086         content\_adj, modified = re.subn(}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00087}00087             \textcolor{stringliteral}{r"{}\(\backslash\).\(\backslash\). ("{}} + \textcolor{stringliteral}{"{}|"{}}.join(directives) + \textcolor{stringliteral}{r"{})::\(\backslash\)s*([\string^`\(\backslash\)n]+)"{}}, \_adjust, content}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00088}00088         )}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00089}00089         \textcolor{keywordflow}{if} modified:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00090}00090             f.seek(0)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00091}00091             f.write(content\_adj)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00092}00092             f.truncate()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00095}\mbox{\hyperlink{namespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7}{00095}} \textcolor{keyword}{def }\mbox{\hyperlink{namespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7}{sync\_contents}}(app: Sphinx) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00096}00096     \textcolor{stringliteral}{"{}"{}"{}Synchronize external contents.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00097}00097 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00098}00098 \textcolor{stringliteral}{    Args:}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00099}00099 \textcolor{stringliteral}{        app: Sphinx application instance.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00100}00100 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00101}00101 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00102}00102 \textcolor{stringliteral}{    srcdir = Path(app.srcdir).resolve()}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00103}00103 \textcolor{stringliteral}{    to\_copy = []}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00104}00104 \textcolor{stringliteral}{    to\_delete = set(f }\textcolor{keywordflow}{for} f \textcolor{keywordflow}{in} srcdir.glob(\textcolor{stringliteral}{"{}**/*"{}}) \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} f.is\_dir())}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00105}00105     to\_keep = set(}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00106}00106         f}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00107}00107         \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} app.config.external\_content\_keep}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00108}00108         \textcolor{keywordflow}{for} f \textcolor{keywordflow}{in} srcdir.glob(k)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00109}00109         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} f.is\_dir()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00110}00110     )}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00112}00112     \textcolor{keywordflow}{for} content \textcolor{keywordflow}{in} app.config.external\_content\_contents:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00113}00113         prefix\_src, glob = content}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00114}00114         \textcolor{keywordflow}{for} src \textcolor{keywordflow}{in} prefix\_src.glob(glob):}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00115}00115             \textcolor{keywordflow}{if} src.is\_dir():}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00116}00116                 to\_copy.extend(}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00117}00117                     [(f, prefix\_src) \textcolor{keywordflow}{for} f \textcolor{keywordflow}{in} src.glob(\textcolor{stringliteral}{"{}**/*"{}}) \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} f.is\_dir()]}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00118}00118                 )}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00119}00119             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00120}00120                 to\_copy.append((src, prefix\_src))}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00122}00122     \textcolor{keywordflow}{for} entry \textcolor{keywordflow}{in} to\_copy:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00123}00123         src, prefix\_src = entry}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00124}00124         dst = (srcdir / src.relative\_to(prefix\_src)).resolve()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00126}00126         \textcolor{keywordflow}{if} dst \textcolor{keywordflow}{in} to\_delete:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00127}00127             to\_delete.remove(dst)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00128}00128 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00129}00129         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} dst.parent.exists():}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00130}00130             dst.parent.mkdir(parents=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00132}00132         \textcolor{comment}{\# just copy if it does not exist}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00133}00133         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} dst.exists():}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00134}00134             shutil.copy(src, dst)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00135}00135             \mbox{\hyperlink{namespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0}{adjust\_includes}}(}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00136}00136                 dst,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00137}00137                 src.parent,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00138}00138                 app.config.external\_content\_directives,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00139}00139                 app.config.source\_encoding,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00140}00140             )}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00141}00141         \textcolor{comment}{\# if origin file is modified only copy if different}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00142}00142         \textcolor{keywordflow}{elif} src.stat().st\_mtime > dst.stat().st\_mtime:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00143}00143             \textcolor{keyword}{with} tempfile.TemporaryDirectory() \textcolor{keyword}{as} td:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00144}00144                 \textcolor{comment}{\# adjust origin includes before comparing}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00145}00145                 src\_adjusted = Path(td) / src.name}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00146}00146                 shutil.copy(src, src\_adjusted)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00147}00147                 \mbox{\hyperlink{namespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0}{adjust\_includes}}(}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00148}00148                     src\_adjusted,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00149}00149                     src.parent,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00150}00150                     app.config.external\_content\_directives,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00151}00151                     app.config.source\_encoding,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00152}00152                     dstpath=dst.parent,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00153}00153                 )}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00154}00154 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00155}00155                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} filecmp.cmp(src\_adjusted, dst):}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00156}00156                     dst.unlink()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00157}00157                     shutil.move(os.fspath(src\_adjusted), os.fspath(dst))}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00159}00159     \textcolor{comment}{\# remove any previously copied file not present in the origin folder,}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00160}00160     \textcolor{comment}{\# excepting those marked to be kept.}}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00161}00161     \textcolor{keywordflow}{for} file \textcolor{keywordflow}{in} to\_delete -\/ to\_keep:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00162}00162         file.unlink()}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00163}00163 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00165}\mbox{\hyperlink{namespacezephyr_1_1external__content_a0dcf308d6f664210596abd84c82a26c7}{00165}} \textcolor{keyword}{def }\mbox{\hyperlink{namespacezephyr_1_1external__content_a0dcf308d6f664210596abd84c82a26c7}{setup}}(app: Sphinx) -\/> Dict[str, Any]:}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00166}00166     app.add\_config\_value(\textcolor{stringliteral}{"{}external\_content\_contents"{}}, [], \textcolor{stringliteral}{"{}env"{}})}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00167}00167     app.add\_config\_value(\textcolor{stringliteral}{"{}external\_content\_directives"{}}, DEFAULT\_DIRECTIVES, \textcolor{stringliteral}{"{}env"{}})}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00168}00168     app.add\_config\_value(\textcolor{stringliteral}{"{}external\_content\_keep"{}}, [], \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00170}00170     app.connect(\textcolor{stringliteral}{"{}builder-\/inited"{}}, sync\_contents)}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00172}00172     \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00173}00173         \textcolor{stringliteral}{"{}version"{}}: \_\_version\_\_,}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00174}00174         \textcolor{stringliteral}{"{}parallel\_read\_safe"{}}: \textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00175}00175         \textcolor{stringliteral}{"{}parallel\_write\_safe"{}}: \textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{external__content_8py_source_l00176}00176     \}}

\end{DoxyCode}
