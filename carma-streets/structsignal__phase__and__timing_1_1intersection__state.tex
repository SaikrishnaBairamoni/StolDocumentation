\hypertarget{structsignal__phase__and__timing_1_1intersection__state}{}\doxysection{signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state Struct Reference}
\label{structsignal__phase__and__timing_1_1intersection__state}\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}


{\ttfamily \#include $<$intersection\+\_\+state.\+h$>$}



Collaboration diagram for signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
rapidjson\+::\+Value \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ae992920af2fdef8ffd0cf29da74e0ac9}{to\+Json}} (rapidjson\+::\+Document\+::\+Allocator\+Type \&allocator) const
\begin{DoxyCompactList}\small\item\em Serialize Intersection State object to rapidjson\+::\+Value for writing as JSON string. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}{from\+Json}} (const rapidjson\+::\+Value \&val)
\begin{DoxyCompactList}\small\item\em Deserialize Intersection State JSON into Intersection State object. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}{operator==}} (const \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\+\_\+state}} \&other) const
\begin{DoxyCompactList}\small\item\em Equals operator to asses whether two objects contain equivalent data. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b}{operator!=}} (const \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\+\_\+state}} \&other) const
\begin{DoxyCompactList}\small\item\em Returns the inverse of equals operator. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}{convert\+\_\+min\+\_\+mills2epoch\+\_\+ts}} (uint32\+\_\+t moy\+\_\+ll, uint16\+\_\+t min\+\_\+mills\+\_\+timestamp) const
\begin{DoxyCompactList}\small\item\em Convert current mimutes of the year and milliseconds of the current minute into epoch timestamp in milliseconds. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5}{get\+\_\+epoch\+\_\+timestamp}} () const
\begin{DoxyCompactList}\small\item\em Get the epoch timestamp of the intersection state timestamp. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a5aa5329bedd738f5579cf045975d87a9}{set\+\_\+timestamp\+\_\+ntcip}} (const uint32\+\_\+t second\+\_\+of\+\_\+day, const uint16\+\_\+t millisecond\+\_\+of\+\_\+second)
\begin{DoxyCompactList}\small\item\em Set timestamp for intersection state based on NTCIP SPaT UDP message timestamp which is transmitted as second of the UTC day and millisecond of the UTC second. This information can be combined with the unix host time day of the year to get minute of the UTC year and millisecond of the UTC minute (J2735 Intersection State time\+Stamp units). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a480dafe7aae5c872f14d1f60c8627636}{set\+\_\+timestamp\+\_\+local}} ()
\begin{DoxyCompactList}\small\item\em Set timestamp for intersection state based on host machine unix time. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}{update\+\_\+movement\+\_\+state}} (\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip\+::ntcip\+\_\+1202\+\_\+ext}} \&spat\+\_\+data, const int signal\+\_\+group\+\_\+id, const int \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\+\_\+number}})
\begin{DoxyCompactList}\small\item\em Method to update \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} with signal\+\_\+group\+\_\+id using ntcip spat data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935}{update\+\_\+movements}} (\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip\+::ntcip\+\_\+1202\+\_\+ext}} \&spat\+\_\+data, const std\+::unordered\+\_\+map$<$ int, int $>$ \&phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group)
\begin{DoxyCompactList}\small\item\em Clears old movement event data for all movement\+\_\+states. Adds one \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\+\_\+event}} to the state\+\_\+time\+\_\+speed list as the current event for each movement state. Then calls update\+\_\+movement\+\_\+state on every phase number/signal group mapping included in the phase\+\_\+number to signal group map. This method is meant to be executed each time a nticp\+\_\+1202\+\_\+ext UDP packet is received to update the current movement event data of each phase with the timing information received. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} \& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}{get\+\_\+movement}} (const int signal\+\_\+group\+\_\+id)
\begin{DoxyCompactList}\small\item\em Return reference to \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} for signal group. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}{initialize\+\_\+movement\+\_\+states}} (const std\+::unordered\+\_\+map$<$ int, int $>$ \&phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group)
\begin{DoxyCompactList}\small\item\em Initialize list$<$movement\+\_\+state$>$ to include a movement for each phase\+\_\+numer/signal\+\_\+group entry in the phase number to signal group map. This method is meant to be run once, while initializing the spat object to contain movement states for all relevant signal groups. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\+\_\+offset}} (const uint16\+\_\+t offset\+\_\+tenths\+\_\+of\+\_\+sec) const
\begin{DoxyCompactList}\small\item\em Convert time offset (in tenths of seconds) from current time (NTCIP SPaT timing information units) to tenths of seconds from current hour (J2735 SPaT timing information units). For reference please see J2735 and NTCIP documentation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ad71bed5c8cd56cac8dcd041c5fd5a83e}{MIN\+\_\+\+TO\+\_\+\+SECONDS}} = 60
\item 
int \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aebaed676aff07f126fe01e1319b4c605}{SECOND\+\_\+\+TO\+\_\+\+MILLISECONDS}} = 1000
\item 
std\+::string \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}}
\begin{DoxyCompactList}\small\item\em Descriptive name for this collection. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ada34bde87ec24eb85810d408cd13f69f}{id}} = 0
\begin{DoxyCompactList}\small\item\em A globally unique value set and consisting of region\+ID and intersection ID assignment. Provides unique mapping to the intersection MAP in question which provides complete location and approach/move/lane data. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}}
\begin{DoxyCompactList}\small\item\em BIT String of Intersection\+Status\+Object\+: \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = 0
\begin{DoxyCompactList}\small\item\em Minute of current UTC year. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\+\_\+stamp}} = 0
\begin{DoxyCompactList}\small\item\em Millisecond point in the current UTC minute that this message was created. \end{DoxyCompactList}\item 
std\+::list$<$ int $>$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\+\_\+lanes}}
\begin{DoxyCompactList}\small\item\em A list of unique lane ID for each lane object which is active. Refers to dynamic MAP contents. \end{DoxyCompactList}\item 
std\+::list$<$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} $>$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}
\begin{DoxyCompactList}\small\item\em Each Movement is given in turn and contains its signal phase state, mapping to the lanes it applies to, and point in time it will and. It may contain both active and future states. \end{DoxyCompactList}\item 
std\+::list$<$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist}{connection\+\_\+maneuver\+\_\+assist}} $>$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\+\_\+assist\+\_\+list}}
\begin{DoxyCompactList}\small\item\em Assist Data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00016}{16}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}\label{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!convert\_min\_mills2epoch\_ts@{convert\_min\_mills2epoch\_ts}}
\index{convert\_min\_mills2epoch\_ts@{convert\_min\_mills2epoch\_ts}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{convert\_min\_mills2epoch\_ts()}{convert\_min\_mills2epoch\_ts()}}
{\footnotesize\ttfamily uint64\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::convert\+\_\+min\+\_\+mills2epoch\+\_\+ts (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{moy\+\_\+ll,  }\item[{uint16\+\_\+t}]{min\+\_\+mills\+\_\+timestamp }\end{DoxyParamCaption}) const}



Convert current mimutes of the year and milliseconds of the current minute into epoch timestamp in milliseconds. 


\begin{DoxyParams}{Parameters}
{\em moy\+\_\+ll} & The current minutes of the year \\
\hline
{\em min\+\_\+mills\+\_\+timestamp} & The milliseconds of the current minute \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint64\+\_\+t epoch timestamp in milliseconds 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00142}{142}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00142                                                                                                                \{}
\DoxyCodeLine{00143         \textcolor{comment}{//Calculate timestamp for beginning of the year}}
\DoxyCodeLine{00144         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{00145         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{00146         tm utctime;}
\DoxyCodeLine{00147         gmtime\_r(\&tt, \&utctime);}
\DoxyCodeLine{00148         \textcolor{keyword}{auto} timeinfo = tm();}
\DoxyCodeLine{00149         timeinfo.tm\_year = utctime.tm\_year;}
\DoxyCodeLine{00150         timeinfo.tm\_mon = 0; \textcolor{comment}{//January}}
\DoxyCodeLine{00151         timeinfo.tm\_mday = 1; \textcolor{comment}{//1st}}
\DoxyCodeLine{00152         timeinfo.tm\_hour = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{00153         timeinfo.tm\_min = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{00154         timeinfo.tm\_sec = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{00155         time\_t year\_begin\_utc\_t = timegm(\&timeinfo);}
\DoxyCodeLine{00156         \textcolor{keyword}{auto} year\_begin\_utc\_tp = std::chrono::system\_clock::from\_time\_t(year\_begin\_utc\_t);}
\DoxyCodeLine{00157         \textcolor{keyword}{auto} year\_begin\_utc\_timestamp = std::chrono::duration\_cast<std::chrono::milliseconds>(year\_begin\_utc\_tp.time\_since\_epoch()).count();}
\DoxyCodeLine{00158         \textcolor{keyword}{auto} epoch\_timestamp = year\_begin\_utc\_timestamp + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{long}\textcolor{keyword}{>}(moy\_ll) * \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ad71bed5c8cd56cac8dcd041c5fd5a83e}{MIN\_TO\_SECONDS}} * \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aebaed676aff07f126fe01e1319b4c605}{SECOND\_TO\_MILLISECONDS}} + min\_mills\_timestamp;}
\DoxyCodeLine{00159         \textcolor{keywordflow}{return} epoch\_timestamp;}
\DoxyCodeLine{00160     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00018}{MIN\+\_\+\+TO\+\_\+\+SECONDS}}, and \mbox{\hyperlink{intersection__state_8h_source_l00019}{SECOND\+\_\+\+TO\+\_\+\+MILLISECONDS}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00162}{get\+\_\+epoch\+\_\+timestamp()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}\label{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!convert\_offset@{convert\_offset}}
\index{convert\_offset@{convert\_offset}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{convert\_offset()}{convert\_offset()}}
{\footnotesize\ttfamily uint16\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::convert\+\_\+offset (\begin{DoxyParamCaption}\item[{const uint16\+\_\+t}]{offset\+\_\+tenths\+\_\+of\+\_\+sec }\end{DoxyParamCaption}) const}



Convert time offset (in tenths of seconds) from current time (NTCIP SPaT timing information units) to tenths of seconds from current hour (J2735 SPaT timing information units). For reference please see J2735 and NTCIP documentation. 


\begin{DoxyParams}{Parameters}
{\em offset\+\_\+tenths\+\_\+of\+\_\+sec} & tenths of seconds from current time. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint16\+\_\+t tenths of seconds from current hour. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00292}{292}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00292                                                                                               \{}
\DoxyCodeLine{00293         \textcolor{comment}{// Convert tenths of seconds to milliseconds}}
\DoxyCodeLine{00294         \textcolor{keywordtype}{int} offset\_ms = offset\_tenths\_of\_seconds * 100;}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296         std::chrono::system\_clock::time\_point nowTimePoint = std::chrono::system\_clock::now();}
\DoxyCodeLine{00297         std::chrono::system\_clock::time\_point nowPlusOffsetTimePoint = nowTimePoint +  std::chrono::milliseconds(offset\_ms);}
\DoxyCodeLine{00298 }
\DoxyCodeLine{00299         std::chrono::system\_clock::duration tp = nowPlusOffsetTimePoint.time\_since\_epoch();}
\DoxyCodeLine{00300 }
\DoxyCodeLine{00301         std::chrono::hours h =  std::chrono::duration\_cast<std::chrono::hours>(tp);}
\DoxyCodeLine{00302         tp -\/= h;}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304         std::chrono::minutes \mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}} =  std::chrono::duration\_cast<std::chrono::minutes>(tp);}
\DoxyCodeLine{00305         tp -\/= \mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}};}
\DoxyCodeLine{00306 }
\DoxyCodeLine{00307         std::chrono::seconds s =  std::chrono::duration\_cast<std::chrono::seconds>(tp);}
\DoxyCodeLine{00308         tp -\/= s;}
\DoxyCodeLine{00309 }
\DoxyCodeLine{00310         std::chrono::milliseconds ms = std::chrono::duration\_cast<std::chrono::milliseconds>(tp);}
\DoxyCodeLine{00311 }
\DoxyCodeLine{00312         \textcolor{keywordtype}{double} fractionSeconds = ((double)s.count()) + ((\textcolor{keywordtype}{double})ms.count()/1000.0);}
\DoxyCodeLine{00313         \textcolor{keywordtype}{double} retTimeD = ((double)(\mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}}.count() * 60) + fractionSeconds) * 10.0;}
\DoxyCodeLine{00314         SPDLOG\_TRACE(\textcolor{stringliteral}{"{}Converted offset \{0\} to \{1\}"{}}, offset\_tenths\_of\_seconds, retTimeD);}
\DoxyCodeLine{00315         \textcolor{keywordflow}{return} (uint16\_t) retTimeD;}
\DoxyCodeLine{00316     \}}

\end{DoxyCode}


References \mbox{\hyperlink{doc_2conf_8py_source_l00044}{conf\+::m}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00211}{update\+\_\+movement\+\_\+state()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}\label{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!fromJson@{fromJson}}
\index{fromJson@{fromJson}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{fromJson()}{fromJson()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::from\+Json (\begin{DoxyParamCaption}\item[{const rapidjson\+::\+Value \&}]{val }\end{DoxyParamCaption})}



Deserialize Intersection State JSON into Intersection State object. 


\begin{DoxyParams}{Parameters}
{\em val} & Intersection State JSON. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{60}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                                                                \{}
\DoxyCodeLine{00061         \textcolor{keywordflow}{if} ( val.IsObject() ) \{}
\DoxyCodeLine{00062             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}name"{}})-\/>value.IsString() ) \{}
\DoxyCodeLine{00063                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00064                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} =  val[\textcolor{stringliteral}{"{}name"{}}].GetString();}
\DoxyCodeLine{00065             \} }
\DoxyCodeLine{00066             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}id"{}}) \&\& val[\textcolor{stringliteral}{"{}id"{}}].IsUint()) \{}
\DoxyCodeLine{00067                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00068                 \textcolor{keywordtype}{id} =  \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}id"{}}].GetUint());}
\DoxyCodeLine{00069             \}}
\DoxyCodeLine{00070             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00071                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required id property!"{}});}
\DoxyCodeLine{00072             \}}
\DoxyCodeLine{00073             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}revision"{}}) \&\& val[\textcolor{stringliteral}{"{}revision"{}}].IsUint()) \{}
\DoxyCodeLine{00074                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00075                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} =  \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}revision"{}}].GetUint());}
\DoxyCodeLine{00076             \}}
\DoxyCodeLine{00077             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00078                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required revision property!"{}});}
\DoxyCodeLine{00079             \}}
\DoxyCodeLine{00080             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}status"{}})-\/>value.IsUint()) \{}
\DoxyCodeLine{00081                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00082                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}} =  (uint8\_t) val[\textcolor{stringliteral}{"{}status"{}}].GetUint();}
\DoxyCodeLine{00083             \}}
\DoxyCodeLine{00084             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00085                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required status property!"{}});}
\DoxyCodeLine{00086             \}}
\DoxyCodeLine{00087             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}moy"{}}) \&\&  val[\textcolor{stringliteral}{"{}moy"{}}].IsUint()) \{}
\DoxyCodeLine{00088                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{00089                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = val[\textcolor{stringliteral}{"{}moy"{}}].GetUint();}
\DoxyCodeLine{00090             \}}
\DoxyCodeLine{00091             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00092                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required moy property!"{}});}
\DoxyCodeLine{00093             \}}
\DoxyCodeLine{00094             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}time\_stamp"{}}) \&\& val[\textcolor{stringliteral}{"{}time\_stamp"{}}].IsUint()) \{}
\DoxyCodeLine{00095                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{00096                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} =  \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}time\_stamp"{}}].GetUint());}
\DoxyCodeLine{00097             \}}
\DoxyCodeLine{00098             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00099                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required time\_stamp property!"{}});}
\DoxyCodeLine{00100             \}}
\DoxyCodeLine{00101             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}enabled\_lanes"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{00102                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00103                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.clear();}
\DoxyCodeLine{00104                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&lane: val[\textcolor{stringliteral}{"{}enabled\_lanes"{}}].GetArray()) \{}
\DoxyCodeLine{00105                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.push\_back(lane.GetInt());}
\DoxyCodeLine{00106                 \}}
\DoxyCodeLine{00107             \}}
\DoxyCodeLine{00108             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}states"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{00109                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00110                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.clear();}
\DoxyCodeLine{00111                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&movement\_st: val[\textcolor{stringliteral}{"{}states"{}}].GetArray()) \{}
\DoxyCodeLine{00112                     movement\_state move\_state;}
\DoxyCodeLine{00113                     move\_state.fromJson( movement\_st );}
\DoxyCodeLine{00114                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.push\_back( move\_state);}
\DoxyCodeLine{00115                 \}}
\DoxyCodeLine{00116             \}}
\DoxyCodeLine{00117             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00118                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required states property!"{}});}
\DoxyCodeLine{00119             \}}
\DoxyCodeLine{00120             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{00121                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00122                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.clear();}
\DoxyCodeLine{00123                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&state: val[\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}].GetArray()) \{}
\DoxyCodeLine{00124                     connection\_maneuver\_assist maneuver;}
\DoxyCodeLine{00125                     maneuver.fromJson( state );}
\DoxyCodeLine{00126                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.push\_back( maneuver);}
\DoxyCodeLine{00127                 \}}
\DoxyCodeLine{00128             \}}
\DoxyCodeLine{00129         \}}
\DoxyCodeLine{00130     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00088}{enabled\+\_\+lanes}}, \mbox{\hyperlink{connection__maneuver__assist_8cpp_source_l00020}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::connection\+\_\+maneuver\+\_\+assist\+::from\+Json()}}, \mbox{\hyperlink{movement__state_8cpp_source_l00028}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::movement\+\_\+state\+::from\+Json()}}, \mbox{\hyperlink{intersection__state_8h_source_l00099}{maneuver\+\_\+assist\+\_\+list}}, \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, \mbox{\hyperlink{intersection__state_8h_source_l00024}{name}}, \mbox{\hyperlink{intersection__state_8h_source_l00033}{revision}}, \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}, \mbox{\hyperlink{intersection__state_8h_source_l00076}{status}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.



Referenced by \mbox{\hyperlink{spat_8cpp_source_l00033}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat\+::from\+Json()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5}\label{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!get\_epoch\_timestamp@{get\_epoch\_timestamp}}
\index{get\_epoch\_timestamp@{get\_epoch\_timestamp}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{get\_epoch\_timestamp()}{get\_epoch\_timestamp()}}
{\footnotesize\ttfamily uint64\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::get\+\_\+epoch\+\_\+timestamp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the epoch timestamp of the intersection state timestamp. 

\begin{DoxyReturn}{Returns}
$\ast$$\ast$ uint64\+\_\+t epoch timestamp in unit of milliseconds 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00162}{162}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00162                                                           \{}
\DoxyCodeLine{00163        \textcolor{keyword}{auto} epoch\_timestamp = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}{convert\_min\_mills2epoch\_ts}}(\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}});}
\DoxyCodeLine{00164        \textcolor{keywordflow}{return} epoch\_timestamp;}
\DoxyCodeLine{00165     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8cpp_source_l00142}{convert\+\_\+min\+\_\+mills2epoch\+\_\+ts()}}, \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}\label{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!get\_movement@{get\_movement}}
\index{get\_movement@{get\_movement}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{get\_movement()}{get\_movement()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} \& signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::get\+\_\+movement (\begin{DoxyParamCaption}\item[{const int}]{signal\+\_\+group\+\_\+id }\end{DoxyParamCaption})}



Return reference to \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} for signal group. 


\begin{DoxyParams}{Parameters}
{\em signal\+\_\+group\+\_\+id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}}\& 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00191}{191}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00191                                                                                \{}
\DoxyCodeLine{00192         \textcolor{keywordflow}{for} ( \textcolor{keyword}{auto} it = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.begin(); it != \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.end(); it++) \{}
\DoxyCodeLine{00193             \textcolor{keywordflow}{if} ( it-\/>signal\_group ==  signal\_group\_id ) \{}
\DoxyCodeLine{00194                 \textcolor{keywordflow}{return} *it;}
\DoxyCodeLine{00195             \}}
\DoxyCodeLine{00196         \}}
\DoxyCodeLine{00197         \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}No movement\_state found for movement with signal group id "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(signal\_group\_id) + \textcolor{stringliteral}{"{}!"{}});   }
\DoxyCodeLine{00198     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}, and \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{to\+\_\+string()}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00211}{update\+\_\+movement\+\_\+state()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=296pt]{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}\label{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!initialize\_movement\_states@{initialize\_movement\_states}}
\index{initialize\_movement\_states@{initialize\_movement\_states}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{initialize\_movement\_states()}{initialize\_movement\_states()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::initialize\+\_\+movement\+\_\+states (\begin{DoxyParamCaption}\item[{const std\+::unordered\+\_\+map$<$ int, int $>$ \&}]{phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group }\end{DoxyParamCaption})}



Initialize list$<$movement\+\_\+state$>$ to include a movement for each phase\+\_\+numer/signal\+\_\+group entry in the phase number to signal group map. This method is meant to be run once, while initializing the spat object to contain movement states for all relevant signal groups. 


\begin{DoxyParams}{Parameters}
{\em phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group} & std\+::unordered\+\_\+map$<$int,int$>$ of phase number (keys) to signal group (values). Map used to translate phase\+\_\+number (NTCIP) to signal group (J2735). \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00200}{200}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00200                                                                                                                       \{}
\DoxyCodeLine{00201         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.empty()) \{}
\DoxyCodeLine{00202             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.clear();}
\DoxyCodeLine{00203         \}}
\DoxyCodeLine{00204         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&phase\_2\_sig\_group : phase\_number\_to\_signal\_group) \{}
\DoxyCodeLine{00205             movement\_state state;}
\DoxyCodeLine{00206             state.signal\_group = (uint8\_t) phase\_2\_sig\_group.second;}
\DoxyCodeLine{00207             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.push\_back(state);}
\DoxyCodeLine{00208         \}}
\DoxyCodeLine{00209     \}}

\end{DoxyCode}


References \mbox{\hyperlink{movement__state_8h_source_l00025}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::movement\+\_\+state\+::signal\+\_\+group}}, and \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}.



Referenced by \mbox{\hyperlink{spat_8cpp_source_l00079}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat\+::initialize\+\_\+intersection()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b}\label{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!operator"!=@{operator"!=}}
\index{operator"!=@{operator"!=}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{operator"!=()}{operator!=()}}
{\footnotesize\ttfamily bool signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::operator!= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\+\_\+state}} \&}]{other }\end{DoxyParamCaption}) const}



Returns the inverse of equals operator. 


\begin{DoxyParams}{Parameters}
{\em other} & second object to compare current object with. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if both objects do not contain equivalent data. 

false if both objects do contain equivalent data. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00138}{138}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00138                                                                               \{}
\DoxyCodeLine{00139         \textcolor{keywordflow}{return} !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}{operator==}}(compare);}
\DoxyCodeLine{00140     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}\label{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!operator==@{operator==}}
\index{operator==@{operator==}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{operator==()}{operator==()}}
{\footnotesize\ttfamily bool signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::operator== (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\+\_\+state}} \&}]{other }\end{DoxyParamCaption}) const}



Equals operator to asses whether two objects contain equivalent data. 


\begin{DoxyParams}{Parameters}
{\em compare} & second object to compare current object with. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if both object contain equivalent data. 

false if not. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{132}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00132                                                                             \{}
\DoxyCodeLine{00133         \textcolor{keywordflow}{return} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} == other.name \&\& \textcolor{keywordtype}{id} == other.id \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} == other.revision \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}} == other.status \&\&}
\DoxyCodeLine{00134             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} \&\& other.moy \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} == other.time\_stamp \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}} == other.enabled\_lanes}
\DoxyCodeLine{00135             \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}} == other.states \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}} == other.maneuver\_assist\_list;}
\DoxyCodeLine{00136     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00088}{enabled\+\_\+lanes}}, \mbox{\hyperlink{intersection__state_8h_source_l00031}{id}}, \mbox{\hyperlink{intersection__state_8h_source_l00099}{maneuver\+\_\+assist\+\_\+list}}, \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, \mbox{\hyperlink{intersection__state_8h_source_l00024}{name}}, \mbox{\hyperlink{intersection__state_8h_source_l00033}{revision}}, \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}, \mbox{\hyperlink{intersection__state_8h_source_l00076}{status}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00138}{operator!=()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a480dafe7aae5c872f14d1f60c8627636}\label{structsignal__phase__and__timing_1_1intersection__state_a480dafe7aae5c872f14d1f60c8627636}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!set\_timestamp\_local@{set\_timestamp\_local}}
\index{set\_timestamp\_local@{set\_timestamp\_local}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{set\_timestamp\_local()}{set\_timestamp\_local()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::set\+\_\+timestamp\+\_\+local (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set timestamp for intersection state based on host machine unix time. 



Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00179}{179}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00179                                                  \{}
\DoxyCodeLine{00180         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{00181         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{00182         tm utc\_tm;}
\DoxyCodeLine{00183         gmtime\_r(\&tt, \&utc\_tm);}
\DoxyCodeLine{00184         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = (uint32\_t)(utc\_tm.tm\_yday*60*24 + utc\_tm.tm\_hour*60 + utc\_tm.tm\_min);}
\DoxyCodeLine{00185         \textcolor{keyword}{auto} millisecond\_of\_second = std::chrono::duration\_cast<std::chrono::milliseconds>(now.time\_since\_epoch()).count() \% 1000;}
\DoxyCodeLine{00186         \textcolor{comment}{// Millisecond of second + second of minute * 1000}}
\DoxyCodeLine{00187         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} = (uint16\_t)(millisecond\_of\_second + utc\_tm.tm\_sec*1000);}
\DoxyCodeLine{00188        }
\DoxyCodeLine{00189     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a5aa5329bedd738f5579cf045975d87a9}\label{structsignal__phase__and__timing_1_1intersection__state_a5aa5329bedd738f5579cf045975d87a9}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!set\_timestamp\_ntcip@{set\_timestamp\_ntcip}}
\index{set\_timestamp\_ntcip@{set\_timestamp\_ntcip}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{set\_timestamp\_ntcip()}{set\_timestamp\_ntcip()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::set\+\_\+timestamp\+\_\+ntcip (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{second\+\_\+of\+\_\+day,  }\item[{const uint16\+\_\+t}]{millisecond\+\_\+of\+\_\+second }\end{DoxyParamCaption})}



Set timestamp for intersection state based on NTCIP SPaT UDP message timestamp which is transmitted as second of the UTC day and millisecond of the UTC second. This information can be combined with the unix host time day of the year to get minute of the UTC year and millisecond of the UTC minute (J2735 Intersection State time\+Stamp units). 


\begin{DoxyParams}{Parameters}
{\em second\+\_\+of\+\_\+day} & second of the UTC year. \\
\hline
{\em millisecond\+\_\+of\+\_\+second} & millisecond of the UTC second. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00167}{167}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00167                                                                                                                     \{}
\DoxyCodeLine{00168         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{00169         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{00170         tm utc\_tm;}
\DoxyCodeLine{00171         gmtime\_r(\&tt, \&utc\_tm);}
\DoxyCodeLine{00172         \textcolor{comment}{// Day of the year * 24 hours * 60 minutes + second of the day / 60 = minute of the year}}
\DoxyCodeLine{00173         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = (uint32\_t)(utc\_tm.tm\_yday*24*60+ trunc(second\_of\_day/ 60)); }
\DoxyCodeLine{00174         \textcolor{comment}{// Remaineder of (second of the day/ 60 ) * 1000 + millisecond of the current second}}
\DoxyCodeLine{00175         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} = ((second\_of\_day\%60)*1000) + millisecond\_of\_second;}
\DoxyCodeLine{00176     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_ae992920af2fdef8ffd0cf29da74e0ac9}\label{structsignal__phase__and__timing_1_1intersection__state_ae992920af2fdef8ffd0cf29da74e0ac9}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!toJson@{toJson}}
\index{toJson@{toJson}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{toJson()}{toJson()}}
{\footnotesize\ttfamily rapidjson\+::\+Value signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::to\+Json (\begin{DoxyParamCaption}\item[{rapidjson\+::\+Document\+::\+Allocator\+Type \&}]{allocator }\end{DoxyParamCaption}) const}



Serialize Intersection State object to rapidjson\+::\+Value for writing as JSON string. 

\begin{DoxyReturn}{Returns}
rapidjson\+::\+Value serialize Intersection State object 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{5}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00005                                                                                              \{}
\DoxyCodeLine{00006         \textcolor{comment}{// Create intersection state JSON value}}
\DoxyCodeLine{00007         rapidjson::Value state(rapidjson::kObjectType);}
\DoxyCodeLine{00008         \textcolor{comment}{// Populate}}
\DoxyCodeLine{00009         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00010         state.AddMember(\textcolor{stringliteral}{"{}name"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}}, allocator);}
\DoxyCodeLine{00011         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00012         \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == 0 ) \{}
\DoxyCodeLine{00013             \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required id property!"{}});  }
\DoxyCodeLine{00014         \}}
\DoxyCodeLine{00015         state.AddMember(\textcolor{stringliteral}{"{}id"{}}, \textcolor{keywordtype}{id}, allocator);}
\DoxyCodeLine{00016         state.AddMember(\textcolor{stringliteral}{"{}revision"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}}, allocator);}
\DoxyCodeLine{00017         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00018         state.AddMember(\textcolor{stringliteral}{"{}status"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}}, allocator);}
\DoxyCodeLine{00019         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} == 0 ) \{}
\DoxyCodeLine{00020             \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required moy property!"{}});}
\DoxyCodeLine{00021         \}}
\DoxyCodeLine{00022         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{00023         state.AddMember(\textcolor{stringliteral}{"{}moy"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}}, allocator);}
\DoxyCodeLine{00024         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{00025         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} == 0 ) \{}
\DoxyCodeLine{00026             \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required time\_stamp property!"{}});}
\DoxyCodeLine{00027         \}}
\DoxyCodeLine{00028         state.AddMember(\textcolor{stringliteral}{"{}time\_stamp"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}}, allocator);}
\DoxyCodeLine{00029         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00030         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.empty() ) \{}
\DoxyCodeLine{00031             rapidjson::Value lane\_list(rapidjson::kArrayType);}
\DoxyCodeLine{00032             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&lane\_id : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}) \{}
\DoxyCodeLine{00033                 lane\_list.PushBack(lane\_id, allocator);}
\DoxyCodeLine{00034             \}}
\DoxyCodeLine{00035             state.AddMember(\textcolor{stringliteral}{"{}enabled\_lanes"{}}, lane\_list, allocator);}
\DoxyCodeLine{00036         \}}
\DoxyCodeLine{00037         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{00038         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.empty() ) \{}
\DoxyCodeLine{00039             rapidjson::Value states\_list(rapidjson::kArrayType);}
\DoxyCodeLine{00040             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&move\_state : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}) \{}
\DoxyCodeLine{00041                 states\_list.PushBack(move\_state.toJson(allocator), allocator);}
\DoxyCodeLine{00042             \}}
\DoxyCodeLine{00043             state.AddMember(\textcolor{stringliteral}{"{}states"{}}, states\_list, allocator);}
\DoxyCodeLine{00044         \}}
\DoxyCodeLine{00045         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00046                \textcolor{keywordflow}{throw} signal\_phase\_and\_timing\_exception(\textcolor{stringliteral}{"{}IntersectionState is missing required states property!"{}});}
\DoxyCodeLine{00047         \}}
\DoxyCodeLine{00048         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{00049         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.empty() ) \{}
\DoxyCodeLine{00050             rapidjson::Value maneuver\_list(rapidjson::kArrayType);}
\DoxyCodeLine{00051             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&maneuver : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}) \{}
\DoxyCodeLine{00052                 maneuver\_list.PushBack(maneuver.toJson(allocator), allocator);}
\DoxyCodeLine{00053             \}}
\DoxyCodeLine{00054             state.AddMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}, maneuver\_list, allocator);}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056         \}}
\DoxyCodeLine{00057         \textcolor{keywordflow}{return} state;}
\DoxyCodeLine{00058     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00088}{enabled\+\_\+lanes}}, \mbox{\hyperlink{intersection__state_8h_source_l00099}{maneuver\+\_\+assist\+\_\+list}}, \mbox{\hyperlink{intersection__state_8h_source_l00080}{moy}}, \mbox{\hyperlink{intersection__state_8h_source_l00024}{name}}, \mbox{\hyperlink{intersection__state_8h_source_l00033}{revision}}, \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}, \mbox{\hyperlink{intersection__state_8h_source_l00076}{status}}, and \mbox{\hyperlink{intersection__state_8h_source_l00084}{time\+\_\+stamp}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}\label{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!update\_movement\_state@{update\_movement\_state}}
\index{update\_movement\_state@{update\_movement\_state}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{update\_movement\_state()}{update\_movement\_state()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::update\+\_\+movement\+\_\+state (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip\+::ntcip\+\_\+1202\+\_\+ext}} \&}]{spat\+\_\+data,  }\item[{const int}]{signal\+\_\+group\+\_\+id,  }\item[{const int}]{phase\+\_\+number }\end{DoxyParamCaption})}



Method to update \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}} with signal\+\_\+group\+\_\+id using ntcip spat data. 


\begin{DoxyParams}{Parameters}
{\em spat\+\_\+data} & NTCIP SPaT data. \\
\hline
{\em signal\+\_\+group\+\_\+id} & signal group id of movement to update. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00211}{211}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00211                                                                                                                                       \{}
\DoxyCodeLine{00212         movement\_state \&movement = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}{get\_movement}}(signal\_group\_id);}
\DoxyCodeLine{00213         \textcolor{comment}{// Get current movement\_event}}
\DoxyCodeLine{00214         movement\_event \&cur\_event = movement.state\_time\_speed.front();}
\DoxyCodeLine{00215         \textcolor{comment}{// Set event state }}
\DoxyCodeLine{00216         \textcolor{keywordtype}{bool} is\_flashing = spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a5f5f247af2e7d5c7a2e196c9125907ea}{get\_phase\_flashing\_status}}( \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}} );}
\DoxyCodeLine{00217         \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_adfbdd4d01e9825dc3e1e674473c56171}{get\_phase\_red\_status}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}) ) \{}
\DoxyCodeLine{00218             \textcolor{keywordflow}{if} (is\_flashing) \{}
\DoxyCodeLine{00219                 \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a82f58c8125d6f043623349cf7330ef62}{movement\_phase\_state::stop\_then\_proceed}} ) \{}
\DoxyCodeLine{00220                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00221                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00222                 \}}
\DoxyCodeLine{00223                 cur\_event.event\_state = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a82f58c8125d6f043623349cf7330ef62}{movement\_phase\_state::stop\_then\_proceed}}; }
\DoxyCodeLine{00224             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00225                 \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{movement\_phase\_state::stop\_and\_remain}} ) \{}
\DoxyCodeLine{00226                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00227                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00228                 \}}
\DoxyCodeLine{00229                 cur\_event.event\_state =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{movement\_phase\_state::stop\_and\_remain}};}
\DoxyCodeLine{00230             \}}
\DoxyCodeLine{00231 }
\DoxyCodeLine{00232         \}}
\DoxyCodeLine{00233         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_aa5fef8a2a7ce6499bb545e4e1b343b8e}{get\_phase\_yellow\_status}}( \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}} ) ) \{}
\DoxyCodeLine{00234             \textcolor{keywordflow}{if} ( is\_flashing ) \{}
\DoxyCodeLine{00235                 \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ae7bfb5169b6040cc3adbcaa21dd1bc38}{movement\_phase\_state::caution\_conflicting\_traffic}} ) \{}
\DoxyCodeLine{00236                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00237                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00238                 \}}
\DoxyCodeLine{00239                 cur\_event.event\_state =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ae7bfb5169b6040cc3adbcaa21dd1bc38}{movement\_phase\_state::caution\_conflicting\_traffic}};}
\DoxyCodeLine{00240             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00241                 \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{movement\_phase\_state::protected\_clearance}} ) \{}
\DoxyCodeLine{00242                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00243                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00244                 \}}
\DoxyCodeLine{00245                 cur\_event.event\_state =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{movement\_phase\_state::protected\_clearance}};}
\DoxyCodeLine{00246             \}}
\DoxyCodeLine{00247         \}}
\DoxyCodeLine{00248         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_ac8e0437aeac4c314b2f682f57a6c47c9}{get\_phase\_green\_status}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}})) \{}
\DoxyCodeLine{00249             \textcolor{comment}{// TODO: Add Support Permissive Green Phase}}
\DoxyCodeLine{00250             \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{movement\_phase\_state::protected\_movement\_allowed}} ) \{}
\DoxyCodeLine{00251                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00252                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00253             \}}
\DoxyCodeLine{00254             cur\_event.event\_state = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{movement\_phase\_state::protected\_movement\_allowed}};}
\DoxyCodeLine{00255         \}}
\DoxyCodeLine{00256         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00257             \textcolor{keywordflow}{if} ( cur\_event.event\_state !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14aa82fd95db10ff25dfad39f07372ebe37}{movement\_phase\_state::dark}} ) \{}
\DoxyCodeLine{00258                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{00259                     cur\_event.timing.start\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{00260             \}}
\DoxyCodeLine{00261             cur\_event.event\_state = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14aa82fd95db10ff25dfad39f07372ebe37}{movement\_phase\_state::dark}};}
\DoxyCodeLine{00262         \}}
\DoxyCodeLine{00263         \textcolor{comment}{// Set event timing}}
\DoxyCodeLine{00264         cur\_event.timing.max\_end\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a0cbc4b96d4191b8cc8834cf06f7a810b}{get\_phasetime}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}).\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext__phasetime_ac2bd3254673a1650bbb1481bd15d627b}{get\_spat\_veh\_max\_time\_to\_change}}());}
\DoxyCodeLine{00265         cur\_event.timing.min\_end\_time = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a0cbc4b96d4191b8cc8834cf06f7a810b}{get\_phasetime}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}).\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext__phasetime_ac4be29069aab2d1659df59c7e3a92dc7}{get\_spat\_veh\_min\_time\_to\_change}}());}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267     \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ae7bfb5169b6040cc3adbcaa21dd1bc38}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::caution\+\_\+conflicting\+\_\+traffic}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00292}{convert\+\_\+offset()}}, \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14aa82fd95db10ff25dfad39f07372ebe37}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::dark}}, \mbox{\hyperlink{movement__event_8h_source_l00115}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::movement\+\_\+event\+::event\+\_\+state}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00191}{get\+\_\+movement()}}, \mbox{\hyperlink{ntcip__1202__ext_8cpp_source_l00074}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+::get\+\_\+phase\+\_\+flashing\+\_\+status()}}, \mbox{\hyperlink{ntcip__1202__ext_8cpp_source_l00046}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+::get\+\_\+phase\+\_\+green\+\_\+status()}}, \mbox{\hyperlink{ntcip__1202__ext_8cpp_source_l00038}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+::get\+\_\+phase\+\_\+red\+\_\+status()}}, \mbox{\hyperlink{ntcip__1202__ext_8cpp_source_l00042}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+::get\+\_\+phase\+\_\+yellow\+\_\+status()}}, \mbox{\hyperlink{ntcip__1202__ext_8cpp_source_l00094}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+::get\+\_\+phasetime()}}, \mbox{\hyperlink{ntcip__1202__ext__phasetime_8cpp_source_l00020}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+\_\+phasetime\+::get\+\_\+spat\+\_\+veh\+\_\+max\+\_\+time\+\_\+to\+\_\+change()}}, \mbox{\hyperlink{ntcip__1202__ext__phasetime_8cpp_source_l00016}{ntcip\+::ntcip\+\_\+1202\+\_\+ext\+\_\+phasetime\+::get\+\_\+spat\+\_\+veh\+\_\+min\+\_\+time\+\_\+to\+\_\+change()}}, \mbox{\hyperlink{time__change__details_8h_source_l00025}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::time\+\_\+change\+\_\+details\+::max\+\_\+end\+\_\+time}}, \mbox{\hyperlink{time__change__details_8h_source_l00021}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::time\+\_\+change\+\_\+details\+::min\+\_\+end\+\_\+time}}, \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_source_l00001}{phase\+\_\+number}}, \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::protected\+\_\+clearance}}, \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::protected\+\_\+movement\+\_\+allowed}}, \mbox{\hyperlink{time__change__details_8h_source_l00017}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::time\+\_\+change\+\_\+details\+::start\+\_\+time}}, \mbox{\hyperlink{movement__state_8h_source_l00034}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::movement\+\_\+state\+::state\+\_\+time\+\_\+speed}}, \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::stop\+\_\+and\+\_\+remain}}, \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a82f58c8125d6f043623349cf7330ef62}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::stop\+\_\+then\+\_\+proceed}}, and \mbox{\hyperlink{movement__event_8h_source_l00121}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::movement\+\_\+event\+::timing}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00269}{update\+\_\+movements()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935}\label{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!update\_movements@{update\_movements}}
\index{update\_movements@{update\_movements}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{update\_movements()}{update\_movements()}}
{\footnotesize\ttfamily void signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::update\+\_\+movements (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip\+::ntcip\+\_\+1202\+\_\+ext}} \&}]{spat\+\_\+data,  }\item[{const std\+::unordered\+\_\+map$<$ int, int $>$ \&}]{phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group }\end{DoxyParamCaption})}



Clears old movement event data for all movement\+\_\+states. Adds one \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\+\_\+event}} to the state\+\_\+time\+\_\+speed list as the current event for each movement state. Then calls update\+\_\+movement\+\_\+state on every phase number/signal group mapping included in the phase\+\_\+number to signal group map. This method is meant to be executed each time a nticp\+\_\+1202\+\_\+ext UDP packet is received to update the current movement event data of each phase with the timing information received. 


\begin{DoxyParams}{Parameters}
{\em spat\+\_\+data} & UDP TSC information. \\
\hline
{\em phase\+\_\+number\+\_\+to\+\_\+signal\+\_\+group} & phase number to signal group map. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{intersection__state_8cpp_source_l00269}{269}} of file \mbox{\hyperlink{intersection__state_8cpp_source}{intersection\+\_\+state.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00269                                                                                                                                             \{}
\DoxyCodeLine{00270         \textcolor{keywordflow}{for} ( \textcolor{keyword}{auto} \&move\_state : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}} ) \{}
\DoxyCodeLine{00271             \textcolor{comment}{// If movement event list is empty, create a current event.}}
\DoxyCodeLine{00272             \textcolor{keywordflow}{if} ( move\_state.state\_time\_speed.empty()) \{}
\DoxyCodeLine{00273                 \textcolor{comment}{// Add current movement\_event}}
\DoxyCodeLine{00274                 movement\_event cur\_event;}
\DoxyCodeLine{00275                 move\_state.state\_time\_speed.push\_front(cur\_event);}
\DoxyCodeLine{00276             \}}
\DoxyCodeLine{00277             \textcolor{comment}{// If movement event list contains future events, clear future events.}}
\DoxyCodeLine{00278             \textcolor{keywordflow}{if} ( move\_state.state\_time\_speed.size() > 1) \{}
\DoxyCodeLine{00279                 \textcolor{comment}{// Clear all movement events except current (front)}}
\DoxyCodeLine{00280                 movement\_event cur\_event = move\_state.state\_time\_speed.front();}
\DoxyCodeLine{00281                 move\_state.state\_time\_speed.clear();}
\DoxyCodeLine{00282                 move\_state.state\_time\_speed.push\_front(cur\_event);}
\DoxyCodeLine{00283             \}}
\DoxyCodeLine{00284            }
\DoxyCodeLine{00285         \}}
\DoxyCodeLine{00286         }
\DoxyCodeLine{00287         \textcolor{keywordflow}{for} ( \textcolor{keyword}{const} \textcolor{keyword}{auto} \&phase\_2\_signal\_group : phase\_number\_to\_signal\_group ) \{}
\DoxyCodeLine{00288             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}{update\_movement\_state}}(spat\_data, phase\_2\_signal\_group.second, phase\_2\_signal\_group.first);}
\DoxyCodeLine{00289         \}}
\DoxyCodeLine{00290     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__state_8h_source_l00094}{states}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00211}{update\+\_\+movement\+\_\+state()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}\label{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!enabled\_lanes@{enabled\_lanes}}
\index{enabled\_lanes@{enabled\_lanes}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{enabled\_lanes}{enabled\_lanes}}
{\footnotesize\ttfamily std\+::list$<$int$>$ signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::enabled\+\_\+lanes}



A list of unique lane ID for each lane object which is active. Refers to dynamic MAP contents. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00088}{88}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_ada34bde87ec24eb85810d408cd13f69f}\label{structsignal__phase__and__timing_1_1intersection__state_ada34bde87ec24eb85810d408cd13f69f}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!id@{id}}
\index{id@{id}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily uint16\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::id = 0}



A globally unique value set and consisting of region\+ID and intersection ID assignment. Provides unique mapping to the intersection MAP in question which provides complete location and approach/move/lane data. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00031}{31}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{spat_8cpp_source_l00079}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat\+::initialize\+\_\+intersection()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}\label{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!maneuver\_assist\_list@{maneuver\_assist\_list}}
\index{maneuver\_assist\_list@{maneuver\_assist\_list}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{maneuver\_assist\_list}{maneuver\_assist\_list}}
{\footnotesize\ttfamily std\+::list$<$\mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist}{connection\+\_\+maneuver\+\_\+assist}}$>$ signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::maneuver\+\_\+assist\+\_\+list}



Assist Data. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00099}{99}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_ad71bed5c8cd56cac8dcd041c5fd5a83e}\label{structsignal__phase__and__timing_1_1intersection__state_ad71bed5c8cd56cac8dcd041c5fd5a83e}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!MIN\_TO\_SECONDS@{MIN\_TO\_SECONDS}}
\index{MIN\_TO\_SECONDS@{MIN\_TO\_SECONDS}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{MIN\_TO\_SECONDS}{MIN\_TO\_SECONDS}}
{\footnotesize\ttfamily int signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::\+MIN\+\_\+\+TO\+\_\+\+SECONDS = 60}



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00018}{18}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00142}{convert\+\_\+min\+\_\+mills2epoch\+\_\+ts()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}\label{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!moy@{moy}}
\index{moy@{moy}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{moy}{moy}}
{\footnotesize\ttfamily uint32\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::moy = 0}



Minute of current UTC year. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00080}{80}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00162}{get\+\_\+epoch\+\_\+timestamp()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00179}{set\+\_\+timestamp\+\_\+local()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00167}{set\+\_\+timestamp\+\_\+ntcip()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}\label{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!name@{name}}
\index{name@{name}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{name}{name}}
{\footnotesize\ttfamily std\+::string signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::name}



Descriptive name for this collection. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00024}{24}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{spat_8cpp_source_l00079}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat\+::initialize\+\_\+intersection()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}\label{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!revision@{revision}}
\index{revision@{revision}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{revision}{revision}}
{\footnotesize\ttfamily uint8\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::revision = 0}



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00033}{33}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_aebaed676aff07f126fe01e1319b4c605}\label{structsignal__phase__and__timing_1_1intersection__state_aebaed676aff07f126fe01e1319b4c605}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!SECOND\_TO\_MILLISECONDS@{SECOND\_TO\_MILLISECONDS}}
\index{SECOND\_TO\_MILLISECONDS@{SECOND\_TO\_MILLISECONDS}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{SECOND\_TO\_MILLISECONDS}{SECOND\_TO\_MILLISECONDS}}
{\footnotesize\ttfamily int signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::\+SECOND\+\_\+\+TO\+\_\+\+MILLISECONDS = 1000}



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00019}{19}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00142}{convert\+\_\+min\+\_\+mills2epoch\+\_\+ts()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}\label{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!states@{states}}
\index{states@{states}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{states}{states}}
{\footnotesize\ttfamily std\+::list$<$\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\+\_\+state}}$>$ signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::states}



Each Movement is given in turn and contains its signal phase state, mapping to the lanes it applies to, and point in time it will and. It may contain both active and future states. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00094}{94}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00191}{get\+\_\+movement()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00200}{initialize\+\_\+movement\+\_\+states()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00269}{update\+\_\+movements()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}\label{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!status@{status}}
\index{status@{status}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{status}{status}}
{\footnotesize\ttfamily uint8\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::status}



BIT String of Intersection\+Status\+Object\+: 

manual\+Control\+Is\+Enabled (0), -- Timing reported is per programmed values, etc. but person -- at cabinet can manually request that certain intervals are -- terminated early (e.\+g. green). stop\+Time\+Is\+Activated (1), -- And all counting/timing has stopped. failure\+Flash (2), -- Above to be used for any detected hardware failures, -- e.\+g. conflict monitor as well as for police flash preempt\+Is\+Active (3), signal\+Priority\+Is\+Active (4), ~\newline
 -- Additional states fixed\+Time\+Operation (5), -- Schedule of signals is based on time only -- (i.\+e. the state can be calculated) traffic\+Dependent\+Operation (6), -- Operation is based on different levels of traffic parameters -- (requests, duration of gaps or more complex parameters) standby\+Operation (7), -- Controller\+: partially switched off or partially amber flashing failure\+Mode (8), -- Controller has a problem or failure in operation off (9), -- Controller is switched off -- Related to MAP and SPAT bindings recent\+MAPmessage\+Update (10), -- Map revision with content changes recent\+Change\+In\+MAPassigned\+Lanes\+IDs\+Used (11), -- Change in MAP\textquotesingle{}s assigned lanes used (lane changes) -- Changes in the active lane list description no\+Valid\+MAPis\+Available\+At\+This\+Time (12), -- MAP (and various lanes indexes) not available no\+Valid\+SPATis\+Available\+At\+This\+Time (13) -- SPAT system is not working at this time ~\newline
 -- Bits 14,15 reserved at this time and shall be zero \} (SIZE(16)) 

Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00076}{76}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.

\mbox{\Hypertarget{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}\label{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}} 
\index{signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}!time\_stamp@{time\_stamp}}
\index{time\_stamp@{time\_stamp}!signal\_phase\_and\_timing::intersection\_state@{signal\_phase\_and\_timing::intersection\_state}}
\doxysubsubsection{\texorpdfstring{time\_stamp}{time\_stamp}}
{\footnotesize\ttfamily uint16\+\_\+t signal\+\_\+phase\+\_\+and\+\_\+timing\+::intersection\+\_\+state\+::time\+\_\+stamp = 0}



Millisecond point in the current UTC minute that this message was created. 



Definition at line \mbox{\hyperlink{intersection__state_8h_source_l00084}{84}} of file \mbox{\hyperlink{intersection__state_8h_source}{intersection\+\_\+state.\+h}}.



Referenced by \mbox{\hyperlink{intersection__state_8cpp_source_l00060}{from\+Json()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00162}{get\+\_\+epoch\+\_\+timestamp()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00132}{operator==()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00179}{set\+\_\+timestamp\+\_\+local()}}, \mbox{\hyperlink{intersection__state_8cpp_source_l00167}{set\+\_\+timestamp\+\_\+ntcip()}}, and \mbox{\hyperlink{intersection__state_8cpp_source_l00005}{to\+Json()}}.



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
streets\+\_\+utils/streets\+\_\+signal\+\_\+phase\+\_\+and\+\_\+timing/include/\mbox{\hyperlink{intersection__state_8h}{intersection\+\_\+state.\+h}}\item 
streets\+\_\+utils/streets\+\_\+signal\+\_\+phase\+\_\+and\+\_\+timing/src/models/\mbox{\hyperlink{intersection__state_8cpp}{intersection\+\_\+state.\+cpp}}\end{DoxyCompactItemize}
