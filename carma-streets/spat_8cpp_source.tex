\hypertarget{spat_8cpp_source}{}\doxysection{spat.\+cpp}
\label{spat_8cpp_source}\index{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/spat.cpp@{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/spat.cpp}}
\mbox{\hyperlink{spat_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{spat_8h}{spat.h}}"{}}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesignal__phase__and__timing}{signal\_phase\_and\_timing}}\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00005}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1610241d89b9b84063f248803546a70b}{00005}}     std::string \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1610241d89b9b84063f248803546a70b}{spat::toJson}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00006}00006         rapidjson::Document doc;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00007}00007         \textcolor{keyword}{auto} allocator = doc.GetAllocator();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00008}00008         \textcolor{comment}{// Create SPaT JSON value}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00009}00009         rapidjson::Value \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}}(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00010}00010         \textcolor{comment}{// Populate SPat JSON}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00011}00011         \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}}.AddMember(\textcolor{stringliteral}{"{}time\_stamp"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}}, allocator);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00012}00012         \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}}.AddMember( \textcolor{stringliteral}{"{}name"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a0a562044bd6250986b309068c079ade0}{name}}, allocator);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00013}00013         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00014}00014             rapidjson::Value list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00015}00015             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&intersection : \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}} ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00016}00016                 list.PushBack(intersection.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00017}00017             \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00018}00018             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}}.AddMember(\textcolor{stringliteral}{"{}intersections"{}}, list, allocator);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00019}00019         \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00020}00020             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}SPaT message is missing required intersections property!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00022}00022         rapidjson::StringBuffer buffer;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00023}00023         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00024}00024             rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00025}00025             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}}.Accept(writer);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00026}00026         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00027}00027         \textcolor{keywordflow}{catch}( \textcolor{keyword}{const} std::exception \&e ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00028}00028             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(e.what());}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00029}00029         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00030}00030         \textcolor{keywordflow}{return} buffer.GetString();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00031}00031     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00033}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd}{00033}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a034410d8e6254100552d88d21ca5bedd}{spat::fromJson}}(\textcolor{keyword}{const} std::string \&json )  \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00034}00034         rapidjson::Document doc;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00035}00035         doc.Parse(json);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00036}00036         \textcolor{keywordflow}{if} (doc.HasParseError()) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00037}00037             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}SPaT message JSON is misformatted. JSON parsing failed!"{}});  }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00038}00038         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00040}00040         \textcolor{keywordflow}{if} ( doc.HasMember(\textcolor{stringliteral}{"{}time\_stamp"{}}) \&\& doc.FindMember(\textcolor{stringliteral}{"{}time\_stamp"{}})-\/>value.IsUint64()) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00041}00041             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}} =  (uint32\_t) doc[\textcolor{stringliteral}{"{}time\_stamp"{}}].GetUint64(); \textcolor{comment}{// OPTIONAL in J2735 SPaT definition}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00042}00042         \} }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00043}00043         \textcolor{keywordflow}{if} (doc.FindMember(\textcolor{stringliteral}{"{}name"{}})-\/>value.IsString() ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00044}00044             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a0a562044bd6250986b309068c079ade0}{name}} = doc[\textcolor{stringliteral}{"{}name"{}}].GetString();  \textcolor{comment}{// OPTIONAL see J2735 SPaT definition}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00045}00045         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00046}00046         \textcolor{keywordflow}{if} ( doc.FindMember(\textcolor{stringliteral}{"{}intersections"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00047}00047             \textcolor{comment}{// REQUIRED see J2735 SPaT definition}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00048}00048             \textcolor{comment}{// Clear intersection state list in case it is populated.}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00049}00049             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.clear();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00050}00050             \textcolor{keywordflow}{for} ( \textcolor{keyword}{const} \textcolor{keyword}{auto} \&intersection : doc[\textcolor{stringliteral}{"{}intersections"{}}].GetArray() )\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00051}00051                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} cur\_state;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00052}00052                 cur\_state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}{fromJson}}(intersection);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00053}00053                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.push\_back(cur\_state);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00054}00054             \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00055}00055         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00056}00056         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00057}00057             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}SPaT message is missing required intersections property!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00058}00058         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00059}00059             }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00060}00060         }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00061}00061     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00063}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc}{00063}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_abf3e0ae490abd77f4c168e34222c21dc}{spat::update}}( \mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip::ntcip\_1202\_ext}} \&ntcip\_data, \textcolor{keywordtype}{bool} use\_ntcip\_timestamp )\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00064}00064         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a277d582cc1d76ec0776d5b2dc11f0395}{phase\_to\_signal\_group}}.empty() || \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.front().name.empty() || \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.front().id == 0) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00065}00065             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}Before updating SPAT with NTCIP information spat::initialize() must be called! See README documentation!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00066}00066         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00067}00067         \textcolor{keywordflow}{if} ( use\_ntcip\_timestamp ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00068}00068             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3}{set\_timestamp\_ntcip}}( ntcip\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_af186e0f2ed0ef770ecc230c4af031a59}{get\_timestamp\_seconds\_of\_day}}(), ntcip\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a8d066489dfd3a7b29753c91066e39f5d}{spat\_timestamp\_msec}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00069}00069         \} }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00070}00070         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00071}00071             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7}{set\_timestamp\_local}}();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00072}00072         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00073}00073         \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931}{update\_intersection\_state}}( ntcip\_data );}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00074}00074         }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00075}00075         }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00076}00076         }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00077}00077     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00078}00078 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00079}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858}{00079}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a8225fc5b13a6faaf4d1e309dadd76858}{spat::initialize\_intersection}}(\textcolor{keyword}{const} std::string \&intersection\_name, \textcolor{keyword}{const} \textcolor{keywordtype}{int} intersection\_id, \textcolor{keyword}{const} std::unordered\_map<int,int> \&\_phase\_number\_to\_signal\_group ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00080}00080         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.empty()) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00081}00081             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.clear();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00082}00082         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00083}00083         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} cur\_state;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00084}00084         cur\_state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} = intersection\_name;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00085}00085         cur\_state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ada34bde87ec24eb85810d408cd13f69f}{id}} =  (uint16\_t) intersection\_id;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00086}00086         \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a277d582cc1d76ec0776d5b2dc11f0395}{phase\_to\_signal\_group}} = \_phase\_number\_to\_signal\_group;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00087}00087         cur\_state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}{initialize\_movement\_states}}( \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a277d582cc1d76ec0776d5b2dc11f0395}{phase\_to\_signal\_group}} );}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00088}00088         \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.push\_back(cur\_state);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00089}00089     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00091}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3}{00091}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a59f4842ab1588deac2746ecdafcd29b3}{spat::set\_timestamp\_ntcip}}(\textcolor{keyword}{const} uint32\_t second\_of\_day, \textcolor{keyword}{const} uint16\_t millisecond\_of\_second ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00092}00092         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.empty()) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00093}00093             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} \&intersection = \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.front();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00094}00094             intersection.set\_timestamp\_ntcip(second\_of\_day, millisecond\_of\_second);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00095}00095             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}} = intersection.moy;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00096}00096         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00097}00097         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00098}00098             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}Intersection State List is empty! Cannot populate timestamp information!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00099}00099         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00100}00100     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00102}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7}{00102}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac664acbcf145d92f92605e3bfde11ce7}{spat::set\_timestamp\_local}}() \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00103}00103         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00104}00104             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} \&intersection = \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.front();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00105}00105             intersection.set\_timestamp\_local();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00106}00106             \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}} =  intersection.moy;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00107}00107         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00108}00108         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00109}00109             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}Intersection State List is empty! Cannot populate timestamp information!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00110}00110         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00111}00111     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00113}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931}{00113}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae02c2e6b6a732834be0f8472270f7931}{spat::update\_intersection\_state}}( \mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip::ntcip\_1202\_ext}} \&ntcip\_data ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00114}00114         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00115}00115             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} \&intersection = \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}}.front();}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00116}00116             intersection.update\_movements(ntcip\_data, \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a277d582cc1d76ec0776d5b2dc11f0395}{phase\_to\_signal\_group}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00117}00117             \textcolor{comment}{// Update Intersection Status}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00118}00118             intersection.status = ntcip\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a494df3028a1a0d9b6463401cf01f5b54}{spat\_intersection\_status}};}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00119}00119             \textcolor{comment}{// From V2X-\/Hub TODO: Investigate}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00120}00120             intersection.revision = 1;}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00121}00121         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00122}00122         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00123}00123             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}Intersection State List is empty! Cannot populate status information!"{}});}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00124}00124         \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00125}00125     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00127}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e}{00127}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e}{spat::operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}} \&other)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00128}00128         \textcolor{keywordflow}{return} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ac08c93a991a59d5d32fb2a363460d874}{timestamp}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a0a562044bd6250986b309068c079ade0}{name}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a0a562044bd6250986b309068c079ade0}{name}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a1ab4b5232e535810906b7076d08812ca}{intersections}};}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00129}00129     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00131}\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889}{00131}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_a5c73cc279f79a8bfcbd3fbbb1dc31889}{spat::operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{spat}} \&other)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00132}00132         \textcolor{keywordflow}{return} !\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat_ae09b881219e3f51e7d9839668abbb52e}{operator==}}(other);}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00133}00133     \}}
\DoxyCodeLine{\Hypertarget{spat_8cpp_source_l00134}00134 \}}

\end{DoxyCode}
