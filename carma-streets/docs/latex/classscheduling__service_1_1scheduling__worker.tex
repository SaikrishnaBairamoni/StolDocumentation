\hypertarget{classscheduling__service_1_1scheduling__worker}{}\doxysection{scheduling\+\_\+service\+::scheduling\+\_\+worker Class Reference}
\label{classscheduling__service_1_1scheduling__worker}\index{scheduling\_service::scheduling\_worker@{scheduling\_service::scheduling\_worker}}


{\ttfamily \#include $<$scheduling\+\_\+worker.\+h$>$}



Collaboration diagram for scheduling\+\_\+service\+::scheduling\+\_\+worker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=191pt]{classscheduling__service_1_1scheduling__worker__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule}} $>$ \mbox{\hyperlink{classscheduling__service_1_1scheduling__worker_ae8e70252fc78b11963c52a73b8af8025}{schedule\+\_\+vehicles}} (std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$ veh\+\_\+map, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler}{streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler}} $>$ scheduler) const
\begin{DoxyCompactList}\small\item\em Runs the scheduler\textquotesingle{}s schedule\+\_\+veh method to schedule all vehicles. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{scheduling__worker_8h_source_l00024}{24}} of file \mbox{\hyperlink{scheduling__worker_8h_source}{scheduling\+\_\+worker.\+h}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classscheduling__service_1_1scheduling__worker_ae8e70252fc78b11963c52a73b8af8025}\label{classscheduling__service_1_1scheduling__worker_ae8e70252fc78b11963c52a73b8af8025}} 
\index{scheduling\_service::scheduling\_worker@{scheduling\_service::scheduling\_worker}!schedule\_vehicles@{schedule\_vehicles}}
\index{schedule\_vehicles@{schedule\_vehicles}!scheduling\_service::scheduling\_worker@{scheduling\_service::scheduling\_worker}}
\doxysubsubsection{\texorpdfstring{schedule\_vehicles()}{schedule\_vehicles()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule}} $>$ scheduling\+\_\+service\+::scheduling\+\_\+worker\+::schedule\+\_\+vehicles (\begin{DoxyParamCaption}\item[{std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$}]{veh\+\_\+map,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler}{streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler}} $>$}]{scheduler }\end{DoxyParamCaption}) const}



Runs the scheduler\textquotesingle{}s schedule\+\_\+veh method to schedule all vehicles. 


\begin{DoxyParams}{Parameters}
{\em veh\+\_\+list} & The vehicle list object. \\
\hline
{\em scheduler} & The scheduler object. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An intersection schedule object that contains vehicles\textquotesingle{} estimated critical time points. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{scheduling__worker_8cpp_source_l00007}{7}} of file \mbox{\hyperlink{scheduling__worker_8cpp_source}{scheduling\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00008     \{}
\DoxyCodeLine{00009 }
\DoxyCodeLine{00010         std::shared\_ptr<streets\_vehicle\_scheduler::intersection\_schedule> int\_schedule;}
\DoxyCodeLine{00011         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}}).compare(\textcolor{stringliteral}{"{}stop\_controlled\_intersection"{}}) == 0 ) \{}
\DoxyCodeLine{00012             int\_schedule = std::make\_shared<streets\_vehicle\_scheduler::all\_stop\_intersection\_schedule>();}
\DoxyCodeLine{00013         \}}
\DoxyCodeLine{00014         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}}).compare(\textcolor{stringliteral}{"{}signalized\_intersection"{}}) == 0 ) \{}
\DoxyCodeLine{00015             int\_schedule = std::make\_shared<streets\_vehicle\_scheduler::signalized\_intersection\_schedule>();}
\DoxyCodeLine{00016         \}}
\DoxyCodeLine{00017         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00018             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failed scheduling vehicles. Scheduling Service does not support intersection\_type : \{0\}!"{}}, \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}}));}
\DoxyCodeLine{00019         \}}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021         int\_schedule-\/>timestamp = std::chrono::duration\_cast<std::chrono::milliseconds>(std::chrono::system\_clock::now().time\_since\_epoch()).count();}
\DoxyCodeLine{00022         scheduler-\/>schedule\_vehicles(veh\_map, int\_schedule);}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a48f38b0b6ecb3043cc051b624f12824b}{streets\_service::streets\_configuration::get\_boolean\_config}}(\textcolor{stringliteral}{"{}enable\_schedule\_logging"{}}) ) \{}
\DoxyCodeLine{00025             \textcolor{keyword}{auto} \mbox{\hyperlink{namespacezephyr_1_1doxyrunner_a3b3f9cff00699ea6c32f73702fc7e861}{logger}} = spdlog::get(\textcolor{stringliteral}{"{}csv\_logger"{}});}
\DoxyCodeLine{00026             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{namespacezephyr_1_1doxyrunner_a3b3f9cff00699ea6c32f73702fc7e861}{logger}} != \textcolor{keyword}{nullptr} )\{}
\DoxyCodeLine{00027                 \mbox{\hyperlink{namespacezephyr_1_1doxyrunner_a3b3f9cff00699ea6c32f73702fc7e861}{logger}}-\/>info( int\_schedule-\/>toCSV());}
\DoxyCodeLine{00028             \}}
\DoxyCodeLine{00029         \}}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031         \textcolor{keywordflow}{return} int\_schedule;}
\DoxyCodeLine{00032     \}}

\end{DoxyCode}


References \mbox{\hyperlink{streets__configuration_8cpp_source_l00149}{streets\+\_\+service\+::streets\+\_\+configuration\+::get\+\_\+boolean\+\_\+config()}}, \mbox{\hyperlink{streets__configuration_8cpp_source_l00103}{streets\+\_\+service\+::streets\+\_\+configuration\+::get\+\_\+string\+\_\+config()}}, and \mbox{\hyperlink{doxyrunner_8py_source_l00062}{zephyr.\+doxyrunner\+::logger}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classscheduling__service_1_1scheduling__worker_ae8e70252fc78b11963c52a73b8af8025_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
scheduling\+\_\+service/include/\mbox{\hyperlink{scheduling__worker_8h}{scheduling\+\_\+worker.\+h}}\item 
scheduling\+\_\+service/src/\mbox{\hyperlink{scheduling__worker_8cpp}{scheduling\+\_\+worker.\+cpp}}\end{DoxyCompactItemize}
