\hypertarget{scheduling__service_8cpp_source}{}\doxysection{scheduling\+\_\+service.\+cpp}
\label{scheduling__service_8cpp_source}\index{scheduling\_service/src/scheduling\_service.cpp@{scheduling\_service/src/scheduling\_service.cpp}}
\mbox{\hyperlink{scheduling__service_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{scheduling__service_8h}{scheduling\_service.h}}"{}}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacescheduling__service}{scheduling\_service}}\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00005}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a29432e862ffe2f710ed92bd1a7ea66dd}{00005}}     \textcolor{keywordtype}{bool} scheduling\_service::initialize(\textcolor{keyword}{const} \textcolor{keywordtype}{int} sleep\_millisecs, \textcolor{keyword}{const} \textcolor{keywordtype}{int} int\_client\_request\_attempts)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00006}00006     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00007}00007         \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00008}00008         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00009}00009             \textcolor{keyword}{auto} client = std::make\_shared<kafka\_clients::kafka\_client>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00010}00010             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00011}00011             \textcolor{keyword}{this} -\/> bootstrap\_server = \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}bootstrap\_server"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00012}00012             \textcolor{keyword}{this} -\/> group\_id = \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}group\_id"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00013}00013             \textcolor{keyword}{this} -\/> consumer\_topic = \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}consumer\_topic"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00014}00014             \textcolor{keyword}{this} -\/> producer\_topic = \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}producer\_topic"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00016}00016             consumer\_worker = client-\/>create\_consumer(bootstrap\_server, consumer\_topic, group\_id);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00017}00017             producer\_worker  = client-\/>create\_producer(bootstrap\_server, producer\_topic);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00019}00019             \textcolor{keywordflow}{if}(!consumer\_worker-\/>init())}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00020}00020             \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00021}00021                 SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}kafka consumer initialize error"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00022}00022                 exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00023}00023                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00024}00024             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00025}00025             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00026}00026             \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00027}00027                 consumer\_worker-\/>subscribe();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00028}00028                 \textcolor{keywordflow}{if}(!consumer\_worker-\/>is\_running())}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00029}00029                 \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00030}00030                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}consumer\_worker is not running"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00031}00031                     exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00032}00032                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00033}00033                 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00034}00034             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00036}00036             \textcolor{comment}{// Create logger}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00037}00037             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a48f38b0b6ecb3043cc051b624f12824b}{streets\_service::streets\_configuration::get\_boolean\_config}}(\textcolor{stringliteral}{"{}enable\_schedule\_logging"{}}) ) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00038}00038                 configure\_csv\_logger();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00039}00039             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00040}00040             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00041}00041             \textcolor{keywordflow}{if}(!producer\_worker-\/>init())}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00042}00042             \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00043}00043                 SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}kafka producer initialize error"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00044}00044                 exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00045}00045                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00046}00046             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00047}00047             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00048}00048             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}}).compare(\textcolor{stringliteral}{"{}signalized\_intersection"{}}) == 0 ) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00049}00049                 \textcolor{keyword}{this} -\/> spat\_topic = \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}spat\_topic"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00050}00050                 spat\_consumer\_worker = client-\/>create\_consumer(bootstrap\_server, spat\_topic, group\_id);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00051}00051                 \textcolor{keywordflow}{if}(!spat\_consumer\_worker-\/>init())}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00052}00052                 \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00053}00053                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}kafka consumer initialize error"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00054}00054                     exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00055}00055                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00056}00056                 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00057}00057                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00058}00058                 \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00059}00059                     spat\_consumer\_worker-\/>subscribe();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00060}00060                     \textcolor{keywordflow}{if}(!spat\_consumer\_worker-\/>is\_running())}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00061}00061                     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00062}00062                         SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}spat\_consumer\_worker is not running"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00063}00063                         exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00064}00064                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00065}00065                     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00066}00066                 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00067}00067             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00069}00069             config\_vehicle\_list();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00071}00071             \textcolor{comment}{// HTTP request to update intersection information}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00072}00072             \textcolor{keyword}{auto} int\_client = std::make\_shared<intersection\_client>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00073}00073             \textcolor{keywordflow}{if} (int\_client-\/>update\_intersection\_info(sleep\_millisecs, int\_client\_request\_attempts))}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00074}00074             \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00075}00075                 config\_scheduler(int\_client-\/>get\_intersection\_info());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00076}00076             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00077}00077             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00078}00078             \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00079}00079                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00080}00080             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00082}00082             \_scheduling\_worker = std::make\_shared<scheduling\_worker>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00084}00084             SPDLOG\_INFO(\textcolor{stringliteral}{"{}scheduling service initialized successfully!!!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00085}00085             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00086}00086         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00087}00087         \textcolor{keywordflow}{catch} ( \textcolor{keyword}{const} \mbox{\hyperlink{classstreets__service_1_1streets__configuration__exception}{streets\_service::streets\_configuration\_exception}} \&ex ) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00088}00088             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}scheduling service Initialization failure: \{0\} "{}}, ex.what());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00089}00089             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00090}00090         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00091}00091     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00092}00092 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00094}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_af7adc4a45f194a6aace56a3eafed61fa}{00094}}     \textcolor{keywordtype}{void} scheduling\_service::start()}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00095}00095     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00096}00096         std::thread consumer\_thread(\&scheduling\_service::consume\_msg, \textcolor{keyword}{this} );}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00097}00097         std::thread scheduling\_thread(\&scheduling\_service::schedule\_veh, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00098}00098         }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00099}00099         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}}).compare(\textcolor{stringliteral}{"{}signalized\_intersection"{}}) == 0 ) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00100}00100             std::thread spat\_consumer\_thread(\&scheduling\_service::consume\_spat, \textcolor{keyword}{this} );}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00101}00101             spat\_consumer\_thread.join();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00102}00102         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00104}00104         consumer\_thread.join();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00105}00105         scheduling\_thread.join();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00106}00106     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00109}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_aa901f39ddb922a8d02955220a40d92c7}{00109}}     \textcolor{keywordtype}{bool} scheduling\_service::config\_vehicle\_list()}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00110}00110     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00111}00111         vehicle\_list\_ptr = std::make\_shared<streets\_vehicles::vehicle\_list>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00112}00112         std::string intersection\_type =  \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00113}00113         \textcolor{keywordflow}{if} ( intersection\_type.compare(\textcolor{stringliteral}{"{}stop\_controlled\_intersection"{}}) == 0) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00114}00114             vehicle\_list\_ptr-\/>set\_processor(std::make\_shared<streets\_vehicles::all\_stop\_status\_intent\_processor>());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00115}00115             \textcolor{keyword}{auto} processor = std::dynamic\_pointer\_cast<streets\_vehicles::all\_stop\_status\_intent\_processor>(vehicle\_list\_ptr-\/>get\_processor());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00116}00116             processor-\/>set\_stopping\_distance(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ae1ce5cdd4b4d28cc8e4034c429aabb66}{streets\_service::streets\_configuration::get\_double\_config}}(\textcolor{stringliteral}{"{}stop\_distance"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00117}00117             processor-\/>set\_stopping\_speed(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ae1ce5cdd4b4d28cc8e4034c429aabb66}{streets\_service::streets\_configuration::get\_double\_config}}(\textcolor{stringliteral}{"{}stop\_speed"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00118}00118             processor-\/>set\_timeout(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ab33a5d183c0ca2b2f0d757f5466f200b}{streets\_service::streets\_configuration::get\_int\_config}}(\textcolor{stringliteral}{"{}exp\_delta"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00119}00119             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00120}00120             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}The processor of the vehicle list object is set to all\_stop\_status\_intent\_processor successfully! "{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00121}00121             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00122}00122         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00123}00123         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (intersection\_type.compare(\textcolor{stringliteral}{"{}signalized\_intersection"{}}) == 0) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00124}00124             vehicle\_list\_ptr-\/>set\_processor(std::make\_shared<streets\_vehicles::signalized\_status\_intent\_processor>());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00125}00125             std::dynamic\_pointer\_cast<streets\_vehicles::signalized\_status\_intent\_processor>(vehicle\_list\_ptr-\/>get\_processor())-\/>set\_timeout(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ab33a5d183c0ca2b2f0d757f5466f200b}{streets\_service::streets\_configuration::get\_int\_config}}(\textcolor{stringliteral}{"{}exp\_delta"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00127}00127             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}The processor of the vehicle list object is set to signalized\_status\_intent\_processor successfully!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00128}00128             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00130}00130         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00131}00131             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failed configuring Vehicle List. Scheduling Service does not support intersection\_type : \{0\}!"{}}, intersection\_type);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00132}00132             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00133}00133         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00134}00134         }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00135}00135     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00138}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a13bb653277956326ecc5b11cf7342460}{00138}}     \textcolor{keywordtype}{bool} scheduling\_service::config\_scheduler(std::shared\_ptr<OpenAPI::OAIIntersection\_info> intersection\_info\_ptr) }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00139}00139     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00140}00140         std::string intersection\_type =  \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}intersection\_type"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00141}00141         \textcolor{keywordflow}{if} ( intersection\_type.compare(\textcolor{stringliteral}{"{}stop\_controlled\_intersection"{}}) == 0) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00142}00142             scheduler\_ptr = std::make\_shared<streets\_vehicle\_scheduler::all\_stop\_vehicle\_scheduler>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00143}00143             scheduler\_ptr-\/>set\_intersection\_info(intersection\_info\_ptr);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00144}00144             std::dynamic\_pointer\_cast<streets\_vehicle\_scheduler::all\_stop\_vehicle\_scheduler>(scheduler\_ptr)-\/>set\_flexibility\_limit(}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00145}00145                     \mbox{\hyperlink{classstreets__service_1_1streets__configuration_ab33a5d183c0ca2b2f0d757f5466f200b}{streets\_service::streets\_configuration::get\_int\_config}}(\textcolor{stringliteral}{"{}flexibility\_limit"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00146}00146             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00147}00147             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}All\_stop scheduler is configured successfully! "{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00148}00148             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00149}00149         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00150}00150         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( intersection\_type.compare(\textcolor{stringliteral}{"{}signalized\_intersection"{}}) == 0 ) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00151}00151             scheduler\_ptr = std::make\_shared<streets\_vehicle\_scheduler::signalized\_vehicle\_scheduler>();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00152}00152             scheduler\_ptr-\/>set\_intersection\_info(intersection\_info\_ptr);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00153}00153             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00154}00154             \textcolor{keyword}{auto} processor = std::dynamic\_pointer\_cast<streets\_vehicle\_scheduler::signalized\_vehicle\_scheduler>(scheduler\_ptr);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00155}00155             processor-\/>set\_initial\_green\_buffer(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ab33a5d183c0ca2b2f0d757f5466f200b}{streets\_service::streets\_configuration::get\_int\_config}}(\textcolor{stringliteral}{"{}initial\_green\_buffer"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00156}00156             processor-\/>set\_final\_green\_buffer(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ab33a5d183c0ca2b2f0d757f5466f200b}{streets\_service::streets\_configuration::get\_int\_config}}(\textcolor{stringliteral}{"{}final\_green\_buffer"{}}));}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00157}00157             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00158}00158             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Signalized scheduler is configured successfully! "{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00159}00159             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00160}00160         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00161}00161         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00162}00162             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failed configuring Vehicle Scheduler. Scheduling Service does not support intersection\_type : \{0\}!"{}}, intersection\_type);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00163}00163             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00164}00164         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00166}00166     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00167}00167 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00168}00168 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00169}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a601d2d457c04f9062773a07ce8947cff}{00169}}     \textcolor{keywordtype}{void} scheduling\_service::consume\_msg()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00170}00170 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00171}00171         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Starting status and intent consumer thread."{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00172}00172         \textcolor{keywordflow}{while} (consumer\_worker-\/>is\_running()) }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00173}00173         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00174}00174             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00175}00175             \textcolor{keyword}{const} std::string payload = consumer\_worker-\/>consume(1000);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00176}00176 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00177}00177             \textcolor{keywordflow}{if}(payload.length() != 0 \&\& vehicle\_list\_ptr)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00178}00178             \{                }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00179}00179 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00180}00180                 vehicle\_list\_ptr-\/>process\_update(payload);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00181}00181     }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00182}00182             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00183}00183         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00184}00184         SPDLOG\_WARN(\textcolor{stringliteral}{"{}Stopping status and intent consumer thread!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00185}00185         consumer\_worker-\/>stop();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00186}00186     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00187}00187 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00189}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_abfdd27a14878588ed8e01c84b1152357}{00189}}     \textcolor{keywordtype}{void} scheduling\_service::consume\_spat()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00190}00190 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00191}00191         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Starting spat consumer thread."{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00192}00192         \textcolor{keywordflow}{while} (spat\_consumer\_worker-\/>is\_running()) }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00193}00193         \{  }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00194}00194             \textcolor{keyword}{const} std::string spat\_msg = spat\_consumer\_worker-\/>consume(1000);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00195}00195             \textcolor{keywordflow}{if}(spat\_msg.length() != 0 \&\& spat\_ptr)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00196}00196             \{                }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00197}00197                 \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00198}00198                     spat\_ptr-\/>fromJson(spat\_msg);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00199}00199                 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00200}00200                 \textcolor{keywordflow}{catch}(\textcolor{keyword}{const} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing::signal\_phase\_and\_timing\_exception}} \&ex) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00201}00201                     SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failure in reading the spat message : \{0\}"{}}, ex.what());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00202}00202                 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00203}00203                     }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00204}00204             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00205}00205         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00206}00206         SPDLOG\_WARN(\textcolor{stringliteral}{"{}Stopping spat consumer thread!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00207}00207         spat\_consumer\_worker-\/>stop();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00208}00208     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00210}00210 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00211}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a7bdd65e11e2bd2c3d4029e2f7510f2d9}{00211}}     \textcolor{keywordtype}{void} scheduling\_service::schedule\_veh()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00212}00212 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00213}00213         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Starting scheduling thread."{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00214}00214         \textcolor{keywordflow}{if} (!\_scheduling\_worker)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00215}00215         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00216}00216             SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}scheduling worker is not initialized"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00217}00217             exit(EXIT\_FAILURE);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00218}00218         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00219}00219         }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00220}00220         \textcolor{keyword}{auto} scheduling\_delta = u\_int64\_t(\mbox{\hyperlink{classstreets__service_1_1streets__configuration_ae1ce5cdd4b4d28cc8e4034c429aabb66}{streets\_service::streets\_configuration::get\_double\_config}}(\textcolor{stringliteral}{"{}scheduling\_delta"{}}) * 1000);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00221}00221         \textcolor{keywordtype}{int} sch\_count = 0;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00222}00222         std::unordered\_map<std::string, streets\_vehicles::vehicle> veh\_map;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00223}00223 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00224}00224         \textcolor{keywordflow}{while} (\textcolor{keyword}{true})}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00225}00225         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00226}00226             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00227}00227             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}schedule number \#\{0\}"{}}, sch\_count);      }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00228}00228             \textcolor{keyword}{auto} next\_schedule\_time\_epoch = std::chrono::system\_clock::now() + std::chrono::milliseconds(scheduling\_delta);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00229}00229 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00230}00230             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00231}00231             veh\_map = vehicle\_list\_ptr -\/> get\_vehicles();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00232}00232             \textcolor{keyword}{auto} int\_schedule = \_scheduling\_worker-\/>schedule\_vehicles(veh\_map, scheduler\_ptr);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00233}00233 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00234}00234             std::string msg\_to\_send = int\_schedule-\/>toJson();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00235}00235 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00236}00236             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}schedule plan: \{0\}"{}}, msg\_to\_send);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00237}00237 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00238}00238             \textcolor{comment}{/* produce the scheduling plan to kafka */}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00239}00239             producer\_worker-\/>send(msg\_to\_send);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00241}00241             sch\_count += 1;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00243}00243             \textcolor{comment}{// sleep until next schedule}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00244}00244             \textcolor{keywordflow}{if} (std::chrono::system\_clock::now() < next\_schedule\_time\_epoch)\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00245}00245                 std::this\_thread::sleep\_until(next\_schedule\_time\_epoch);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00246}00246             \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00247}00247             }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00248}00248         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00249}00249         SPDLOG\_WARN(\textcolor{stringliteral}{"{}Stopping scheduling thread!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00250}00250         producer\_worker-\/>stop();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00251}00251 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00252}00252     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00253}00253 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00254}00254  }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00255}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_aedb80eb05613731a0d0192e5e3823121}{00255}}     \textcolor{keywordtype}{void} scheduling\_service::configure\_csv\_logger()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00256}00256 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00257}00257         \textcolor{keywordflow}{try}\{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00258}00258             \textcolor{keyword}{auto} csv\_logger = spdlog::daily\_logger\_mt<spdlog::async\_factory>(}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00259}00259                 \textcolor{stringliteral}{"{}csv\_logger"{}},  \textcolor{comment}{// logger name}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00260}00260                 \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}schedule\_log\_path"{}})+}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00261}00261                     \mbox{\hyperlink{classstreets__service_1_1streets__configuration_a03603871626201e07690effb9f2440bf}{streets\_service::streets\_configuration::get\_string\_config}}(\textcolor{stringliteral}{"{}schedule\_log\_filename"{}}) +\textcolor{stringliteral}{"{}.csv"{}},  \textcolor{comment}{// log file name and path}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00262}00262                 23, \textcolor{comment}{// hours to rotate}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00263}00263                 59 \textcolor{comment}{// minutes to rotate}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00264}00264                 );}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00265}00265             \textcolor{comment}{// Only log log statement content}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00266}00266             csv\_logger-\/>set\_pattern(\textcolor{stringliteral}{"{}\%v"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00267}00267             csv\_logger-\/>set\_level(spdlog::level::info);}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00268}00268         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00269}00269         \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} spdlog::spdlog\_ex\& ex)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00270}00270         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00271}00271             spdlog::error( \textcolor{stringliteral}{"{}Log initialization failed: \{0\}!"{}},ex.what());}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00272}00272         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00273}00273     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00274}00274 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00275}00275 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00276}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_aef21bc1adf0a4ce5e240bfdb122325e8}{00276}}     scheduling\_service::\string~scheduling\_service()}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00277}00277     \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00278}00278         \textcolor{keywordflow}{if} (consumer\_worker)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00279}00279         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00280}00280             SPDLOG\_WARN(\textcolor{stringliteral}{"{}Stopping consumer worker!"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00281}00281             consumer\_worker-\/>stop();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00282}00282         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00283}00283 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00284}00284         \textcolor{keywordflow}{if} (producer\_worker)}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00285}00285         \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00286}00286             SPDLOG\_WARN(\textcolor{stringliteral}{"{}Stopping producer worker"{}});}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00287}00287             producer\_worker-\/>stop();}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00288}00288         \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00289}00289 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00290}00290     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00291}00291 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00292}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a8a86cc97c1202f0ec041e659a005177a}{00292}}     \textcolor{keywordtype}{void} scheduling\_service::set\_scheduling\_worker(std::shared\_ptr<scheduling\_worker> sched\_worker) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00293}00293         \_scheduling\_worker = sched\_worker;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00294}00294     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00296}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_ab935f5e89218b93f02ed4ba648c45349}{00296}}     \textcolor{keywordtype}{void} scheduling\_service::set\_vehicle\_list(std::shared\_ptr<streets\_vehicles::vehicle\_list> veh\_list) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00297}00297         vehicle\_list\_ptr = veh\_list;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00298}00298     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00299}00299 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00300}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a0acbcea3c17432026aa4d871e63bdf92}{00300}}     \textcolor{keywordtype}{void} scheduling\_service::set\_vehicle\_scheduler(std::shared\_ptr<streets\_vehicle\_scheduler::vehicle\_scheduler> scheduler) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00301}00301         scheduler\_ptr = scheduler;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00302}00302     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00303}00303 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00304}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_ad1cee628ef1dba0a569236aff1113d2a}{00304}}     \textcolor{keywordtype}{void} scheduling\_service::set\_consumer\_worker(std::shared\_ptr<kafka\_clients::kafka\_consumer\_worker> worker) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00305}00305         consumer\_worker = worker;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00306}00306     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00307}00307 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00308}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a7110ab08ca6178e99bfe0d34c5b6d1a2}{00308}}     \textcolor{keywordtype}{void} scheduling\_service::set\_producer\_worker(std::shared\_ptr<kafka\_clients::kafka\_producer\_worker> worker) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00309}00309         producer\_worker = worker;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00310}00310     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00311}00311 }
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00312}\mbox{\hyperlink{classscheduling__service_1_1scheduling__service_a7f6b6ec887b1ebf100ad7b8eec4a890d}{00312}}     \textcolor{keywordtype}{void} scheduling\_service::set\_spat\_consumer\_worker(std::shared\_ptr<kafka\_clients::kafka\_consumer\_worker> worker) \{}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00313}00313         spat\_consumer\_worker = worker;}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00314}00314     \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00315}00315 \}}
\DoxyCodeLine{\Hypertarget{scheduling__service_8cpp_source_l00316}00316 }

\end{DoxyCode}
