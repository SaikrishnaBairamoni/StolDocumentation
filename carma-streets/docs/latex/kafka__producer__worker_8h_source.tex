\hypertarget{kafka__producer__worker_8h_source}{}\doxysection{kafka\+\_\+producer\+\_\+worker.\+h}
\label{kafka__producer__worker_8h_source}\index{kafka\_clients/include/kafka\_producer\_worker.h@{kafka\_clients/include/kafka\_producer\_worker.h}}
\mbox{\hyperlink{kafka__producer__worker_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00001}00001 \textcolor{preprocessor}{\#ifndef KAFKA\_PRODUCER\_WORKER\_H}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00002}00002 \textcolor{preprocessor}{\#define KAFKA\_PRODUCER\_WORKER\_H}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00004}00004 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00005}00005 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00006}00006 \textcolor{preprocessor}{\#include <cstdlib>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00007}00007 \textcolor{preprocessor}{\#include <cstdio>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00008}00008 \textcolor{preprocessor}{\#include <csignal>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00009}00009 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00010}00010 \textcolor{preprocessor}{\#if \_AIX}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00011}00011 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00012}00012 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00014}00014 \textcolor{preprocessor}{\#include <librdkafka/rdkafkacpp.h>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00015}00015 \textcolor{preprocessor}{\#include <spdlog/spdlog.h>}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00018}00018 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacekafka__clients}{kafka\_clients}}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00019}00019 \{  }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00020}\mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb}{00020}}     \textcolor{keyword}{class }\mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb}{producer\_delivery\_report\_cb}} : \textcolor{keyword}{public} RdKafka::DeliveryReportCb}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00021}00021     \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00022}00022         \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00023}\mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a29716820a615fb1b958139de7fb69c43}{00023}}             \mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a29716820a615fb1b958139de7fb69c43}{producer\_delivery\_report\_cb}}()\{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00025}00025             \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00026}\mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a0a53cd23e962ba2825e27f2252cf7ce0}{00026}}             \mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a0a53cd23e962ba2825e27f2252cf7ce0}{\string~producer\_delivery\_report\_cb}}()\{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00028}00028             \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00029}\mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a8de5c702a3c32ce270e48f35d1580e1a}{00029}}             \textcolor{keywordtype}{void} \mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb_a8de5c702a3c32ce270e48f35d1580e1a}{dr\_cb}} (RdKafka::Message \&message)}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00030}00030             \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00031}00031                 SPDLOG\_INFO(\textcolor{stringliteral}{"{}Message dellivery for:  \{0\} bytes [ \{1\} ]"{}},message.len(), message.errstr().c\_str());}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00032}00032                 \textcolor{keywordflow}{if}(message.key())                 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00033}00033                     SPDLOG\_INFO(\textcolor{stringliteral}{"{} Key:  \{:>8\}"{}},(\textcolor{keywordtype}{char}*)(message.key()));}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00034}00034             \}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00035}00035     \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00036}\mbox{\hyperlink{classkafka__clients_1_1producer__event__cb}{00036}}     \textcolor{keyword}{class }\mbox{\hyperlink{classkafka__clients_1_1producer__event__cb}{producer\_event\_cb}}:\textcolor{keyword}{public} RdKafka::EventCb}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00037}00037     \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00038}00038         \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00039}\mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_a9a47b00becdb4869d1c4c11cd944158e}{00039}}             \mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_a9a47b00becdb4869d1c4c11cd944158e}{producer\_event\_cb}}()\{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00041}00041             \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00042}\mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_aac7cc8056773d2dd991c89bb7e401d5b}{00042}}             \mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_aac7cc8056773d2dd991c89bb7e401d5b}{\string~producer\_event\_cb}}()\{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00043}00043                 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00044}00044             \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00045}\mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_af5f5fccf06ef48c54c557ddac68d009b}{00045}}             \textcolor{keywordtype}{void} \mbox{\hyperlink{classkafka__clients_1_1producer__event__cb_af5f5fccf06ef48c54c557ddac68d009b}{event\_cb}} (RdKafka::Event \&event) }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00046}00046             \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00047}00047                 \textcolor{keywordflow}{switch} (event.type())}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00048}00048                 \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00049}00049                 \textcolor{keywordflow}{case} RdKafka::Event::EVENT\_ERROR:                 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00050}00050                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}ERROR:  \{0\}  \{1\}"{}}, RdKafka::err2str(event.err()) ,event.str() );}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00051}00051                     \textcolor{keywordflow}{if} (event.err() == RdKafka::ERR\_\_ALL\_BROKERS\_DOWN)}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00052}00052                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00053}00053                 \textcolor{keywordflow}{case} RdKafka::Event::EVENT\_STATS:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00054}00054                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}STATS: \{0\}  \{1\}"{}}, RdKafka::err2str(event.err()) ,event.str() );}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00055}00055                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00056}00056                 \textcolor{keywordflow}{case} RdKafka::Event::EVENT\_LOG:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00057}00057                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}LOG:  \{0\}  \{1\}"{}}, RdKafka::err2str(event.err()) ,event.str() );}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00058}00058                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00059}00059                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00060}00060                     SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}EVENT:  \{0\}  \{1\}"{}}, RdKafka::err2str(event.err()) ,event.str() );}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00061}00061                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00062}00062                 \}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00063}00063             \}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00064}00064     \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00066}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker}{00066}}     \textcolor{keyword}{class }\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker}{kafka\_producer\_worker}}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00067}00067     \{}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00068}00068         \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00069}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a0e130dd02a30f05539120cb5ba477510}{00069}}             \textcolor{keyword}{const} std::string \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a0e130dd02a30f05539120cb5ba477510}{BOOTSTRAP\_SERVER}}=\textcolor{stringliteral}{"{}bootstrap.servers"{}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00070}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a15f3f181dd5c04c64d04bb6473ae2cac}{00070}}             \textcolor{keyword}{const} std::string \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a15f3f181dd5c04c64d04bb6473ae2cac}{DR\_CB}}=\textcolor{stringliteral}{"{}dr\_cb"{}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00071}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a12fac0bb7e9d9fe2425ff506948c51ea}{00071}}             \textcolor{keyword}{const} std::string \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a12fac0bb7e9d9fe2425ff506948c51ea}{EVENT\_CB}}=\textcolor{stringliteral}{"{}event\_cb"{}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00073}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_ad24185bcbdf6f674d7b1e81eb6aee89e}{00073}}             RdKafka::Producer *\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_ad24185bcbdf6f674d7b1e81eb6aee89e}{\_producer}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00074}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a65e51a375deafee6c444020c57037084}{00074}}             RdKafka::Topic *\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a65e51a375deafee6c444020c57037084}{\_topic}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00075}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a0b385423f1b004ef8dd4cb1a276cb6b2}{00075}}             std::string \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a0b385423f1b004ef8dd4cb1a276cb6b2}{\_topics\_str}} = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00076}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a38bf3fabc40b1db6b4850b335cf6fe4b}{00076}}             std::string \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a38bf3fabc40b1db6b4850b335cf6fe4b}{\_broker\_str}} = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00077}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a90d01ae6c611aac0ecd18eef5a74bf3b}{00077}}             \textcolor{keywordtype}{bool} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a90d01ae6c611aac0ecd18eef5a74bf3b}{\_run}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00078}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a5ca099fa0f72e3758455930bf7957905}{00078}}             \textcolor{keywordtype}{int} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a5ca099fa0f72e3758455930bf7957905}{\_partition}} = 0;}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00079}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aa172375ad141af4a27bdb852a7492026}{00079}}             \mbox{\hyperlink{classkafka__clients_1_1producer__delivery__report__cb}{producer\_delivery\_report\_cb}} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aa172375ad141af4a27bdb852a7492026}{\_producer\_delivery\_report\_cb}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00080}\mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aa71379a7f3bec4a50216eefdd03c640e}{00080}}             \mbox{\hyperlink{classkafka__clients_1_1producer__event__cb}{producer\_event\_cb}} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aa71379a7f3bec4a50216eefdd03c640e}{\_producer\_event\_cb}};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00082}00082         \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00083}00083             \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_abff1d3ab487e6533ed0a505d861c96d5}{kafka\_producer\_worker}}(\textcolor{keyword}{const} std::string \&brokers, \textcolor{keyword}{const} std::string \&topics, \textcolor{keywordtype}{int} n\_partition = 0);}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00084}00084             \textcolor{keywordtype}{bool} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a0bc4fc9719a218b561789c217aa8ff80}{init}}();}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00085}00085             \textcolor{keywordtype}{void} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_a5df1a42e8557ac55bb60b71fd007dec0}{send}}(\textcolor{keyword}{const} std::string \&msg);}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00086}00086             \textcolor{keywordtype}{void} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aa980d0bb119c78f73ea9bc1ac3abdd1a}{stop}}();}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00087}00087             \textcolor{keywordtype}{void} \mbox{\hyperlink{classkafka__clients_1_1kafka__producer__worker_aaa1ce1c199b4fd69c59dd715294aabb4}{printCurrConf}}();}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00088}00088         \};}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00089}00089 \}}
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{kafka__producer__worker_8h_source_l00091}00091 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
