\hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation}{}\doxysection{message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation Class Reference}
\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation}\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}


{\ttfamily \#include $<$message\+\_\+lanelet2\+\_\+translation.\+h$>$}



Collaboration diagram for message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af16291021737d698c1205310c27a36f0}{message\+\_\+lanelet2\+\_\+translation}} ()
\item 
\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_abdd27ffa11966b8344b13713c524fa7c}{message\+\_\+lanelet2\+\_\+translation}} (std\+::string filename)
\item 
\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af45f00b59e5247aecb6bc17f2eb64dc3}{$\sim$message\+\_\+lanelet2\+\_\+translation}} ()
\item 
bool \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a6aa017f9885603dc1d36c7ae1af0724e}{read\+\_\+lanelet2\+\_\+map}} (std\+::string filename)
\begin{DoxyCompactList}\small\item\em Read lanelet2 map. \end{DoxyCompactList}\item 
lanelet\+::\+Lanelet \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a24e2be3abe3cbe33ff04b9101e615378}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+loc\+\_\+and\+\_\+direction}} (double lat, double lon, double elev, std\+::string turn\+\_\+direction, \mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&trajectory) const
\item 
lanelet\+::\+Lanelet \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+point\+\_\+and\+\_\+direction}} (lanelet\+::\+Basic\+Point3d subj\+\_\+point3d, std\+::string turn\+\_\+direction, \mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&trajectory) const
\item 
std\+::vector$<$ lanelet\+::\+Lanelet $>$ \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a171bf6b007d7aefae8b1e1254e2c58ab}{get\+\_\+cur\+\_\+lanelets\+\_\+by\+\_\+point}} (lanelet\+::\+Basic\+Point3d subj\+\_\+point3d) const
\item 
double \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e}{distance2\+\_\+cur\+\_\+lanelet\+\_\+end}} (double lat, double lon, double elev, lanelet\+::\+Lanelet subj\+\_\+lanelet, std\+::string turn\+\_\+direction, \mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&trajectory) const
\item 
double \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af87ee952849044c5175b1b257386271b}{distance2\+\_\+cur\+\_\+lanelet\+\_\+end}} (lanelet\+::\+Basic\+Point3d point, lanelet\+::\+Lanelet subj\+\_\+lanelet, std\+::string turn\+\_\+direction, \mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&trajectory) const
\item 
bool \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a876c6e1cd0fff32b90f2d3dff5a8f5a8}{update\+\_\+vehicle\+\_\+routing\+\_\+graph}} ()
\begin{DoxyCompactList}\small\item\em Initialize vehicle routing graph. \end{DoxyCompactList}\item 
std\+::map$<$ int64\+\_\+t, \mbox{\hyperlink{namespacemessage__services_1_1models_adadf916283b2bc01c875dce103fadcae}{models\+::intersection\+\_\+lanelet\+\_\+type}} $>$ \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a4821d1fd75c245e9a29c80dd711f375f}{get\+\_\+lanelet\+\_\+types\+\_\+ids}} (lanelet\+::\+Lanelet subj\+\_\+lanelet, std\+::string turn\+\_\+direction) const
\item 
lanelet\+::\+Basic\+Point3d \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4}{ecef\+\_\+2\+\_\+map\+\_\+point}} (std\+::int32\+\_\+t ecef\+\_\+x, std\+::int32\+\_\+t ecef\+\_\+y, std\+::int32\+\_\+t ecef\+\_\+z) const
\begin{DoxyCompactList}\small\item\em Function to convert ecef location to a 2d point in map frame. \end{DoxyCompactList}\item 
lanelet\+::\+Basic\+Point3d \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8}{gps\+\_\+2\+\_\+map\+\_\+point}} (double lat, double lon, double elev) const
\begin{DoxyCompactList}\small\item\em Function to convert GPS location to a 3d point in map frame. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
lanelet\+::\+Lanelet\+Map\+Ptr \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}{map\+\_\+ptr}}
\item 
lanelet\+::projection\+::\+Local\+Frame\+Projector $\ast$ \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}{local\+\_\+projector}}
\item 
double \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a302db95fd79b288c4d0e50b16752a441}{lane\+Change\+Cost}} = 2.
\item 
double \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a0b2cbd61960ea2197e3e56b08a91232a}{participant\+Height}} = 2.
\item 
double \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aa51947e25636f012ee2fbee667ba3e3f}{min\+Lane\+Change\+Length}} = 0.
\item 
int \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a1fc68eea7e7f464ccb9c4f944afc3fce}{projector\+\_\+type}} = 0
\item 
const std\+::uint16\+\_\+t \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ab785a96dc83df9414f0b33200054d174}{\+\_\+maximum\+\_\+num\+\_\+lanelets\+\_\+per\+\_\+trajectory}} = 4
\item 
lanelet\+::routing\+::\+Routing\+Graph\+Ptr \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicle\+Graph\+\_\+ptr}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00056}{56}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af16291021737d698c1205310c27a36f0}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af16291021737d698c1205310c27a36f0}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!message\_lanelet2\_translation@{message\_lanelet2\_translation}}
\index{message\_lanelet2\_translation@{message\_lanelet2\_translation}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{message\_lanelet2\_translation()}{message\_lanelet2\_translation()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::message\+\_\+lanelet2\+\_\+translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00007}{7}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00007 \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_abdd27ffa11966b8344b13713c524fa7c}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_abdd27ffa11966b8344b13713c524fa7c}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!message\_lanelet2\_translation@{message\_lanelet2\_translation}}
\index{message\_lanelet2\_translation@{message\_lanelet2\_translation}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{message\_lanelet2\_translation()}{message\_lanelet2\_translation()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::message\+\_\+lanelet2\+\_\+translation (\begin{DoxyParamCaption}\item[{std\+::string}]{filename }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00009}{9}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00010         \{}
\DoxyCodeLine{00011             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a6aa017f9885603dc1d36c7ae1af0724e}{read\_lanelet2\_map}}(filename))}
\DoxyCodeLine{00012             \{}
\DoxyCodeLine{00013                 SPDLOG\_INFO(\textcolor{stringliteral}{"{}Map is initialied. "{}});}
\DoxyCodeLine{00014                 \textcolor{keywordflow}{if} (!this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}})}
\DoxyCodeLine{00015                 \{}
\DoxyCodeLine{00016                     SPDLOG\_INFO(\textcolor{stringliteral}{"{}Updating vehicle routing graph ... "{}});}
\DoxyCodeLine{00017                     \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a876c6e1cd0fff32b90f2d3dff5a8f5a8}{update\_vehicle\_routing\_graph}}())}
\DoxyCodeLine{00018                     \{}
\DoxyCodeLine{00019                         std::cout << \textcolor{stringliteral}{"{}Updated vehicle routing graph. "{}} << std::endl;}
\DoxyCodeLine{00020                         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Updated vehicle routing graph. "{}});}
\DoxyCodeLine{00021                     \}}
\DoxyCodeLine{00022                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00023                     \{}
\DoxyCodeLine{00024                         SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failed to update vehicle routing graph. "{}});}
\DoxyCodeLine{00025                         exit(-\/1);}
\DoxyCodeLine{00026                     \}}
\DoxyCodeLine{00027                 \}}
\DoxyCodeLine{00028             \}}
\DoxyCodeLine{00029             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00030             \{}
\DoxyCodeLine{00031                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Failed to initialzie map. "{}});}
\DoxyCodeLine{00032                 exit(-\/1);}
\DoxyCodeLine{00033             \}}
\DoxyCodeLine{00034             SPDLOG\_INFO(\textcolor{stringliteral}{"{}Finished initializing message\_lanelet2\_translation. "{}});}
\DoxyCodeLine{00035         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00039}{read\+\_\+lanelet2\+\_\+map()}}, \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}, and \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00070}{vehicle\+Graph\+\_\+ptr}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_abdd27ffa11966b8344b13713c524fa7c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af45f00b59e5247aecb6bc17f2eb64dc3}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af45f00b59e5247aecb6bc17f2eb64dc3}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!````~message\_lanelet2\_translation@{$\sim$message\_lanelet2\_translation}}
\index{````~message\_lanelet2\_translation@{$\sim$message\_lanelet2\_translation}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{$\sim$message\_lanelet2\_translation()}{~message\_lanelet2\_translation()}}
{\footnotesize\ttfamily message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::$\sim$message\+\_\+lanelet2\+\_\+translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00037}{37}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!distance2\_cur\_lanelet\_end@{distance2\_cur\_lanelet\_end}}
\index{distance2\_cur\_lanelet\_end@{distance2\_cur\_lanelet\_end}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{distance2\_cur\_lanelet\_end()}{distance2\_cur\_lanelet\_end()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily double message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::distance2\+\_\+cur\+\_\+lanelet\+\_\+end (\begin{DoxyParamCaption}\item[{double}]{lat,  }\item[{double}]{lon,  }\item[{double}]{elev,  }\item[{lanelet\+::\+Lanelet}]{subj\+\_\+lanelet,  }\item[{std\+::string}]{turn\+\_\+direction,  }\item[{\mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&}]{trajectory }\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00204}{204}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00205         \{   }
\DoxyCodeLine{00206             lanelet::BasicPoint3d subj\_point3d = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8}{gps\_2\_map\_point}}(lat, lon, elev);}
\DoxyCodeLine{00207             \textcolor{keywordflow}{return} \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e}{distance2\_cur\_lanelet\_end}}(subj\_point3d,subj\_lanelet, turn\_direction, trajectory);}
\DoxyCodeLine{00208         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00204}{distance2\+\_\+cur\+\_\+lanelet\+\_\+end()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00255}{gps\+\_\+2\+\_\+map\+\_\+point()}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00204}{distance2\+\_\+cur\+\_\+lanelet\+\_\+end()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a36279637c5cf92197ba62c4e16c7d39e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af87ee952849044c5175b1b257386271b}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af87ee952849044c5175b1b257386271b}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!distance2\_cur\_lanelet\_end@{distance2\_cur\_lanelet\_end}}
\index{distance2\_cur\_lanelet\_end@{distance2\_cur\_lanelet\_end}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{distance2\_cur\_lanelet\_end()}{distance2\_cur\_lanelet\_end()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily double message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::distance2\+\_\+cur\+\_\+lanelet\+\_\+end (\begin{DoxyParamCaption}\item[{lanelet\+::\+Basic\+Point3d}]{point,  }\item[{lanelet\+::\+Lanelet}]{subj\+\_\+lanelet,  }\item[{std\+::string}]{turn\+\_\+direction,  }\item[{\mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&}]{trajectory }\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00210}{210}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00211         \{}
\DoxyCodeLine{00212             \textcolor{keywordtype}{double} total\_length = 0.0;}
\DoxyCodeLine{00213             \textcolor{keywordtype}{double} p2p\_d = -\/1;}
\DoxyCodeLine{00214             \textcolor{keywordtype}{bool} start\_accumulate = \textcolor{keyword}{false};}
\DoxyCodeLine{00215             \textcolor{keywordflow}{if} (subj\_lanelet.id() == lanelet::InvalId)}
\DoxyCodeLine{00216             \{}
\DoxyCodeLine{00217                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Get invalid lanelet id = \{0\} from position: (\{1\}, \{2\} , \{3\}) and turn direction: \{4\}"{}}, subj\_point3d.x(), subj\_point3d.y(), subj\_point3d.z(), turn\_direction);}
\DoxyCodeLine{00218                 \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00219             \}}
\DoxyCodeLine{00220 }
\DoxyCodeLine{00221             \textcolor{keyword}{auto} sub\_lanelet\_centerline = subj\_lanelet.centerline2d();}
\DoxyCodeLine{00222             lanelet::ConstHybridLineString2d lsHybrid = lanelet::utils::toHybrid(sub\_lanelet\_centerline);}
\DoxyCodeLine{00223             lanelet::BasicPoint2d subj\_point2d = lanelet::utils::to2D(subj\_point3d);}
\DoxyCodeLine{00224 }
\DoxyCodeLine{00225             \textcolor{comment}{// Get the distance between the subject point to the centerline.}}
\DoxyCodeLine{00226             \textcolor{keyword}{auto} dP2Line2d = lanelet::geometry::distance(subj\_point2d, lsHybrid);}
\DoxyCodeLine{00227             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} = 0; \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} < sub\_lanelet\_centerline.numSegments(); \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}++)}
\DoxyCodeLine{00228             \{}
\DoxyCodeLine{00229                 \textcolor{comment}{// Project the subject point to a point on the centerline                }}
\DoxyCodeLine{00230                 \textcolor{keywordflow}{if}(!start\_accumulate)}
\DoxyCodeLine{00231                 \{}
\DoxyCodeLine{00232                     p2p\_d = lanelet::geometry::distance2d(subj\_point2d, sub\_lanelet\_centerline.segment(\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}).first);}
\DoxyCodeLine{00233                 \}}
\DoxyCodeLine{00234                 \textcolor{comment}{// Start from the closest point on the centerline to the subject point, and accumulate the closest point to the end of centerline}}
\DoxyCodeLine{00235                 \textcolor{keywordflow}{if} (p2p\_d != -\/1 \&\& p2p\_d <= (dP2Line2d + 0.2))}
\DoxyCodeLine{00236                 \{}
\DoxyCodeLine{00237                     start\_accumulate = \textcolor{keyword}{true};}
\DoxyCodeLine{00238                 \}}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240                 \textcolor{keywordflow}{if} (start\_accumulate)}
\DoxyCodeLine{00241                 \{}
\DoxyCodeLine{00242                     \textcolor{keywordtype}{double} segment\_distance = lanelet::geometry::distance2d(sub\_lanelet\_centerline.segment(\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}).first, sub\_lanelet\_centerline.segment(\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}).second);}
\DoxyCodeLine{00243                     total\_length += segment\_distance;}
\DoxyCodeLine{00244                 \}}
\DoxyCodeLine{00245             \}}
\DoxyCodeLine{00246             \textcolor{keywordflow}{return} total\_length;}
\DoxyCodeLine{00247         \}}

\end{DoxyCode}


References \mbox{\hyperlink{simulate__bsm_8py_source_l00019}{simulate\+\_\+bsm\+::i}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!ecef\_2\_map\_point@{ecef\_2\_map\_point}}
\index{ecef\_2\_map\_point@{ecef\_2\_map\_point}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{ecef\_2\_map\_point()}{ecef\_2\_map\_point()}}
{\footnotesize\ttfamily lanelet\+::\+Basic\+Point3d message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::ecef\+\_\+2\+\_\+map\+\_\+point (\begin{DoxyParamCaption}\item[{std\+::int32\+\_\+t}]{ecef\+\_\+x,  }\item[{std\+::int32\+\_\+t}]{ecef\+\_\+y,  }\item[{std\+::int32\+\_\+t}]{ecef\+\_\+z }\end{DoxyParamCaption}) const}



Function to convert ecef location to a 2d point in map frame. 


\begin{DoxyParams}{Parameters}
{\em ecef\+\_\+point} & ecef location point \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
2d point in map frame 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00249}{249}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00250         \{}
\DoxyCodeLine{00251             lanelet::BasicPoint3d basic\_point3d = this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}{local\_projector}}-\/>projectECEF(\{((double)ecef\_x) / 100, ((double)ecef\_y) / 100, ((double)ecef\_z) / 100\}, -\/1);}
\DoxyCodeLine{00252             \textcolor{keywordflow}{return} basic\_point3d;}
\DoxyCodeLine{00253         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00060}{local\+\_\+projector}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00116}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+point\+\_\+and\+\_\+direction()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a24e2be3abe3cbe33ff04b9101e615378}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a24e2be3abe3cbe33ff04b9101e615378}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!get\_cur\_lanelet\_by\_loc\_and\_direction@{get\_cur\_lanelet\_by\_loc\_and\_direction}}
\index{get\_cur\_lanelet\_by\_loc\_and\_direction@{get\_cur\_lanelet\_by\_loc\_and\_direction}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{get\_cur\_lanelet\_by\_loc\_and\_direction()}{get\_cur\_lanelet\_by\_loc\_and\_direction()}}
{\footnotesize\ttfamily lanelet\+::\+Lanelet message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+loc\+\_\+and\+\_\+direction (\begin{DoxyParamCaption}\item[{double}]{lat,  }\item[{double}]{lon,  }\item[{double}]{elev,  }\item[{std\+::string}]{turn\+\_\+direction,  }\item[{\mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&}]{trajectory }\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00083}{83}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084         \{}
\DoxyCodeLine{00085             lanelet::BasicPoint3d subj\_point3d = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8}{gps\_2\_map\_point}}(lat, lon, elev);}
\DoxyCodeLine{00086             \textcolor{keywordflow}{return} \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974}{get\_cur\_lanelet\_by\_point\_and\_direction}}(subj\_point3d, turn\_direction, trajectory);}
\DoxyCodeLine{00087         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00116}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+point\+\_\+and\+\_\+direction()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00255}{gps\+\_\+2\+\_\+map\+\_\+point()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a24e2be3abe3cbe33ff04b9101e615378_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!get\_cur\_lanelet\_by\_point\_and\_direction@{get\_cur\_lanelet\_by\_point\_and\_direction}}
\index{get\_cur\_lanelet\_by\_point\_and\_direction@{get\_cur\_lanelet\_by\_point\_and\_direction}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{get\_cur\_lanelet\_by\_point\_and\_direction()}{get\_cur\_lanelet\_by\_point\_and\_direction()}}
{\footnotesize\ttfamily lanelet\+::\+Lanelet message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+point\+\_\+and\+\_\+direction (\begin{DoxyParamCaption}\item[{lanelet\+::\+Basic\+Point3d}]{subj\+\_\+point3d,  }\item[{std\+::string}]{turn\+\_\+direction,  }\item[{\mbox{\hyperlink{structmessage__services_1_1models_1_1trajectory}{models\+::trajectory}} \&}]{trajectory }\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00116}{116}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00117         \{                  }
\DoxyCodeLine{00118             std::vector<lanelet::Lanelet> current\_total\_lanelets = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a171bf6b007d7aefae8b1e1254e2c58ab}{get\_cur\_lanelets\_by\_point}}(subj\_point3d);   }
\DoxyCodeLine{00119             std::vector<lanelet::Lanelet> result\_lanelets;}
\DoxyCodeLine{00120             \textcolor{keywordflow}{if} (current\_total\_lanelets.empty())}
\DoxyCodeLine{00121             \{}
\DoxyCodeLine{00122                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}No current lanelets to the vehicle in map point: x = \{0\}, y = \{1\}, z = \{2\}, and turn direction = \{3\}"{}}, subj\_point3d.x(), subj\_point3d.y(), subj\_point3d.z(), turn\_direction);}
\DoxyCodeLine{00123                 \textcolor{keywordflow}{return} lanelet::Lanelet();}
\DoxyCodeLine{00124             \}}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126 \textcolor{comment}{            /****}}
\DoxyCodeLine{00127 \textcolor{comment}{             * Check the lanelet turn direction to help identify the current lanelet if current geo-\/loc return more than 1 current lanelets.}}
\DoxyCodeLine{00128 \textcolor{comment}{             * If there is only one element in the current total lanelets, ignore the turn direction}}
\DoxyCodeLine{00129 \textcolor{comment}{             * ****/}}
\DoxyCodeLine{00130             \textcolor{keywordflow}{if} (current\_total\_lanelets.size() > 1)}
\DoxyCodeLine{00131             \{}
\DoxyCodeLine{00132                 \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} itr = current\_total\_lanelets.begin(); itr != current\_total\_lanelets.end(); itr++)}
\DoxyCodeLine{00133                 \{}
\DoxyCodeLine{00134                     \textcolor{keyword}{const} lanelet::Lanelet cur\_lanelet = *itr;}
\DoxyCodeLine{00135                     \textcolor{keywordflow}{if} (cur\_lanelet.hasAttribute(\textcolor{stringliteral}{"{}turn\_direction"{}}))}
\DoxyCodeLine{00136                     \{}
\DoxyCodeLine{00137                         \textcolor{keyword}{const} lanelet::Attribute attr = cur\_lanelet.attribute(\textcolor{stringliteral}{"{}turn\_direction"{}});}
\DoxyCodeLine{00138                         \textcolor{keywordflow}{if} (attr.value() == turn\_direction)}
\DoxyCodeLine{00139                         \{}
\DoxyCodeLine{00140                             result\_lanelets.push\_back(cur\_lanelet);}
\DoxyCodeLine{00141                         \}}
\DoxyCodeLine{00142                     \}}
\DoxyCodeLine{00143                 \}}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145                 \textcolor{keywordflow}{if} (result\_lanelets.size() == 1)}
\DoxyCodeLine{00146                 \{}
\DoxyCodeLine{00147                     \textcolor{keywordflow}{return} result\_lanelets.front();}
\DoxyCodeLine{00148                 \}}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150                 \textcolor{comment}{// If there are more than two current lanelets return, check the trajectory}}
\DoxyCodeLine{00151                 \textcolor{keywordflow}{if} (result\_lanelets.size() > 1)}
\DoxyCodeLine{00152                 \{}
\DoxyCodeLine{00153                     lanelet::BasicPoint3d basic\_point3d\_start = this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4}{ecef\_2\_map\_point}}(trajectory.location.ecef\_x, trajectory.location.ecef\_y, trajectory.location.ecef\_z);}
\DoxyCodeLine{00154                     \textcolor{keywordflow}{if} (trajectory.offsets.empty())}
\DoxyCodeLine{00155                     \{}
\DoxyCodeLine{00156                         SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Cannot determine current lanelet and ids with vehicle trajectory offset size = 0. "{}});}
\DoxyCodeLine{00157                         \textcolor{keywordflow}{return} lanelet::Lanelet();}
\DoxyCodeLine{00158                     \}}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160                     std::int32\_t dest\_x = trajectory.location.ecef\_x;}
\DoxyCodeLine{00161                     std::int32\_t dest\_y = trajectory.location.ecef\_y;}
\DoxyCodeLine{00162                     std::int32\_t dest\_z = trajectory.location.ecef\_z;}
\DoxyCodeLine{00163                     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} offset\_itr = trajectory.offsets.begin(); offset\_itr != trajectory.offsets.end(); offset\_itr++)}
\DoxyCodeLine{00164                     \{}
\DoxyCodeLine{00165                         dest\_x += offset\_itr-\/>offset\_x;}
\DoxyCodeLine{00166                         dest\_y += offset\_itr-\/>offset\_y;}
\DoxyCodeLine{00167                         dest\_z += offset\_itr-\/>offset\_z;}
\DoxyCodeLine{00168                         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}offset\_x = \{0\},offset\_y = \{1\},offset\_z = \{2\}"{}}, offset\_itr-\/>offset\_x, offset\_itr-\/>offset\_y, offset\_itr-\/>offset\_z);}
\DoxyCodeLine{00169                         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}dest\_x = \{0\},dest\_y = \{1\},dest\_z = \{2\}"{}}, dest\_x, dest\_y, dest\_z);}
\DoxyCodeLine{00170                     \}}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172                     lanelet::BasicPoint3d basic\_point3d\_dest = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aefd7df784db21bfbf5737072ea3119e4}{ecef\_2\_map\_point}}(dest\_x, dest\_y, dest\_z);}
\DoxyCodeLine{00173                     lanelet::Lanelet result\_lanelet = lanelet::Lanelet();}
\DoxyCodeLine{00174                     \textcolor{keywordtype}{double} smaller\_distance\_sum = 0;}
\DoxyCodeLine{00175                     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} itr = result\_lanelets.begin(); itr != result\_lanelets.end(); itr++)}
\DoxyCodeLine{00176                     \{}
\DoxyCodeLine{00177                         \textcolor{keyword}{const} lanelet::Lanelet cur\_lanelet = *itr;}
\DoxyCodeLine{00178                         \textcolor{keywordtype}{double} start\_distance2\_ctl = lanelet::geometry::distance2d(lanelet::utils::to2D(basic\_point3d\_start), lanelet::utils::toHybrid(cur\_lanelet.centerline2d()));}
\DoxyCodeLine{00179                         SPDLOG\_INFO(\textcolor{stringliteral}{"{}cur\_lanelet = \{0\} to trajectory start point distance = \{1\}"{}}, cur\_lanelet.id(), start\_distance2\_ctl);}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181                         \textcolor{keywordtype}{double} dest\_distance2\_ctl = lanelet::geometry::distance2d(lanelet::utils::to2D(basic\_point3d\_dest), lanelet::utils::toHybrid(cur\_lanelet.centerline2d()));}
\DoxyCodeLine{00182                         SPDLOG\_INFO(\textcolor{stringliteral}{"{}cur\_lanelet = \{0\} to trajectory dest point distance = \{1\}"{}}, cur\_lanelet.id(), dest\_distance2\_ctl);}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184                         \textcolor{keywordtype}{double} cur\_distance\_sum = start\_distance2\_ctl + dest\_distance2\_ctl;}
\DoxyCodeLine{00185 }
\DoxyCodeLine{00186                         \textcolor{keywordflow}{if} (smaller\_distance\_sum >= cur\_distance\_sum || smaller\_distance\_sum == 0)}
\DoxyCodeLine{00187                         \{}
\DoxyCodeLine{00188                             smaller\_distance\_sum = cur\_distance\_sum;}
\DoxyCodeLine{00189                             result\_lanelet = cur\_lanelet;}
\DoxyCodeLine{00190                         \}}
\DoxyCodeLine{00191                     \}}
\DoxyCodeLine{00192                     \textcolor{keywordflow}{return} result\_lanelet;}
\DoxyCodeLine{00193                 \}}
\DoxyCodeLine{00194                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Cannot determine the current lanelet with this turn direction = \{0\} for point = (x = \{1\} , y = \{2\}, z= \{3\})"{}}, turn\_direction, subj\_point3d.x(), subj\_point3d.y(), subj\_point3d.z());}
\DoxyCodeLine{00195             \}}
\DoxyCodeLine{00196             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (current\_total\_lanelets.size() == 1)}
\DoxyCodeLine{00197             \{           }
\DoxyCodeLine{00198                 \textcolor{keywordflow}{return} current\_total\_lanelets.front();}
\DoxyCodeLine{00199             \}}
\DoxyCodeLine{00200 }
\DoxyCodeLine{00201           \textcolor{keywordflow}{return} lanelet::Lanelet();}
\DoxyCodeLine{00202         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00249}{ecef\+\_\+2\+\_\+map\+\_\+point()}}, \mbox{\hyperlink{locationECEF_8h_source_l00035}{message\+\_\+services\+::models\+::location\+ECEF\+::ecef\+\_\+x}}, \mbox{\hyperlink{locationECEF_8h_source_l00036}{message\+\_\+services\+::models\+::location\+ECEF\+::ecef\+\_\+y}}, \mbox{\hyperlink{locationECEF_8h_source_l00037}{message\+\_\+services\+::models\+::location\+ECEF\+::ecef\+\_\+z}}, \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00089}{get\+\_\+cur\+\_\+lanelets\+\_\+by\+\_\+point()}}, \mbox{\hyperlink{trajectory_8h_source_l00033}{message\+\_\+services\+::models\+::trajectory\+::location}}, and \mbox{\hyperlink{trajectory_8h_source_l00034}{message\+\_\+services\+::models\+::trajectory\+::offsets}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00083}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+loc\+\_\+and\+\_\+direction()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a568b314c4f7eaa10ede9d9cb3030a974_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a171bf6b007d7aefae8b1e1254e2c58ab}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a171bf6b007d7aefae8b1e1254e2c58ab}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!get\_cur\_lanelets\_by\_point@{get\_cur\_lanelets\_by\_point}}
\index{get\_cur\_lanelets\_by\_point@{get\_cur\_lanelets\_by\_point}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{get\_cur\_lanelets\_by\_point()}{get\_cur\_lanelets\_by\_point()}}
{\footnotesize\ttfamily std\+::vector$<$ lanelet\+::\+Lanelet $>$ message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::get\+\_\+cur\+\_\+lanelets\+\_\+by\+\_\+point (\begin{DoxyParamCaption}\item[{lanelet\+::\+Basic\+Point3d}]{subj\+\_\+point3d }\end{DoxyParamCaption}) const}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00089}{89}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090         \{}
\DoxyCodeLine{00091             std::vector<lanelet::Lanelet> current\_total\_lanelets;           }
\DoxyCodeLine{00092             lanelet::BasicPoint2d subj\_point2d = lanelet::utils::to2D(subj\_point3d);}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094             \textcolor{comment}{// Find the nearest lanelets with maximum number (=3) of return lanelets because a point in intersection may return maximum three link/bridge lanelets}}
\DoxyCodeLine{00095             \textcolor{keyword}{auto} nearest\_lanelets = lanelet::geometry::findNearest(this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}{map\_ptr}}-\/>laneletLayer, subj\_point2d, 3);}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097             \textcolor{keywordflow}{if} (nearest\_lanelets.size() == 0)}
\DoxyCodeLine{00098             \{}
\DoxyCodeLine{00099                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}No nearest lanelet to the vehicle in map point: x = \{0\} y = \{1\}, z = \{2\}"{}}, subj\_point3d.x(), subj\_point3d.y(), subj\_point3d.z());}
\DoxyCodeLine{00100                 \textcolor{keywordflow}{return} current\_total\_lanelets;}
\DoxyCodeLine{00101             \}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103             \textcolor{comment}{// Only interested in the nearest lanelets with first = 0}}
\DoxyCodeLine{00104             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} itr = nearest\_lanelets.begin(); itr != nearest\_lanelets.end(); itr++)}
\DoxyCodeLine{00105             \{}
\DoxyCodeLine{00106                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Nearest lanelet to the vehicle in map point: x = \{0\} y = \{1\}, z = \{2\}. Nearest lanelet id = \{3\}"{}}, subj\_point3d.x(), subj\_point3d.y(), subj\_point3d.z(), itr-\/>second.id());}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108                 \textcolor{keywordflow}{if} (itr-\/>first == 0)}
\DoxyCodeLine{00109                 \{}
\DoxyCodeLine{00110                     current\_total\_lanelets.push\_back(itr-\/>second);}
\DoxyCodeLine{00111                 \}}
\DoxyCodeLine{00112             \}}
\DoxyCodeLine{00113             \textcolor{keywordflow}{return} current\_total\_lanelets;}
\DoxyCodeLine{00114         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00059}{map\+\_\+ptr}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00116}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+point\+\_\+and\+\_\+direction()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a171bf6b007d7aefae8b1e1254e2c58ab_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a4821d1fd75c245e9a29c80dd711f375f}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a4821d1fd75c245e9a29c80dd711f375f}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!get\_lanelet\_types\_ids@{get\_lanelet\_types\_ids}}
\index{get\_lanelet\_types\_ids@{get\_lanelet\_types\_ids}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{get\_lanelet\_types\_ids()}{get\_lanelet\_types\_ids()}}
{\footnotesize\ttfamily std\+::map$<$ int64\+\_\+t, \mbox{\hyperlink{namespacemessage__services_1_1models_adadf916283b2bc01c875dce103fadcae}{models\+::intersection\+\_\+lanelet\+\_\+type}} $>$ message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::get\+\_\+lanelet\+\_\+types\+\_\+ids (\begin{DoxyParamCaption}\item[{lanelet\+::\+Lanelet}]{subj\+\_\+lanelet,  }\item[{std\+::string}]{turn\+\_\+direction }\end{DoxyParamCaption}) const}

Checking whether the current lanelet is link lanelet. The link lanelet\textquotesingle{}s previous lanelet is entry lanelet, and entry lanelet has the all\+\_\+way\+\_\+stop regulatory element

Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00276}{276}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00277         \{}
\DoxyCodeLine{00278             std::map<int64\_t, models::intersection\_lanelet\_type> lanelet\_id\_type\_m;}
\DoxyCodeLine{00279             \textcolor{keywordflow}{if} (subj\_lanelet.id() == 0 )}
\DoxyCodeLine{00280             \{}
\DoxyCodeLine{00281                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Invalid start or end lanelet id. "{}});}
\DoxyCodeLine{00282                 \textcolor{keywordflow}{return} lanelet\_id\_type\_m;}
\DoxyCodeLine{00283             \}}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285                 lanelet::ConstLanelet entry\_lanelet;}
\DoxyCodeLine{00286                 lanelet::ConstLanelet link\_lanelet;}
\DoxyCodeLine{00287                 lanelet::ConstLanelet departure\_lanelet;}
\DoxyCodeLine{00288                 lanelet::Lanelet* ll\_itr = \&subj\_lanelet;}
\DoxyCodeLine{00289             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00290             \{}
\DoxyCodeLine{00294                     lanelet::ConstLanelet local\_ll = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}}-\/>previous(*ll\_itr).front();}
\DoxyCodeLine{00295                     \textcolor{keywordflow}{if} (local\_ll.regulatoryElements().size() > 0)}
\DoxyCodeLine{00296                     \{}
\DoxyCodeLine{00297                         lanelet::RegulatoryElementConstPtrs reg\_ptrs = local\_ll.regulatoryElements();}
\DoxyCodeLine{00298                         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} reg\_ptrs\_itr = reg\_ptrs.begin(); reg\_ptrs\_itr != reg\_ptrs.end(); reg\_ptrs\_itr++)}
\DoxyCodeLine{00299                         \{}
\DoxyCodeLine{00300                             \textcolor{keyword}{const} lanelet::RegulatoryElement *reg = reg\_ptrs\_itr-\/>get();}
\DoxyCodeLine{00301                             \textcolor{keywordflow}{if} (reg-\/>attribute(lanelet::AttributeName::Subtype).value() == lanelet::AttributeValueString::AllWayStop)}
\DoxyCodeLine{00302                             \{}
\DoxyCodeLine{00303                                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Found link lanelet id :\{0\}  "{}}, ll\_itr-\/>id());}
\DoxyCodeLine{00304                                 entry\_lanelet = local\_ll;}
\DoxyCodeLine{00305                                 link\_lanelet = *ll\_itr;}
\DoxyCodeLine{00306                                 departure\_lanelet = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}}-\/>following(link\_lanelet).front();}
\DoxyCodeLine{00307                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00308                             \}}
\DoxyCodeLine{00309                         \}}
\DoxyCodeLine{00310                     \}}
\DoxyCodeLine{00311 }
\DoxyCodeLine{00312 \textcolor{comment}{                    /***}}
\DoxyCodeLine{00313 \textcolor{comment}{                     * Checking whether the current lanelet is entry lanelet, and entry lanelet has the all\_way\_stop regulatory element}}
\DoxyCodeLine{00314 \textcolor{comment}{                     * **/}}
\DoxyCodeLine{00315                     \textcolor{keywordflow}{if} (!ll\_itr-\/>regulatoryElements().empty())}
\DoxyCodeLine{00316                     \{}
\DoxyCodeLine{00317                         lanelet::RegulatoryElementPtrs reg\_ptrs = ll\_itr-\/>regulatoryElements();}
\DoxyCodeLine{00318                         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} reg\_ptrs\_itr = reg\_ptrs.begin(); reg\_ptrs\_itr != reg\_ptrs.end(); reg\_ptrs\_itr++)}
\DoxyCodeLine{00319                         \{}
\DoxyCodeLine{00320                             \textcolor{keyword}{const} lanelet::RegulatoryElement *reg = reg\_ptrs\_itr-\/>get();}
\DoxyCodeLine{00321                             \textcolor{keywordflow}{if} (reg-\/>attribute(lanelet::AttributeName::Subtype).value() == lanelet::AttributeValueString::AllWayStop)}
\DoxyCodeLine{00322                             \{}
\DoxyCodeLine{00323                                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Found entry lanelet id :\{0\}  "{}}, ll\_itr-\/>id());}
\DoxyCodeLine{00324                                 entry\_lanelet = *ll\_itr;}
\DoxyCodeLine{00325                                 lanelet::ConstLanelets possible\_link\_lanelets = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}}-\/>following(*ll\_itr);}
\DoxyCodeLine{00326                                 \textcolor{comment}{// Check turn\_direction to determine the link lanelet for subject vehicle}}
\DoxyCodeLine{00327                                 \textcolor{comment}{// If turn direction is "{}NA"{} or empty, it cannot determine which link lanelet inside the intersection}}
\DoxyCodeLine{00328                                 \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} itr = possible\_link\_lanelets.begin(); itr != possible\_link\_lanelets.end(); itr++)}
\DoxyCodeLine{00329                                 \{}
\DoxyCodeLine{00330                                     \textcolor{keywordflow}{if} (itr-\/>hasAttribute(\textcolor{stringliteral}{"{}turn\_direction"{}}) \&\& itr-\/>attribute(\textcolor{stringliteral}{"{}turn\_direction"{}}).value() == turn\_direction)}
\DoxyCodeLine{00331                                     \{}
\DoxyCodeLine{00332                                         link\_lanelet = *itr;}
\DoxyCodeLine{00333                                         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Found link lanelet id :\{0\}  "{}}, itr-\/>id());}
\DoxyCodeLine{00334                                         departure\_lanelet = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}}-\/>following(link\_lanelet).front();}
\DoxyCodeLine{00335                                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00336                                     \}}
\DoxyCodeLine{00337                                 \}}
\DoxyCodeLine{00338                             \}}
\DoxyCodeLine{00339                         \}}
\DoxyCodeLine{00340                     \}}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342                 \textcolor{comment}{// insert the type for each lanelet id in the list of lanelet ids}}
\DoxyCodeLine{00343                 \textcolor{keywordflow}{if} (entry\_lanelet.id() != lanelet::InvalId)}
\DoxyCodeLine{00344                 \{}
\DoxyCodeLine{00345                     lanelet\_id\_type\_m.insert(std::make\_pair(entry\_lanelet.id(), \mbox{\hyperlink{namespacemessage__services_1_1models_adadf916283b2bc01c875dce103fadcaea0fd5625d55960788c83ed1f2a6a81631}{models::intersection\_lanelet\_type::entry}}));}
\DoxyCodeLine{00346                 \}}
\DoxyCodeLine{00347 }
\DoxyCodeLine{00348                 \textcolor{keywordflow}{if} (link\_lanelet.id() != lanelet::InvalId)}
\DoxyCodeLine{00349                 \{}
\DoxyCodeLine{00350                     lanelet\_id\_type\_m.insert(std::make\_pair(link\_lanelet.id(), \mbox{\hyperlink{namespacemessage__services_1_1models_adadf916283b2bc01c875dce103fadcaea3d6232af1d94cb10e98b26b8c942c678}{models::intersection\_lanelet\_type::link}}));}
\DoxyCodeLine{00351                 \}}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353                 \textcolor{keywordflow}{if} (departure\_lanelet.id() != lanelet::InvalId)}
\DoxyCodeLine{00354                 \{}
\DoxyCodeLine{00355                     lanelet\_id\_type\_m.insert(std::make\_pair(departure\_lanelet.id(), \mbox{\hyperlink{namespacemessage__services_1_1models_adadf916283b2bc01c875dce103fadcaeaa0d6503f4183b89238b86fd1e3d9ad7f}{models::intersection\_lanelet\_type::departure}}));}
\DoxyCodeLine{00356                 \}}
\DoxyCodeLine{00357             \textcolor{keywordflow}{return} lanelet\_id\_type\_m;}
\DoxyCodeLine{00358             \}}
\DoxyCodeLine{00359             \textcolor{keywordflow}{catch}(...)}
\DoxyCodeLine{00360             \{}
\DoxyCodeLine{00361                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Cannot determine lanelet type and ids with vehicle current lanelet. "{}});}
\DoxyCodeLine{00362                 lanelet\_id\_type\_m.clear();}
\DoxyCodeLine{00363                 \textcolor{keywordflow}{return} lanelet\_id\_type\_m;}
\DoxyCodeLine{00364             \}}
\DoxyCodeLine{00365         \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__lanelet__type_8h_source_l00016}{message\+\_\+services\+::models\+::departure}}, \mbox{\hyperlink{intersection__lanelet__type_8h_source_l00014}{message\+\_\+services\+::models\+::entry}}, \mbox{\hyperlink{intersection__lanelet__type_8h_source_l00015}{message\+\_\+services\+::models\+::link}}, and \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00070}{vehicle\+Graph\+\_\+ptr}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!gps\_2\_map\_point@{gps\_2\_map\_point}}
\index{gps\_2\_map\_point@{gps\_2\_map\_point}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{gps\_2\_map\_point()}{gps\_2\_map\_point()}}
{\footnotesize\ttfamily lanelet\+::\+Basic\+Point3d message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::gps\+\_\+2\+\_\+map\+\_\+point (\begin{DoxyParamCaption}\item[{double}]{lat,  }\item[{double}]{lon,  }\item[{double}]{elev }\end{DoxyParamCaption}) const}



Function to convert GPS location to a 3d point in map frame. 


\begin{DoxyParams}{Parameters}
{\em GPS} & location point \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
3d point in map frame 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00255}{255}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00256         \{}
\DoxyCodeLine{00257             lanelet::BasicPoint3d basic\_point3d;}
\DoxyCodeLine{00258             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00259             \{}
\DoxyCodeLine{00260                 \textcolor{comment}{// construct a GPS point}}
\DoxyCodeLine{00261                 lanelet::GPSPoint subj\_gps\_pos;}
\DoxyCodeLine{00262                 subj\_gps\_pos.lat = lat;}
\DoxyCodeLine{00263                 subj\_gps\_pos.lon = lon;}
\DoxyCodeLine{00264                 subj\_gps\_pos.ele = elev;}
\DoxyCodeLine{00265 }
\DoxyCodeLine{00266                 \textcolor{comment}{// project the GPS point to (x,y,z)}}
\DoxyCodeLine{00267                 basic\_point3d = \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}{local\_projector}}-\/>forward(subj\_gps\_pos);}
\DoxyCodeLine{00268             \}}
\DoxyCodeLine{00269             \textcolor{keywordflow}{catch} (...)}
\DoxyCodeLine{00270             \{}
\DoxyCodeLine{00271                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Cannot project the GPS position: Latitude: \{0\} , Longitude: \{1\}, Elevation: \{2\}"{}}, lat, lon, elev);}
\DoxyCodeLine{00272             \}}
\DoxyCodeLine{00273             \textcolor{keywordflow}{return} basic\_point3d;            }
\DoxyCodeLine{00274         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00060}{local\+\_\+projector}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00204}{distance2\+\_\+cur\+\_\+lanelet\+\_\+end()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00083}{get\+\_\+cur\+\_\+lanelet\+\_\+by\+\_\+loc\+\_\+and\+\_\+direction()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aad90a20416b9d7053f1072d3790665b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a6aa017f9885603dc1d36c7ae1af0724e}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a6aa017f9885603dc1d36c7ae1af0724e}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!read\_lanelet2\_map@{read\_lanelet2\_map}}
\index{read\_lanelet2\_map@{read\_lanelet2\_map}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{read\_lanelet2\_map()}{read\_lanelet2\_map()}}
{\footnotesize\ttfamily bool message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::read\+\_\+lanelet2\+\_\+map (\begin{DoxyParamCaption}\item[{std\+::string}]{filename }\end{DoxyParamCaption})}



Read lanelet2 map. 


\begin{DoxyParams}{Parameters}
{\em filename} & path to lanelet2 osm map. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if no exception and map pointer is updated. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00039}{39}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00040         \{}
\DoxyCodeLine{00041             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00042             \{}
\DoxyCodeLine{00043                 \textcolor{keywordtype}{int} \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a1fc68eea7e7f464ccb9c4f944afc3fce}{projector\_type}} = 1;}
\DoxyCodeLine{00044                 std::string target\_frame;}
\DoxyCodeLine{00045                 lanelet::ErrorMessages errors;}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047                 \textcolor{comment}{// Parse geo reference info from the lanelet map (.osm)}}
\DoxyCodeLine{00048                 lanelet::io\_handlers::AutowareOsmParser::parseMapParams(filename, \&\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a1fc68eea7e7f464ccb9c4f944afc3fce}{projector\_type}}, \&target\_frame);}
\DoxyCodeLine{00049                 \mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}{local\_projector}} = \textcolor{keyword}{new} lanelet::projection::LocalFrameProjector(target\_frame.c\_str());}
\DoxyCodeLine{00050                 this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}{map\_ptr}} = lanelet::load(filename, *\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}{local\_projector}}, \&errors);}
\DoxyCodeLine{00051                 \textcolor{keywordflow}{if} (!this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}{map\_ptr}}-\/>empty())}
\DoxyCodeLine{00052                 \{}
\DoxyCodeLine{00053                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00054                 \}}
\DoxyCodeLine{00055             \}}
\DoxyCodeLine{00056             \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::exception \&ex)}
\DoxyCodeLine{00057             \{}
\DoxyCodeLine{00058                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Cannot read osm file \{0\}. Error message: \{1\} "{}}, filename, ex.what());}
\DoxyCodeLine{00059             \}}
\DoxyCodeLine{00060             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00061         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00060}{local\+\_\+projector}}, \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00059}{map\+\_\+ptr}}, and \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00064}{projector\+\_\+type}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00009}{message\+\_\+lanelet2\+\_\+translation()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a6aa017f9885603dc1d36c7ae1af0724e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a876c6e1cd0fff32b90f2d3dff5a8f5a8}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a876c6e1cd0fff32b90f2d3dff5a8f5a8}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!update\_vehicle\_routing\_graph@{update\_vehicle\_routing\_graph}}
\index{update\_vehicle\_routing\_graph@{update\_vehicle\_routing\_graph}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{update\_vehicle\_routing\_graph()}{update\_vehicle\_routing\_graph()}}
{\footnotesize\ttfamily bool message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::update\+\_\+vehicle\+\_\+routing\+\_\+graph (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize vehicle routing graph. 

\begin{DoxyReturn}{Returns}
true if the routing graph for vehicle participant is updated, otherwise false. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{63}} of file \mbox{\hyperlink{message__lanelet2__translation_8cpp_source}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00064         \{}
\DoxyCodeLine{00065             \textcolor{comment}{// get routingGraph from map}}
\DoxyCodeLine{00066             lanelet::traffic\_rules::TrafficRulesPtr trafficRules\{}
\DoxyCodeLine{00067                 lanelet::traffic\_rules::TrafficRulesFactory::create(lanelet::Locations::Germany,}
\DoxyCodeLine{00068                                                                     lanelet::Participants::Vehicle,}
\DoxyCodeLine{00069                                                                     lanelet::traffic\_rules::TrafficRules::Configuration())\};}
\DoxyCodeLine{00070             lanelet::routing::RoutingCostPtrs costPtrs\{}
\DoxyCodeLine{00071                 std::make\_shared<lanelet::routing::RoutingCostDistance>(this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a302db95fd79b288c4d0e50b16752a441}{laneChangeCost}}, this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aa51947e25636f012ee2fbee667ba3e3f}{minLaneChangeLength}}),}
\DoxyCodeLine{00072                 std::make\_shared<lanelet::routing::RoutingCostTravelTime>(this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a302db95fd79b288c4d0e50b16752a441}{laneChangeCost}})\};}
\DoxyCodeLine{00073             lanelet::routing::RoutingGraph::Configuration configuration;}
\DoxyCodeLine{00074             configuration.insert(std::make\_pair(lanelet::routing::RoutingGraph::ParticipantHeight, this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a0b2cbd61960ea2197e3e56b08a91232a}{participantHeight}}));}
\DoxyCodeLine{00075             this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}} = lanelet::routing::RoutingGraph::build(*this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}{map\_ptr}}, *trafficRules, costPtrs, configuration);}
\DoxyCodeLine{00076             \textcolor{keywordflow}{if} (!this-\/>\mbox{\hyperlink{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}{vehicleGraph\_ptr}})}
\DoxyCodeLine{00077             \{}
\DoxyCodeLine{00078                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00079             \}}
\DoxyCodeLine{00080             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00081         \}}

\end{DoxyCode}


References \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00061}{lane\+Change\+Cost}}, \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00059}{map\+\_\+ptr}}, \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00063}{min\+Lane\+Change\+Length}}, \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00062}{participant\+Height}}, and \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00070}{vehicle\+Graph\+\_\+ptr}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00009}{message\+\_\+lanelet2\+\_\+translation()}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a876c6e1cd0fff32b90f2d3dff5a8f5a8_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ab785a96dc83df9414f0b33200054d174}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ab785a96dc83df9414f0b33200054d174}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!\_maximum\_num\_lanelets\_per\_trajectory@{\_maximum\_num\_lanelets\_per\_trajectory}}
\index{\_maximum\_num\_lanelets\_per\_trajectory@{\_maximum\_num\_lanelets\_per\_trajectory}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{\_maximum\_num\_lanelets\_per\_trajectory}{\_maximum\_num\_lanelets\_per\_trajectory}}
{\footnotesize\ttfamily const std\+::uint16\+\_\+t message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::\+\_\+maximum\+\_\+num\+\_\+lanelets\+\_\+per\+\_\+trajectory = 4\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00067}{67}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a302db95fd79b288c4d0e50b16752a441}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a302db95fd79b288c4d0e50b16752a441}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!laneChangeCost@{laneChangeCost}}
\index{laneChangeCost@{laneChangeCost}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{laneChangeCost}{laneChangeCost}}
{\footnotesize\ttfamily double message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::lane\+Change\+Cost = 2.\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00061}{61}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_af62af0839b4c4148224c95a93bb61baa}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!local\_projector@{local\_projector}}
\index{local\_projector@{local\_projector}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{local\_projector}{local\_projector}}
{\footnotesize\ttfamily lanelet\+::projection\+::\+Local\+Frame\+Projector$\ast$ message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::local\+\_\+projector\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00060}{60}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00249}{ecef\+\_\+2\+\_\+map\+\_\+point()}}, \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00255}{gps\+\_\+2\+\_\+map\+\_\+point()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00039}{read\+\_\+lanelet2\+\_\+map()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a2dad3311db54bd396c4ba331b902a3bd}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!map\_ptr@{map\_ptr}}
\index{map\_ptr@{map\_ptr}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{map\_ptr}{map\_ptr}}
{\footnotesize\ttfamily lanelet\+::\+Lanelet\+Map\+Ptr message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::map\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00059}{59}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00089}{get\+\_\+cur\+\_\+lanelets\+\_\+by\+\_\+point()}}, \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00039}{read\+\_\+lanelet2\+\_\+map()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aa51947e25636f012ee2fbee667ba3e3f}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_aa51947e25636f012ee2fbee667ba3e3f}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!minLaneChangeLength@{minLaneChangeLength}}
\index{minLaneChangeLength@{minLaneChangeLength}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{minLaneChangeLength}{minLaneChangeLength}}
{\footnotesize\ttfamily double message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::min\+Lane\+Change\+Length = 0.\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00063}{63}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a0b2cbd61960ea2197e3e56b08a91232a}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a0b2cbd61960ea2197e3e56b08a91232a}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!participantHeight@{participantHeight}}
\index{participantHeight@{participantHeight}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{participantHeight}{participantHeight}}
{\footnotesize\ttfamily double message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::participant\+Height = 2.\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00062}{62}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a1fc68eea7e7f464ccb9c4f944afc3fce}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_a1fc68eea7e7f464ccb9c4f944afc3fce}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!projector\_type@{projector\_type}}
\index{projector\_type@{projector\_type}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{projector\_type}{projector\_type}}
{\footnotesize\ttfamily int message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::projector\+\_\+type = 0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00064}{64}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00039}{read\+\_\+lanelet2\+\_\+map()}}.

\mbox{\Hypertarget{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}\label{classmessage__services_1_1message__translations_1_1message__lanelet2__translation_ad3ca94e76ed9b04daa0fd1a2570413f5}} 
\index{message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}!vehicleGraph\_ptr@{vehicleGraph\_ptr}}
\index{vehicleGraph\_ptr@{vehicleGraph\_ptr}!message\_services::message\_translations::message\_lanelet2\_translation@{message\_services::message\_translations::message\_lanelet2\_translation}}
\doxysubsubsection{\texorpdfstring{vehicleGraph\_ptr}{vehicleGraph\_ptr}}
{\footnotesize\ttfamily lanelet\+::routing\+::\+Routing\+Graph\+Ptr message\+\_\+services\+::message\+\_\+translations\+::message\+\_\+lanelet2\+\_\+translation\+::vehicle\+Graph\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{message__lanelet2__translation_8h_source_l00070}{70}} of file \mbox{\hyperlink{message__lanelet2__translation_8h_source}{message\+\_\+lanelet2\+\_\+translation.\+h}}.



Referenced by \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00009}{message\+\_\+lanelet2\+\_\+translation()}}, \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00276}{get\+\_\+lanelet\+\_\+types\+\_\+ids()}}, and \mbox{\hyperlink{message__lanelet2__translation_8cpp_source_l00063}{update\+\_\+vehicle\+\_\+routing\+\_\+graph()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
message\+\_\+services/include/\mbox{\hyperlink{message__lanelet2__translation_8h}{message\+\_\+lanelet2\+\_\+translation.\+h}}\item 
message\+\_\+services/lib/\mbox{\hyperlink{message__lanelet2__translation_8cpp}{message\+\_\+lanelet2\+\_\+translation.\+cpp}}\end{DoxyCompactItemize}
