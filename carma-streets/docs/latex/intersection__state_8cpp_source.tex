\hypertarget{intersection__state_8cpp_source}{}\doxysection{intersection\+\_\+state.\+cpp}
\label{intersection__state_8cpp_source}\index{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/intersection\_state.cpp@{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/intersection\_state.cpp}}
\mbox{\hyperlink{intersection__state_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{intersection__state_8h}{intersection\_state.h}}"{}}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesignal__phase__and__timing}{signal\_phase\_and\_timing}} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00005}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ae992920af2fdef8ffd0cf29da74e0ac9}{00005}}     rapidjson::Value \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ae992920af2fdef8ffd0cf29da74e0ac9}{intersection\_state::toJson}}(rapidjson::Document::AllocatorType \&allocator)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00006}00006         \textcolor{comment}{// Create intersection state JSON value}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00007}00007         rapidjson::Value state(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00008}00008         \textcolor{comment}{// Populate}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00009}00009         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00010}00010         state.AddMember(\textcolor{stringliteral}{"{}name"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00011}00011         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00012}00012         \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == 0 ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00013}00013             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required id property!"{}});  }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00014}00014         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00015}00015         state.AddMember(\textcolor{stringliteral}{"{}id"{}}, \textcolor{keywordtype}{id}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00016}00016         state.AddMember(\textcolor{stringliteral}{"{}revision"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00017}00017         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00018}00018         state.AddMember(\textcolor{stringliteral}{"{}status"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00019}00019         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} == 0 ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00020}00020             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required moy property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00022}00022         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00023}00023         state.AddMember(\textcolor{stringliteral}{"{}moy"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00024}00024         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00025}00025         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} == 0 ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00026}00026             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required time\_stamp property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00027}00027         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00028}00028         state.AddMember(\textcolor{stringliteral}{"{}time\_stamp"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}}, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00029}00029         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00030}00030         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00031}00031             rapidjson::Value lane\_list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00032}00032             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&lane\_id : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00033}00033                 lane\_list.PushBack(lane\_id, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00034}00034             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00035}00035             state.AddMember(\textcolor{stringliteral}{"{}enabled\_lanes"{}}, lane\_list, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00036}00036         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00037}00037         \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00038}00038         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00039}00039             rapidjson::Value states\_list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00040}00040             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&move\_state : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00041}00041                 states\_list.PushBack(move\_state.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00042}00042             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00043}00043             state.AddMember(\textcolor{stringliteral}{"{}states"{}}, states\_list, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00044}00044         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00045}00045         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00046}00046                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required states property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00047}00047         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00048}00048         \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00049}00049         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00050}00050             rapidjson::Value maneuver\_list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00051}00051             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&maneuver : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00052}00052                 maneuver\_list.PushBack(maneuver.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00053}00053             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00054}00054             state.AddMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}, maneuver\_list, allocator);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00056}00056         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00057}00057         \textcolor{keywordflow}{return} state;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00058}00058     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00060}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}{00060}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac73d712ab8edf86b8d9c892f6bdff5e0}{intersection\_state::fromJson}}(\textcolor{keyword}{const} rapidjson::Value \&val) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00061}00061         \textcolor{keywordflow}{if} ( val.IsObject() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00062}00062             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}name"{}})-\/>value.IsString() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00063}00063                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00064}00064                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} =  val[\textcolor{stringliteral}{"{}name"{}}].GetString();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00065}00065             \} }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00066}00066             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}id"{}}) \&\& val[\textcolor{stringliteral}{"{}id"{}}].IsUint()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00067}00067                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00068}00068                 \textcolor{keywordtype}{id} =  \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}id"{}}].GetUint());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00069}00069             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00070}00070             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00071}00071                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required id property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00072}00072             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00073}00073             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}revision"{}}) \&\& val[\textcolor{stringliteral}{"{}revision"{}}].IsUint()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00074}00074                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00075}00075                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} =  \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}revision"{}}].GetUint());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00076}00076             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00077}00077             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00078}00078                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required revision property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00079}00079             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00080}00080             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}status"{}})-\/>value.IsUint()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00081}00081                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00082}00082                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}} =  (uint8\_t) val[\textcolor{stringliteral}{"{}status"{}}].GetUint();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00083}00083             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00084}00084             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00085}00085                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required status property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00086}00086             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00087}00087             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}moy"{}}) \&\&  val[\textcolor{stringliteral}{"{}moy"{}}].IsUint()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00088}00088                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00089}00089                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = val[\textcolor{stringliteral}{"{}moy"{}}].GetUint();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00090}00090             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00091}00091             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00092}00092                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required moy property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00093}00093             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00094}00094             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}time\_stamp"{}}) \&\& val[\textcolor{stringliteral}{"{}time\_stamp"{}}].IsUint()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00095}00095                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition but required for CARMA-\/Streets}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00096}00096                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} =  \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}time\_stamp"{}}].GetUint());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00097}00097             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00098}00098             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00099}00099                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required time\_stamp property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00100}00100             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00101}00101             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}enabled\_lanes"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00102}00102                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00103}00103                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.clear();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00104}00104                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&lane: val[\textcolor{stringliteral}{"{}enabled\_lanes"{}}].GetArray()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00105}00105                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}.push\_back(lane.GetInt());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00106}00106                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00107}00107             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00108}00108             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}states"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00109}00109                 \textcolor{comment}{// REQUIRED see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00110}00110                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.clear();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00111}00111                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&movement\_st: val[\textcolor{stringliteral}{"{}states"{}}].GetArray()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00112}00112                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}} move\_state;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00113}00113                     move\_state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_add078711d1cf73ce1f433c4b34532fcc}{fromJson}}( movement\_st );}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00114}00114                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.push\_back( move\_state);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00115}00115                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00116}00116             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00117}00117             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00118}00118                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}IntersectionState is missing required states property!"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00119}00119             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00120}00120             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00121}00121                 \textcolor{comment}{// OPTIONAL see J2735 IntersectionState definition}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00122}00122                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.clear();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00123}00123                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&state: val[\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}].GetArray()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00124}00124                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist}{connection\_maneuver\_assist}} maneuver;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00125}00125                     maneuver.\mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist_a0a1eb4c8b7054414b2a771d67d78404e}{fromJson}}( state );}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00126}00126                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}}.push\_back( maneuver);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00127}00127                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00128}00128             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00130}00130     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00132}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}{00132}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}{intersection\_state::operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} \&other)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00133}00133         \textcolor{keywordflow}{return} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a6da9216f423d4fdb2d754ea68e276e73}{name}} \&\& \textcolor{keywordtype}{id} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ada34bde87ec24eb85810d408cd13f69f}{id}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ec8a1a400233389a5640c48bda4d1e3}{revision}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_abbd9ce5f7a9b4930e5cdfeaf84ddbe02}{status}} \&\&}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00134}00134             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} \&\& other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8c616e91f927f3803dcd2367e12a4eb9}{enabled\_lanes}}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00135}00135             \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a608bced258a6e40c5b975021b3a6bc02}{maneuver\_assist\_list}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00136}00136     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00138}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b}{00138}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a19acfe5a1d6bdd80a61d086b52579f8b}{intersection\_state::operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state}{intersection\_state}} \&compare)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00139}00139         \textcolor{keywordflow}{return} !\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ac42d471e1b9b4bf7924ffb93bd6892e9}{operator==}}(compare);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00140}00140     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00142}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}{00142}}     uint64\_t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}{intersection\_state::convert\_min\_mills2epoch\_ts}}(uint32\_t moy\_ll , uint16\_t min\_mills\_timestamp)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00143}00143         \textcolor{comment}{//Calculate timestamp for beginning of the year}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00144}00144         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00145}00145         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00146}00146         tm utctime;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00147}00147         gmtime\_r(\&tt, \&utctime);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00148}00148         \textcolor{keyword}{auto} timeinfo = tm();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00149}00149         timeinfo.tm\_year = utctime.tm\_year;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00150}00150         timeinfo.tm\_mon = 0; \textcolor{comment}{//January}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00151}00151         timeinfo.tm\_mday = 1; \textcolor{comment}{//1st}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00152}00152         timeinfo.tm\_hour = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00153}00153         timeinfo.tm\_min = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00154}00154         timeinfo.tm\_sec = 0; \textcolor{comment}{//00}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00155}00155         time\_t year\_begin\_utc\_t = timegm(\&timeinfo);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00156}00156         \textcolor{keyword}{auto} year\_begin\_utc\_tp = std::chrono::system\_clock::from\_time\_t(year\_begin\_utc\_t);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00157}00157         \textcolor{keyword}{auto} year\_begin\_utc\_timestamp = std::chrono::duration\_cast<std::chrono::milliseconds>(year\_begin\_utc\_tp.time\_since\_epoch()).count();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00158}00158         \textcolor{keyword}{auto} epoch\_timestamp = year\_begin\_utc\_timestamp + \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{long}\textcolor{keyword}{>}(moy\_ll) * \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_ad71bed5c8cd56cac8dcd041c5fd5a83e}{MIN\_TO\_SECONDS}} * \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aebaed676aff07f126fe01e1319b4c605}{SECOND\_TO\_MILLISECONDS}} + min\_mills\_timestamp;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00159}00159         \textcolor{keywordflow}{return} epoch\_timestamp;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00160}00160     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00162}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5}{00162}}     uint64\_t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a8bc23ba89dd6c079735485173ba6d6d5}{intersection\_state::get\_epoch\_timestamp}}()\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00163}00163        \textcolor{keyword}{auto} epoch\_timestamp = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a4fde3ad2fb225f963f411ad66e72066f}{convert\_min\_mills2epoch\_ts}}(\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00164}00164        \textcolor{keywordflow}{return} epoch\_timestamp;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00165}00165     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00166}00166 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00167}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a5aa5329bedd738f5579cf045975d87a9}{00167}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a5aa5329bedd738f5579cf045975d87a9}{intersection\_state::set\_timestamp\_ntcip}}(\textcolor{keyword}{const} uint32\_t second\_of\_day, \textcolor{keyword}{const} uint16\_t millisecond\_of\_second ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00168}00168         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00169}00169         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00170}00170         tm utc\_tm;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00171}00171         gmtime\_r(\&tt, \&utc\_tm);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00172}00172         \textcolor{comment}{// Day of the year * 24 hours * 60 minutes + second of the day / 60 = minute of the year}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00173}00173         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = (uint32\_t)(utc\_tm.tm\_yday*24*60+ trunc(second\_of\_day/ 60)); }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00174}00174         \textcolor{comment}{// Remaineder of (second of the day/ 60 ) * 1000 + millisecond of the current second}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00175}00175         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} = ((second\_of\_day\%60)*1000) + millisecond\_of\_second;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00176}00176     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00177}00177        }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00178}00178 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00179}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a480dafe7aae5c872f14d1f60c8627636}{00179}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a480dafe7aae5c872f14d1f60c8627636}{intersection\_state::set\_timestamp\_local}}() \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00180}00180         std::chrono::system\_clock::time\_point now = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00181}00181         time\_t tt = std::chrono::system\_clock::to\_time\_t(now);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00182}00182         tm utc\_tm;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00183}00183         gmtime\_r(\&tt, \&utc\_tm);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00184}00184         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0a0ee55cccc9fb11add9902564ad504e}{moy}} = (uint32\_t)(utc\_tm.tm\_yday*60*24 + utc\_tm.tm\_hour*60 + utc\_tm.tm\_min);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00185}00185         \textcolor{keyword}{auto} millisecond\_of\_second = std::chrono::duration\_cast<std::chrono::milliseconds>(now.time\_since\_epoch()).count() \% 1000;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00186}00186         \textcolor{comment}{// Millisecond of second + second of minute * 1000}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00187}00187         \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a51c19a8652fc7761cb9e632fc01a9dd2}{time\_stamp}} = (uint16\_t)(millisecond\_of\_second + utc\_tm.tm\_sec*1000);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00188}00188        }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00189}00189     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00190}00190 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00191}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}{00191}}     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}}\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}{intersection\_state::get\_movement}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} signal\_group\_id ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00192}00192         \textcolor{keywordflow}{for} ( \textcolor{keyword}{auto} it = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.begin(); it != \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.end(); it++) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00193}00193             \textcolor{keywordflow}{if} ( it-\/>signal\_group ==  signal\_group\_id ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00194}00194                 \textcolor{keywordflow}{return} *it;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00195}00195             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00196}00196         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00197}00197         \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}No movement\_state found for movement with signal group id "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(signal\_group\_id) + \textcolor{stringliteral}{"{}!"{}});   }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00198}00198     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00199}00199 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00200}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}{00200}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_aca7f3528dc9e42b152c0e4537468fd79}{intersection\_state::initialize\_movement\_states}}( \textcolor{keyword}{const} std::unordered\_map<int,int> \&phase\_number\_to\_signal\_group) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00201}00201         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.empty()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00202}00202             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.clear();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00203}00203         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00204}00204         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&phase\_2\_sig\_group : phase\_number\_to\_signal\_group) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00205}00205             \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}} state;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00206}00206             state.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_ad403f25c761b6ef77b4bbc6bacbfc888}{signal\_group}} = (uint8\_t) phase\_2\_sig\_group.second;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00207}00207             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}}.push\_back(state);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00208}00208         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00209}00209     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00210}00210 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00211}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}{00211}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}{intersection\_state::update\_movement\_state}}( \mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip::ntcip\_1202\_ext}} \&spat\_data, \textcolor{keyword}{const} \textcolor{keywordtype}{int} signal\_group\_id, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00212}00212         \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}} \&movement = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a0212a92fdea9a7f1f5959d002ba7dda9}{get\_movement}}(signal\_group\_id);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00213}00213         \textcolor{comment}{// Get current movement\_event}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00214}00214         \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\_event}} \&cur\_event = movement.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}}.front();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00215}00215         \textcolor{comment}{// Set event state }}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00216}00216         \textcolor{keywordtype}{bool} is\_flashing = spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a5f5f247af2e7d5c7a2e196c9125907ea}{get\_phase\_flashing\_status}}( \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}} );}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00217}00217         \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_adfbdd4d01e9825dc3e1e674473c56171}{get\_phase\_red\_status}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}) ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00218}00218             \textcolor{keywordflow}{if} (is\_flashing) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00219}00219                 \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a82f58c8125d6f043623349cf7330ef62}{movement\_phase\_state::stop\_then\_proceed}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00220}00220                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00221}00221                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00222}00222                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00223}00223                 cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a82f58c8125d6f043623349cf7330ef62}{movement\_phase\_state::stop\_then\_proceed}}; }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00224}00224             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00225}00225                 \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{movement\_phase\_state::stop\_and\_remain}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00226}00226                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00227}00227                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00228}00228                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00229}00229                 cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{movement\_phase\_state::stop\_and\_remain}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00230}00230             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00231}00231 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00232}00232         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00233}00233         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_aa5fef8a2a7ce6499bb545e4e1b343b8e}{get\_phase\_yellow\_status}}( \mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}} ) ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00234}00234             \textcolor{keywordflow}{if} ( is\_flashing ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00235}00235                 \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ae7bfb5169b6040cc3adbcaa21dd1bc38}{movement\_phase\_state::caution\_conflicting\_traffic}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00236}00236                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00237}00237                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00238}00238                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00239}00239                 cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ae7bfb5169b6040cc3adbcaa21dd1bc38}{movement\_phase\_state::caution\_conflicting\_traffic}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00240}00240             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00241}00241                 \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{movement\_phase\_state::protected\_clearance}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00242}00242                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00243}00243                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00244}00244                 \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00245}00245                 cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} =  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{movement\_phase\_state::protected\_clearance}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00246}00246             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00247}00247         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00248}00248         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_ac8e0437aeac4c314b2f682f57a6c47c9}{get\_phase\_green\_status}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}})) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00249}00249             \textcolor{comment}{// TODO: Add Support Permissive Green Phase}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00250}00250             \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{movement\_phase\_state::protected\_movement\_allowed}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00251}00251                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00252}00252                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00253}00253             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00254}00254             cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{movement\_phase\_state::protected\_movement\_allowed}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00255}00255         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00256}00256         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00257}00257             \textcolor{keywordflow}{if} ( cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} !=  \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14aa82fd95db10ff25dfad39f07372ebe37}{movement\_phase\_state::dark}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00258}00258                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting start time to current time"{}});}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00259}00259                     cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00260}00260             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00261}00261             cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14aa82fd95db10ff25dfad39f07372ebe37}{movement\_phase\_state::dark}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00262}00262         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00263}00263         \textcolor{comment}{// Set event timing}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00264}00264         cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_a1c9501b5a44c66a178b8753db439a753}{max\_end\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a0cbc4b96d4191b8cc8834cf06f7a810b}{get\_phasetime}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}).\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext__phasetime_ac2bd3254673a1650bbb1481bd15d627b}{get\_spat\_veh\_max\_time\_to\_change}}());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00265}00265         cur\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}} = \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{convert\_offset}}(spat\_data.\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext_a0cbc4b96d4191b8cc8834cf06f7a810b}{get\_phasetime}}(\mbox{\hyperlink{ntcip__1202__ext__phasetime_8h_a818606b5263ca9418c2a574097a9503a}{phase\_number}}).\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext__phasetime_ac4be29069aab2d1659df59c7e3a92dc7}{get\_spat\_veh\_min\_time\_to\_change}}());}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00266}00266 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00267}00267     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00268}00268 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00269}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935}{00269}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_adb8a7d8693ba85ab08f3c0e31afe4935}{intersection\_state::update\_movements}}(\mbox{\hyperlink{structntcip_1_1ntcip__1202__ext}{ntcip::ntcip\_1202\_ext}} \&spat\_data, \textcolor{keyword}{const} std::unordered\_map<int,int> \&phase\_number\_to\_signal\_group ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00270}00270         \textcolor{keywordflow}{for} ( \textcolor{keyword}{auto} \&move\_state : \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7ede63a37705e6c5cdce68883fe78a7d}{states}} ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00271}00271             \textcolor{comment}{// If movement event list is empty, create a current event.}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00272}00272             \textcolor{keywordflow}{if} ( move\_state.state\_time\_speed.empty()) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00273}00273                 \textcolor{comment}{// Add current movement\_event}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00274}00274                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\_event}} cur\_event;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00275}00275                 move\_state.state\_time\_speed.push\_front(cur\_event);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00276}00276             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00277}00277             \textcolor{comment}{// If movement event list contains future events, clear future events.}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00278}00278             \textcolor{keywordflow}{if} ( move\_state.state\_time\_speed.size() > 1) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00279}00279                 \textcolor{comment}{// Clear all movement events except current (front)}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00280}00280                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\_event}} cur\_event = move\_state.state\_time\_speed.front();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00281}00281                 move\_state.state\_time\_speed.clear();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00282}00282                 move\_state.state\_time\_speed.push\_front(cur\_event);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00283}00283             \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00284}00284            }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00285}00285         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00286}00286         }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00287}00287         \textcolor{keywordflow}{for} ( \textcolor{keyword}{const} \textcolor{keyword}{auto} \&phase\_2\_signal\_group : phase\_number\_to\_signal\_group ) \{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00288}00288             \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a01285f8060241eec1adbaa0c5e97a1df}{update\_movement\_state}}(spat\_data, phase\_2\_signal\_group.second, phase\_2\_signal\_group.first);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00289}00289         \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00290}00290     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00291}00291 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00292}\mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{00292}}     uint16\_t \mbox{\hyperlink{structsignal__phase__and__timing_1_1intersection__state_a7f3126c08963787918c8d007255b4193}{intersection\_state::convert\_offset}}( \textcolor{keyword}{const} uint16\_t offset\_tenths\_of\_seconds)\textcolor{keyword}{  const}\{}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00293}00293         \textcolor{comment}{// Convert tenths of seconds to milliseconds}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00294}00294         \textcolor{keywordtype}{int} offset\_ms = offset\_tenths\_of\_seconds * 100;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00296}00296         std::chrono::system\_clock::time\_point nowTimePoint = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00297}00297         std::chrono::system\_clock::time\_point nowPlusOffsetTimePoint = nowTimePoint +  std::chrono::milliseconds(offset\_ms);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00298}00298 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00299}00299         std::chrono::system\_clock::duration tp = nowPlusOffsetTimePoint.time\_since\_epoch();}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00300}00300 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00301}00301         std::chrono::hours h =  std::chrono::duration\_cast<std::chrono::hours>(tp);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00302}00302         tp -\/= h;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00303}00303 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00304}00304         std::chrono::minutes \mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}} =  std::chrono::duration\_cast<std::chrono::minutes>(tp);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00305}00305         tp -\/= \mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}};}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00306}00306 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00307}00307         std::chrono::seconds s =  std::chrono::duration\_cast<std::chrono::seconds>(tp);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00308}00308         tp -\/= s;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00310}00310         std::chrono::milliseconds ms = std::chrono::duration\_cast<std::chrono::milliseconds>(tp);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00311}00311 }
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00312}00312         \textcolor{keywordtype}{double} fractionSeconds = ((double)s.count()) + ((\textcolor{keywordtype}{double})ms.count()/1000.0);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00313}00313         \textcolor{keywordtype}{double} retTimeD = ((double)(\mbox{\hyperlink{namespaceconf_a6e236bdca26a4db264a4daba8b82644d}{m}}.count() * 60) + fractionSeconds) * 10.0;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00314}00314         SPDLOG\_TRACE(\textcolor{stringliteral}{"{}Converted offset \{0\} to \{1\}"{}}, offset\_tenths\_of\_seconds, retTimeD);}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00315}00315         \textcolor{keywordflow}{return} (uint16\_t) retTimeD;}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00316}00316     \}}
\DoxyCodeLine{\Hypertarget{intersection__state_8cpp_source_l00317}00317 \}}

\end{DoxyCode}
