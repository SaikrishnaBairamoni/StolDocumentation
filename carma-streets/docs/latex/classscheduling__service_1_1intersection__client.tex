\hypertarget{classscheduling__service_1_1intersection__client}{}\doxysection{scheduling\+\_\+service\+::intersection\+\_\+client Class Reference}
\label{classscheduling__service_1_1intersection__client}\index{scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}}


{\ttfamily \#include $<$intersection\+\_\+client.\+h$>$}



Inheritance diagram for scheduling\+\_\+service\+::intersection\+\_\+client\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{classscheduling__service_1_1intersection__client__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for scheduling\+\_\+service\+::intersection\+\_\+client\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=285pt]{classscheduling__service_1_1intersection__client__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classscheduling__service_1_1intersection__client_ac510cca78365a620384ff9faeaad572f}{update\+\_\+intersection\+\_\+info}} (const int sleep\+\_\+millisecs, const int int\+\_\+client\+\_\+request\+\_\+attempts)
\begin{DoxyCompactList}\small\item\em Updating the intersection info. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a}{request\+\_\+intersection\+\_\+info}} ()
\begin{DoxyCompactList}\small\item\em Send http GET request to intersection model at rate of configured HZ until it gets the intersection info. \end{DoxyCompactList}\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \mbox{\hyperlink{classscheduling__service_1_1intersection__client_ad3f7253d9f88279fde9ae9eeb2552459}{get\+\_\+intersection\+\_\+info}} () const
\begin{DoxyCompactList}\small\item\em Get the intersection info object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \mbox{\hyperlink{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}{intersection\+\_\+info\+\_\+ptr}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source_l00017}{17}} of file \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source}{intersection\+\_\+client.\+h}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classscheduling__service_1_1intersection__client_ad3f7253d9f88279fde9ae9eeb2552459}\label{classscheduling__service_1_1intersection__client_ad3f7253d9f88279fde9ae9eeb2552459}} 
\index{scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}!get\_intersection\_info@{get\_intersection\_info}}
\index{get\_intersection\_info@{get\_intersection\_info}!scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}}
\doxysubsubsection{\texorpdfstring{get\_intersection\_info()}{get\_intersection\_info()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ intersection\+\_\+client\+::get\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the intersection info object. 

\begin{DoxyReturn}{Returns}
std\+::shared\+\_\+ptr$<$\+Open\+API\+::\+OAIIntersection\+\_\+info$>$ 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00066}{66}} of file \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source}{intersection\+\_\+client.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00067     \{}
\DoxyCodeLine{00068         \textcolor{keywordflow}{return} \mbox{\hyperlink{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}{intersection\_info\_ptr}};}
\DoxyCodeLine{00069     \}}

\end{DoxyCode}


References \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source_l00021}{intersection\+\_\+info\+\_\+ptr}}.

\mbox{\Hypertarget{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a}\label{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a}} 
\index{scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}!request\_intersection\_info@{request\_intersection\_info}}
\index{request\_intersection\_info@{request\_intersection\_info}!scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}}
\doxysubsubsection{\texorpdfstring{request\_intersection\_info()}{request\_intersection\_info()}}
{\footnotesize\ttfamily bool intersection\+\_\+client\+::request\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Send http GET request to intersection model at rate of configured HZ until it gets the intersection info. 

\begin{DoxyReturn}{Returns}
true if intersection information is updated. 

false if intersection information is not updated. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00028}{28}} of file \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source}{intersection\+\_\+client.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00029     \{}
\DoxyCodeLine{00030         \textcolor{keywordtype}{bool} intersection\_info\_valid = \textcolor{keyword}{false};}
\DoxyCodeLine{00031         \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi}{OpenAPI::OAIDefaultApi}} apiInstance;}
\DoxyCodeLine{00032         QEventLoop loop;}
\DoxyCodeLine{00033         \textcolor{comment}{// Lambda expression slot for get intersection information signal ( See Qt Signal/Slot documentation)}}
\DoxyCodeLine{00034         connect(\&apiInstance, \&\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a1d28886ea13c3f1818c0477fe309f9fd}{OpenAPI::OAIDefaultApi::getIntersectionInfoSignal}}, [\&intersection\_info\_valid, \&loop, \textcolor{keyword}{this}]}
\DoxyCodeLine{00035             (\textcolor{keyword}{const} \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{OpenAPI::OAIIntersection\_info}} \&int\_info)\{     }
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037             SPDLOG\_INFO(\textcolor{stringliteral}{"{}request\_intersection\_info succeed!"{}});}
\DoxyCodeLine{00038             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}intersection name: \{0\}"{}}, int\_info.\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info_acace7999c0bb220673f9306ee7de4860}{getName}}().toStdString());}
\DoxyCodeLine{00039             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}intersection id: \{0\}"{}}, int\_info.\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info_adf6e28ef3d4823f3d591c5793b28015e}{getId}}());}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041             \mbox{\hyperlink{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}{intersection\_info\_ptr}} = std::make\_shared<OpenAPI::OAIIntersection\_info>(int\_info);}
\DoxyCodeLine{00042             intersection\_info\_valid = \textcolor{keyword}{true};}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044             loop.quit(); }
\DoxyCodeLine{00045         \});}
\DoxyCodeLine{00046         \textcolor{comment}{// Lambda expression slot for get intersection information error signal ( See Qt Signal/Slot documentation)}}
\DoxyCodeLine{00047         connect(\&apiInstance, \&\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a115becc3a08d245dc8591b7d263497d1}{OpenAPI::OAIDefaultApi::getIntersectionInfoSignalE}}, }
\DoxyCodeLine{00048             [\&intersection\_info\_valid, \&loop, \textcolor{keyword}{this}]}
\DoxyCodeLine{00049                 ( [[maybe\_unused]] \textcolor{keyword}{const} \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{OpenAPI::OAIIntersection\_info}} \&int\_info, QNetworkReply::NetworkError error, QString error\_str )\{ }
\DoxyCodeLine{00050             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Error happened while issuing intersection model GET information request : \{0\} code : \{1\}"{}},  error\_str.toStdString(), error);}
\DoxyCodeLine{00051             intersection\_info\_valid = \textcolor{keyword}{false};}
\DoxyCodeLine{00052             \mbox{\hyperlink{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}{intersection\_info\_ptr}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00053             loop.quit(); }
\DoxyCodeLine{00054         \});}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056         apiInstance.\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a682ffe8581eaecb7e32df4d3c66b6762}{getIntersectionInfo}}();}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058         QTimer::singleShot(5000, \&loop, \&QEventLoop::quit);}
\DoxyCodeLine{00059         loop.exec();}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Done with request\_intersection\_info"{}});}
\DoxyCodeLine{00062         \textcolor{keywordflow}{return} intersection\_info\_valid;}
\DoxyCodeLine{00063     \}}

\end{DoxyCode}


References \mbox{\hyperlink{intersection__client__api_2OAIIntersection__info_8cpp_source_l00104}{Open\+API\+::\+OAIIntersection\+\_\+info\+::get\+Id()}}, \mbox{\hyperlink{OAIDefaultApi_8cpp_source_l00295}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info()}}, \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a1d28886ea13c3f1818c0477fe309f9fd}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info\+Signal()}}, \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a115becc3a08d245dc8591b7d263497d1}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info\+Signal\+E()}}, \mbox{\hyperlink{intersection__client__api_2OAIIntersection__info_8cpp_source_l00120}{Open\+API\+::\+OAIIntersection\+\_\+info\+::get\+Name()}}, and \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source_l00021}{intersection\+\_\+info\+\_\+ptr}}.



Referenced by \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00006}{update\+\_\+intersection\+\_\+info()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classscheduling__service_1_1intersection__client_ac510cca78365a620384ff9faeaad572f}\label{classscheduling__service_1_1intersection__client_ac510cca78365a620384ff9faeaad572f}} 
\index{scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}!update\_intersection\_info@{update\_intersection\_info}}
\index{update\_intersection\_info@{update\_intersection\_info}!scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}}
\doxysubsubsection{\texorpdfstring{update\_intersection\_info()}{update\_intersection\_info()}}
{\footnotesize\ttfamily bool intersection\+\_\+client\+::update\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}\item[{const int}]{sleep\+\_\+millisecs,  }\item[{const int}]{int\+\_\+client\+\_\+request\+\_\+attempts }\end{DoxyParamCaption})}



Updating the intersection info. 


\begin{DoxyParams}{Parameters}
{\em sleep\+\_\+millisecs} & The current thread sleep for milliseconds after each update attempt. \\
\hline
{\em int\+\_\+client\+\_\+request\+\_\+attempts} & The number of attempts for the loop. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean. True if intersection information is updated, otherwise failed to update intersection information. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00006}{6}} of file \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source}{intersection\+\_\+client.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00007     \{}
\DoxyCodeLine{00008         \textcolor{keyword}{auto} sleep\_secs = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}(sleep\_millisecs);}
\DoxyCodeLine{00009         \textcolor{keywordtype}{int} attempt\_count = 0;}
\DoxyCodeLine{00010         \textcolor{keywordflow}{while} (attempt\_count < int\_client\_request\_attempts)}
\DoxyCodeLine{00011         \{   }
\DoxyCodeLine{00012             \textcolor{comment}{// Send HTTP request, and update intersection information. If updated successfully, it returns true and exit the while loop.}}
\DoxyCodeLine{00013             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classscheduling__service_1_1intersection__client_ad6bd9f3f48ee4e352798f418b88b730a}{request\_intersection\_info}}())}
\DoxyCodeLine{00014             \{}
\DoxyCodeLine{00015                 SPDLOG\_INFO(\textcolor{stringliteral}{"{}Intersection information is updated successfuly! "{}});}
\DoxyCodeLine{00016                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00017             \}}
\DoxyCodeLine{00018             \textcolor{comment}{// sleep takes seconds}}
\DoxyCodeLine{00019             std::this\_thread::sleep\_for(std::chrono::milliseconds(sleep\_secs));}
\DoxyCodeLine{00020             attempt\_count++;}
\DoxyCodeLine{00021         \}}
\DoxyCodeLine{00022         \textcolor{comment}{// If failed to update the intersection information after certain numbers of attempts}}
\DoxyCodeLine{00023         SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Updating Intersection information failed. "{}});}
\DoxyCodeLine{00024         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00025     \}}

\end{DoxyCode}


References \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00028}{request\+\_\+intersection\+\_\+info()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classscheduling__service_1_1intersection__client_ac510cca78365a620384ff9faeaad572f_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}\label{classscheduling__service_1_1intersection__client_af101024f9f717f0afdfc385c2d1799a5}} 
\index{scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}!intersection\_info\_ptr@{intersection\_info\_ptr}}
\index{intersection\_info\_ptr@{intersection\_info\_ptr}!scheduling\_service::intersection\_client@{scheduling\_service::intersection\_client}}
\doxysubsubsection{\texorpdfstring{intersection\_info\_ptr}{intersection\_info\_ptr}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}}$>$ scheduling\+\_\+service\+::intersection\+\_\+client\+::intersection\+\_\+info\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source_l00021}{21}} of file \mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h_source}{intersection\+\_\+client.\+h}}.



Referenced by \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00066}{get\+\_\+intersection\+\_\+info()}}, and \mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp_source_l00028}{request\+\_\+intersection\+\_\+info()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
scheduling\+\_\+service/include/\mbox{\hyperlink{scheduling__service_2include_2intersection__client_8h}{intersection\+\_\+client.\+h}}\item 
scheduling\+\_\+service/src/\mbox{\hyperlink{scheduling__service_2src_2intersection__client_8cpp}{intersection\+\_\+client.\+cpp}}\end{DoxyCompactItemize}
