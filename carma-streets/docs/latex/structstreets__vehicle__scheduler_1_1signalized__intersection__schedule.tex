\hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule}{}\doxysection{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule Struct Reference}
\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule}\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}


Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in milliseconds since epoch.  




{\ttfamily \#include $<$signalized\+\_\+intersection\+\_\+schedule.\+h$>$}



Inheritance diagram for streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a935f5bf59947698a004ee70500e7e774}{signalized\+\_\+intersection\+\_\+schedule}} ()=default
\begin{DoxyCompactList}\small\item\em Construct a new signalized intersection schedule object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a94ac63646f7c6e459dab3ba3a9548274}{$\sim$signalized\+\_\+intersection\+\_\+schedule}} () override=default
\begin{DoxyCompactList}\small\item\em Destroy the signalized intersection schedule object. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7}{to\+CSV}} () const override
\begin{DoxyCompactList}\small\item\em Method to turn schedule into CSV string. Each vehicle schedule is represented by a single row and all rows for a given schedule share a timestamp. The values in each row represent the following properties\+: \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a7afc1e1bcb2229d598de2be93b253a80}{to\+Json}} () const override
\begin{DoxyCompactList}\small\item\em Method to write intersection schedule as JSON scheduling message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule}{signalized\+\_\+vehicle\+\_\+schedule}} $>$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}{vehicle\+\_\+schedules}}
\begin{DoxyCompactList}\small\item\em Vector of all scheduled vehicles. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Struct to store vehicle schedules for all vehicle in an intersection. Includes a timestamp in milliseconds since epoch. 

Definition at line \mbox{\hyperlink{signalized__intersection__schedule_8h_source_l00058}{58}} of file \mbox{\hyperlink{signalized__intersection__schedule_8h_source}{signalized\+\_\+intersection\+\_\+schedule.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a935f5bf59947698a004ee70500e7e774}\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a935f5bf59947698a004ee70500e7e774}} 
\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}!signalized\_intersection\_schedule@{signalized\_intersection\_schedule}}
\index{signalized\_intersection\_schedule@{signalized\_intersection\_schedule}!streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}
\doxysubsubsection{\texorpdfstring{signalized\_intersection\_schedule()}{signalized\_intersection\_schedule()}}
{\footnotesize\ttfamily streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+::signalized\+\_\+intersection\+\_\+schedule (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



Construct a new signalized intersection schedule object. 

\mbox{\Hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a94ac63646f7c6e459dab3ba3a9548274}\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a94ac63646f7c6e459dab3ba3a9548274}} 
\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}!````~signalized\_intersection\_schedule@{$\sim$signalized\_intersection\_schedule}}
\index{````~signalized\_intersection\_schedule@{$\sim$signalized\_intersection\_schedule}!streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}
\doxysubsubsection{\texorpdfstring{$\sim$signalized\_intersection\_schedule()}{~signalized\_intersection\_schedule()}}
{\footnotesize\ttfamily streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+::$\sim$signalized\+\_\+intersection\+\_\+schedule (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [default]}}



Destroy the signalized intersection schedule object. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7}\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7}} 
\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}!toCSV@{toCSV}}
\index{toCSV@{toCSV}!streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}
\doxysubsubsection{\texorpdfstring{toCSV()}{toCSV()}}
{\footnotesize\ttfamily std\+::string streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+::to\+CSV (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Method to turn schedule into CSV string. Each vehicle schedule is represented by a single row and all rows for a given schedule share a timestamp. The values in each row represent the following properties\+: 

timestamp ,v\+\_\+id ,entry\+\_\+lane ,link\+\_\+id ,eet ,et, state

\begin{DoxyReturn}{Returns}
std\+::string CSV entry 
\end{DoxyReturn}


Implements \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_af027b201909e9d003c961d054edb623f}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule}}.



Definition at line \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source_l00006}{6}} of file \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source}{signalized\+\_\+intersection\+\_\+schedule.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00006                                                             \{}
\DoxyCodeLine{00007     }
\DoxyCodeLine{00008         std::string schedule\_info = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00009         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&sched : \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}{vehicle\_schedules}} )\{}
\DoxyCodeLine{00010             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00011             schedule\_info += sched.v\_id + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00012             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.entry\_lane) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00013             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.link\_id) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00014             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.eet) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00015             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.et) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00016             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.dt) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{00017             \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\_vehicles::vehicle\_state::EV}}) \{}
\DoxyCodeLine{00018                 schedule\_info += \textcolor{stringliteral}{"{}EV"{}};}
\DoxyCodeLine{00019             \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{streets\_vehicles::vehicle\_state::DV}}) \{}
\DoxyCodeLine{00020                 schedule\_info += \textcolor{stringliteral}{"{}DV"{}};}
\DoxyCodeLine{00021             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00022                 schedule\_info += \textcolor{stringliteral}{"{}ND"{}};}
\DoxyCodeLine{00023             \}}
\DoxyCodeLine{00024             schedule\_info += \textcolor{stringliteral}{"{}\(\backslash\)n"{}};  }
\DoxyCodeLine{00025         \}}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027         \textcolor{keywordflow}{return} schedule\_info;}
\DoxyCodeLine{00028     \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{streets\+\_\+vehicles\+::\+DV}}, \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\+\_\+vehicles\+::\+EV}}, \mbox{\hyperlink{intersection__schedule_8h_source_l00067}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule\+::timestamp}}, \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{to\+\_\+string()}}, and \mbox{\hyperlink{signalized__intersection__schedule_8h_source_l00072}{vehicle\+\_\+schedules}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_ab70810eba625236eb7b706dd72fb3dc7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a7afc1e1bcb2229d598de2be93b253a80}\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a7afc1e1bcb2229d598de2be93b253a80}} 
\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}!toJson@{toJson}}
\index{toJson@{toJson}!streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}
\doxysubsubsection{\texorpdfstring{toJson()}{toJson()}}
{\footnotesize\ttfamily std\+::string streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+::to\+Json (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Method to write intersection schedule as JSON scheduling message. 

\begin{DoxyReturn}{Returns}
std\+::string\& reference. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_abf2990ad805708f9aa0e8c24b4c76be8}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule}}.



Definition at line \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source_l00030}{30}} of file \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source}{signalized\+\_\+intersection\+\_\+schedule.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030                                                              \{}
\DoxyCodeLine{00031         }
\DoxyCodeLine{00032         rapidjson::Document doc;}
\DoxyCodeLine{00033         doc.SetObject();}
\DoxyCodeLine{00034         rapidjson::Document::AllocatorType \&allocator = doc.GetAllocator();}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036         rapidjson::Value metadata(rapidjson::kObjectType);}
\DoxyCodeLine{00037         metadata.AddMember(\textcolor{stringliteral}{"{}timestamp"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}, allocator);}
\DoxyCodeLine{00038         metadata.AddMember(\textcolor{stringliteral}{"{}intersection\_type"{}}, \textcolor{stringliteral}{"{}Carma/signalized\_intersection"{}}, allocator);}
\DoxyCodeLine{00039         doc.AddMember(\textcolor{stringliteral}{"{}metadata"{}}, metadata, allocator);}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041         rapidjson::Value json\_sched(rapidjson::kArrayType);}
\DoxyCodeLine{00042         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&veh\_sched: \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}{vehicle\_schedules}} ) \{}
\DoxyCodeLine{00043             \textcolor{keywordflow}{if} (veh\_sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\_vehicles::vehicle\_state::EV}}) \{}
\DoxyCodeLine{00044                 json\_sched.PushBack(veh\_sched.toJson(allocator), allocator);}
\DoxyCodeLine{00045             \}}
\DoxyCodeLine{00046         \}}
\DoxyCodeLine{00047         doc.AddMember(\textcolor{stringliteral}{"{}payload"{}}, json\_sched, allocator);}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049         rapidjson::StringBuffer buffer;                }
\DoxyCodeLine{00050         rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);}
\DoxyCodeLine{00051         doc.Accept(writer);}
\DoxyCodeLine{00052         std::string string\_sched = buffer.GetString();}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054         \textcolor{keywordflow}{return} string\_sched;}
\DoxyCodeLine{00055     \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\+\_\+vehicles\+::\+EV}}, \mbox{\hyperlink{intersection__schedule_8h_source_l00067}{streets\+\_\+vehicle\+\_\+scheduler\+::intersection\+\_\+schedule\+::timestamp}}, and \mbox{\hyperlink{signalized__intersection__schedule_8h_source_l00072}{vehicle\+\_\+schedules}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}\label{structstreets__vehicle__scheduler_1_1signalized__intersection__schedule_a3b09d9fc484f0294af2f7ae4fe7b195b}} 
\index{streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}!vehicle\_schedules@{vehicle\_schedules}}
\index{vehicle\_schedules@{vehicle\_schedules}!streets\_vehicle\_scheduler::signalized\_intersection\_schedule@{streets\_vehicle\_scheduler::signalized\_intersection\_schedule}}
\doxysubsubsection{\texorpdfstring{vehicle\_schedules}{vehicle\_schedules}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1signalized__vehicle__schedule}{signalized\+\_\+vehicle\+\_\+schedule}}$>$ streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+intersection\+\_\+schedule\+::vehicle\+\_\+schedules}



Vector of all scheduled vehicles. 



Definition at line \mbox{\hyperlink{signalized__intersection__schedule_8h_source_l00072}{72}} of file \mbox{\hyperlink{signalized__intersection__schedule_8h_source}{signalized\+\_\+intersection\+\_\+schedule.\+h}}.



Referenced by \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source_l00006}{to\+CSV()}}, and \mbox{\hyperlink{signalized__intersection__schedule_8cpp_source_l00030}{to\+Json()}}.



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
streets\+\_\+utils/streets\+\_\+vehicle\+\_\+scheduler/include/\mbox{\hyperlink{signalized__intersection__schedule_8h}{signalized\+\_\+intersection\+\_\+schedule.\+h}}\item 
streets\+\_\+utils/streets\+\_\+vehicle\+\_\+scheduler/src/\mbox{\hyperlink{signalized__intersection__schedule_8cpp}{signalized\+\_\+intersection\+\_\+schedule.\+cpp}}\end{DoxyCompactItemize}
