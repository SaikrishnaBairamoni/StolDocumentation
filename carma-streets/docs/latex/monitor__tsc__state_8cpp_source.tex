\hypertarget{monitor__tsc__state_8cpp_source}{}\doxysection{monitor\+\_\+tsc\+\_\+state.\+cpp}
\label{monitor__tsc__state_8cpp_source}\index{tsc\_client\_service/src/monitor\_tsc\_state.cpp@{tsc\_client\_service/src/monitor\_tsc\_state.cpp}}
\mbox{\hyperlink{monitor__tsc__state_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{monitor__tsc__state_8h}{monitor\_tsc\_state.h}}"{}}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetraffic__signal__controller__service}{traffic\_signal\_controller\_service}}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00005}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_aedb4290f73cd4cfd58b04e1e05969781}{00005}}     \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_aedb4290f73cd4cfd58b04e1e05969781}{tsc\_state::tsc\_state}}(std::shared\_ptr<snmp\_client> \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client}{snmp\_client}}) : snmp\_client\_worker\_(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client}{snmp\_client}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00006}00006     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00007}00007         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00008}00008     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00010}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b}{00010}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b}{tsc\_state::initialize}}() \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00011}00011         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00012}00012             \textcolor{comment}{// Map signal group ids and phase nums}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00013}00013             \textcolor{comment}{//Get phase number given a signal group id}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00014}00014             \textcolor{keywordtype}{int} max\_channels\_in\_tsc = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3}{get\_max\_channels}}();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00015}00015             std::vector<int> vehicle\_phase\_channels;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00016}00016             std::vector<int> ped\_phase\_channels;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00017}00017             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988}{get\_phase\_channels}}(max\_channels\_in\_tsc, vehicle\_phase\_channels, ped\_phase\_channels);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00018}00018             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb}{map\_phase\_and\_signalgroup}}(vehicle\_phase\_channels, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00019}00019             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb}{map\_phase\_and\_signalgroup}}(ped\_phase\_channels, \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00020}00020             \textcolor{comment}{// Get phase sequences for ring 1 and ring 2}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00021}00021             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}}(1);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00022}00022             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}}(2);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00024}00024             \textcolor{comment}{// Define state of each signal group}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00025}00025             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& signal\_group : \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a5589bc2137028ff1c1b7ec39bf360fb0}{signal\_group\_phase\_map\_}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00026}00026             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00027}00027                 \textcolor{keywordtype}{int} phase\_num = signal\_group.second;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00028}00028                 \mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state}{signal\_group\_state}} state;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00029}00029                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a9982a853e822adeee5424ebda0d5548e}{phase\_num}} = phase\_num;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00030}00030                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a7c0a8253511ca12a99c589dd95b72b43}{max\_green}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8}{get\_max\_green}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00031}00031                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_abb5d1fe463d7e32c9f280871bbef7439}{min\_green}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c}{get\_min\_green}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00032}00032                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a707dce158ff68e9423f629ed30bf6bb2}{yellow\_duration}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925}{get\_yellow\_duration}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00033}00033                 \textcolor{comment}{// Define green duration as min/max as decided}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00034}00034                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_ae3e4af85583a78b43a845d9e26380e3e}{green\_duration}} = state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_abb5d1fe463d7e32c9f280871bbef7439}{min\_green}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00035}00035                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_addc356b7d64987269af4768bfba9c786}{red\_clearance}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750}{get\_red\_clearance}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00036}00036                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_abab493c06f5770610a6e0cbf2e69cf35}{phase\_seq}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7}{get\_following\_phases}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00037}00037                 state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a82ee7255c987cdb960972207b2aa59f7}{concurrent\_phases}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951}{get\_concurrent\_phases}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00038}00038                 \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}.insert(std::make\_pair(signal\_group.first, state));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00039}00039             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00041}00041         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00042}00042             \textcolor{comment}{// Loop through states once other state parameters are defined to get the red duration}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00043}00043             \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\& [signal\_group, state] : \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00044}00044             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00045}00045                 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00046}00046                 state.red\_duration = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b}{get\_red\_duration}}(state.phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00047}00047             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00048}00048             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00049}00049             \textcolor{comment}{// Print signal\_group map}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00050}00050             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [signal\_group, phase] : \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a5589bc2137028ff1c1b7ec39bf360fb0}{signal\_group\_phase\_map\_}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00051}00051             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00052}00052                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Signal group id: \{0\} phase: \{1\}"{}}, signal\_group, phase);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00053}00053             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00054}00054             \textcolor{comment}{// Print state map}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00055}00055             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [signal\_group, state] : \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00056}00056             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00057}00057                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Signal group id: \{0\}"{}}, signal\_group);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00058}00058                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Phase num: \{0\}"{}}, state.phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00059}00059                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Max green: \{0\}"{}}, state.max\_green);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00060}00060                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Min green: \{0\}"{}}, state.min\_green);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00061}00061                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Green Duration: \{0\}"{}}, state.green\_duration);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00062}00062                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}yellow duration: \{0\}"{}}, state.yellow\_duration);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00063}00063                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Red clearance: \{0\}"{}}, state.red\_clearance);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00064}00064                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Red duration: \{0\}"{}}, state.red\_duration);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00066}00066                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Phase sequence:"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00067}00067                 \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} phase : state.phase\_seq)\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00068}00068                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}\{0\}"{}}, phase);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00069}00069                 \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00071}00071                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Concurrent Phases:"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00072}00072                 \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} phase : state.concurrent\_phases)\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00073}00073                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}\{0\}"{}}, phase);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00074}00074                 \}  }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00075}00075             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00076}00076             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00077}00077         \}\textcolor{keywordflow}{catch} ( \textcolor{keyword}{const} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}} \&e ) \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00078}00078             SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Exception encounters during initialization: \(\backslash\)n \{0\}"{}},e.what());}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00079}00079             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00080}00080         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00081}00081     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00083}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e}{00083}}     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{signal\_phase\_and\_timing::movement\_event}} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e}{tsc\_state::get\_following\_event}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{signal\_phase\_and\_timing::movement\_event}}\& current\_event,}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00084}00084                                                                  uint64\_t current\_event\_end\_time, \textcolor{keyword}{const} \mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state}{signal\_group\_state}}\& phase\_state)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00085}00085 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00086}00086         \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{signal\_phase\_and\_timing::movement\_event}} next\_event;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00087}00087         \textcolor{keywordflow}{switch} (current\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}})\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00088}00088             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_movement\_allowed}}: \textcolor{comment}{//Green}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00089}00089                 \textcolor{comment}{// Create next movement -\/ yellow}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00090}00090                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_clearance}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00091}00091                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00092}00092                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a707dce158ff68e9423f629ed30bf6bb2}{yellow\_duration}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00093}00093                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00095}00095             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_clearance}}: \textcolor{comment}{//Yellow}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00096}00096                 \textcolor{comment}{// Create next movement -\/ red}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00097}00097                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{signal\_phase\_and\_timing::movement\_phase\_state::stop\_and\_remain}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00098}00098                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time); }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00099}00099                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a5ac59f3017aa70843c316a1355a4330e}{red\_duration}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00100}00100                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00102}00102             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{signal\_phase\_and\_timing::movement\_phase\_state::stop\_and\_remain}}:  \textcolor{comment}{//Red}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00103}00103                 \textcolor{comment}{// Create next movement -\/ green}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00104}00104                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}} = \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_movement\_allowed}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00105}00105                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_aa43eafdf46377a5743e82b5be8ce3133}{start\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00106}00106                 next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}} = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_ae3e4af85583a78b43a845d9e26380e3e}{green\_duration}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00107}00107                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00109}00109             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00110}00110                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}This movement phase is not supported. Movement phase type: \{0\}"{}}, \textcolor{keywordtype}{int}(current\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}}));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00111}00111                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}Failed request for unsupported movement phase type: "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\textcolor{keywordtype}{int}(current\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}})));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00112}00112         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00113}00113         next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_a1c9501b5a44c66a178b8753db439a753}{max\_end\_time}} = next\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00114}00114         \textcolor{keywordflow}{return} next\_event;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00115}00115     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00117}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd}{00117}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd}{tsc\_state::add\_future\_movement\_events}}(std::shared\_ptr<signal\_phase\_and\_timing::spat> spat\_ptr)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00118}00118     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00119}00119         \textcolor{comment}{// Modify spat according to phase configuration}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00120}00120         \textcolor{comment}{// Note: Only first intersection is populated}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00121}00121         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} movement : spat\_ptr-\/>intersections.front().states)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00122}00122         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00123}00123             \textcolor{keywordtype}{int} signal\_group\_id = movement.signal\_group;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00124}00124 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00125}00125             \textcolor{comment}{// Assumption here is that the movement states have only one event, since this method adds future events to the list.}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00126}00126             \textcolor{comment}{//Throw exception is list size is great than 1}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00127}00127             \textcolor{keywordflow}{if} (movement.state\_time\_speed.size() > 1)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00128}00128             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00129}00129                 SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Event list has more than one events, not usable when adding future movement events. Associated with Signal Group: \{0\}"{}}, signal\_group\_id);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00130}00130                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1monitor__states__exception}{monitor\_states\_exception}}(\textcolor{stringliteral}{"{}Event list has more than one events, not usable when adding future movement events. Associated with Signal Group:"{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(signal\_group\_id));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00131}00131             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00132}00132 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00133}00133             \textcolor{comment}{// Get movement\_state by reference}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00134}00134             \textcolor{keyword}{auto}\& current\_movement = spat\_ptr-\/>intersections.front().get\_movement(signal\_group\_id);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00136}00136             \textcolor{comment}{// Get start time as epoch time}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00137}00137             uint64\_t start\_time = movement.state\_time\_speed.front().timing.get\_epoch\_start\_time();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00138}00138             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00139}00139             \textcolor{comment}{// Check if signal\_group\_id is associated with a vehicle phase : Only vehicle phases mapped to signal\_group\_states}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00140}00140             \mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state}{signal\_group\_state}} phase\_state;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00141}00141             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}.find(signal\_group\_id) == \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}.end())\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00142}00142                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00143}00143             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00144}00144             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00145}00145             phase\_state = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}[signal\_group\_id];}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00146}00146 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00147}00147             uint64\_t current\_event\_end\_time\_epoch = 0;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00148}00148             \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{signal\_phase\_and\_timing::movement\_event}} current\_event = current\_movement.state\_time\_speed.front();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00149}00149 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00150}00150             \textcolor{keywordflow}{switch}(current\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6915afd2a08ca17039c92830ee633a30}{event\_state}})\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00151}00151                 \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa}{signal\_phase\_and\_timing::movement\_phase\_state::stop\_and\_remain}} : \textcolor{comment}{//Red}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00152}00152                     current\_event\_end\_time\_epoch = start\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a5ac59f3017aa70843c316a1355a4330e}{red\_duration}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00153}00153                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00154}00154 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00155}00155                 \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_movement\_allowed}} : \textcolor{comment}{//Green}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00156}00156                     current\_event\_end\_time\_epoch = start\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_ae3e4af85583a78b43a845d9e26380e3e}{green\_duration}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00157}00157                     \textcolor{keywordflow}{break};                                                                }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00159}00159                 \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacesignal__phase__and__timing_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc}{signal\_phase\_and\_timing::movement\_phase\_state::protected\_clearance}} : \textcolor{comment}{//Yellow}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00160}00160                     current\_event\_end\_time\_epoch = start\_time + phase\_state.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1signal__group__state_a707dce158ff68e9423f629ed30bf6bb2}{yellow\_duration}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00161}00161                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00163}00163                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00164}00164                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}This movement phase is not supported. Movement phase type: \{0\}"{}}, \textcolor{keywordtype}{int}(current\_movement.state\_time\_speed.front().event\_state));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00165}00165                     \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1monitor__states__exception}{monitor\_states\_exception}}(\textcolor{stringliteral}{"{}This movement phase is not supported. Movement phase type: "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\textcolor{keywordtype}{int}(current\_movement.state\_time\_speed.front().event\_state)));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00166}00166             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00167}00167             \textcolor{comment}{// Update end\_time for current\_event}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00168}00168             current\_movement.state\_time\_speed.front().timing.min\_end\_time = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{convert\_msepoch\_to\_hour\_tenth\_secs}}(current\_event\_end\_time\_epoch);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00169}00169             current\_movement.state\_time\_speed.front().timing.max\_end\_time = current\_movement.state\_time\_speed.front().timing.min\_end\_time;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00171}00171             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} = 0; \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} < \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ace2712eeb290c972b3ead1c4ee7e7744}{required\_following\_movements\_}}; ++\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00172}00172             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00173}00173                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{signal\_phase\_and\_timing::movement\_event}} next\_event = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e}{get\_following\_event}}(current\_event, current\_event\_end\_time\_epoch, phase\_state);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00174}00174                 current\_event = next\_event;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00175}00175                 current\_event\_end\_time\_epoch = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a}{convert\_hour\_tenth\_secs2epoch\_ts}}(current\_event.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a6250e85c7ca1b039806b6326812648d3}{timing}}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1time__change__details_ad39cfa60daafb321241d3a00fea563e5}{min\_end\_time}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00176}00176                 \textcolor{comment}{//Add events to list}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00177}00177                 current\_movement.state\_time\_speed.push\_back(next\_event);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00178}00178             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00179}00179             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00180}00180         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00181}00181         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00182}00182     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00183}00183 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00184}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7}{00184}}     std::vector<int> \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7}{tsc\_state::get\_following\_phases}}(\textcolor{keywordtype}{int} phase\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00185}00185     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00186}00186         std::vector<int> sequence;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00187}00187 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00188}00188         \textcolor{comment}{// Add phase sequence to signal group state}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00189}00189         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} = 0; \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} < \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}.size();++\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00190}00190         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00191}00191             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}[\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}] == phase\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00192}00192             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00193}00193                 sequence.insert(sequence.begin(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}.begin() + \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}, \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}.end());}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00194}00194                 sequence.insert(sequence.end(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}.begin(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a1f7c1e663e2b2e41e1d3cfb902208add}{phase\_seq\_ring1\_}}.begin() + \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00195}00195 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00196}00196                 \textcolor{keywordflow}{return} sequence; }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00197}00197             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00198}00198         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00199}00199 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00200}00200         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} = 0; \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} < \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}.size();++\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00201}00201         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00202}00202             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}[\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}] == phase\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00203}00203             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00204}00204                 sequence.insert(sequence.begin(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}.begin() + \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}, \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}.end());}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00205}00205                 sequence.insert(sequence.end(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}.begin(), \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73756e2d00260dfccd9838cf147bf823}{phase\_seq\_ring2\_}}.begin() + \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00206}00206 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00207}00207                 \textcolor{keywordflow}{return} sequence; }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00208}00208             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00209}00209         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00210}00210         \textcolor{comment}{// No following phase information found}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00211}00211         \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}No following phases found"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00212}00212     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00213}00213 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00214}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3}{00214}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3}{tsc\_state::get\_max\_channels}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00215}00215         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00216}00216         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} max\_channels\_in\_tsc;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00217}00217         max\_channels\_in\_tsc.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00219}00219         \textcolor{keywordflow}{if}(!\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(\mbox{\hyperlink{namespacentcip__oids_a5e92b2d342b6fa23f9be040041b5d631}{ntcip\_oids::MAX\_CHANNELS}}, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, max\_channels\_in\_tsc))}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00220}00220         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00221}00221             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}Failed to get max channels!"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00222}00222         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00223}00223 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00224}00224         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) max\_channels\_in\_tsc.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00225}00225     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00227}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988}{00227}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988}{tsc\_state::get\_phase\_channels}}(\textcolor{keywordtype}{int} max\_channels, std::vector<int>\& vehicle\_phase\_channels, std::vector<int>\& ped\_phase\_channels)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00228}00228         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00229}00229         \textcolor{comment}{// Loop through channel control types and add channels with vehicle phase to list}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00230}00230         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} control\_type;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00231}00231         control\_type.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00232}00232         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00233}00233         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00234}00234         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} channel\_num = 1; channel\_num <= max\_channels; ++channel\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00235}00235         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00236}00236             std::string control\_type\_parameter\_oid = \mbox{\hyperlink{namespacentcip__oids_a9c039d3da352a48fe04ff8fd43014fec}{ntcip\_oids::CHANNEL\_CONTROL\_TYPE\_PARAMETER}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(channel\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00237}00237 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00238}00238             \textcolor{keywordflow}{if}(!\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(control\_type\_parameter\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, control\_type))}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00239}00239             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00240}00240                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}Failed to get channel control type"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00241}00241             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00243}00243             \textcolor{keywordflow}{if}(control\_type.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} == 2)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00244}00244             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00245}00245                 vehicle\_phase\_channels.push\_back(channel\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00246}00246             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00247}00247             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(control\_type.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} == 3)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00248}00248             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00249}00249                 ped\_phase\_channels.push\_back(channel\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00250}00250             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00251}00251 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00252}00252         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00253}00253 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00254}00254         \textcolor{keywordflow}{if}(vehicle\_phase\_channels.empty())\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00255}00255             SPDLOG\_WARN(\textcolor{stringliteral}{"{}Found no active vehicle phases"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00256}00256         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00257}00257         \textcolor{keywordflow}{if}(ped\_phase\_channels.empty())\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00258}00258             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Found no active ped phases"{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00259}00259         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00260}00260         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00261}00261         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Number of vehicle phase channels found: \{0\}"{}}, vehicle\_phase\_channels.size());}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00262}00262         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Number of ped phase channels found: \{0\}"{}}, ped\_phase\_channels.size());}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00263}00263         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00264}00264     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00265}00265 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00266}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb}{00266}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb}{tsc\_state::map\_phase\_and\_signalgroup}}(\textcolor{keyword}{const} std::vector<int>\& phase\_channels, \textcolor{keywordtype}{bool} is\_source\_vehicle\_channel)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00267}00267     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00268}00268         \textcolor{comment}{// According to NTCIP 1202 v03 documentation Signal Group ID in a SPAT message is the Channel Number from TSC}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00269}00269 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00270}00270         \textcolor{comment}{// Get phases associated with vehicle phase channels}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00271}00271         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00272}00272         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} channel : phase\_channels)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00273}00273         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00274}00274             \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} phase\_num;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00275}00275             phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00276}00276 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00277}00277             std::string control\_source\_parameter\_oid = \mbox{\hyperlink{namespacentcip__oids_adbf60170a7e456fe10c1b7ef1f84a262}{ntcip\_oids::CHANNEL\_CONTROL\_SOURCE\_PARAMETER}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(channel);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00278}00278             \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(control\_source\_parameter\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00280}00280             \textcolor{comment}{// According to NTCIP 1202 v03 returned value of 0 here would mean a phase is not associated with the channel}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00281}00281             \textcolor{keywordflow}{if}(phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} != 0)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00282}00282             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00283}00283                 \textcolor{keywordflow}{if}(is\_source\_vehicle\_channel)\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00284}00284                     \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.insert(std::make\_pair(phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}}, channel));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00285}00285                     \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a5589bc2137028ff1c1b7ec39bf360fb0}{signal\_group\_phase\_map\_}}.insert(std::make\_pair(channel, phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}}));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00286}00286                 \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00287}00287                 \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00288}00288                     \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a8f31ba52cf271dee1b6caec284f9103f}{ped\_phase\_num\_map\_}}.insert(std::make\_pair(phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}}, channel));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00289}00289                 \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00290}00290                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Found mapping between signal group: \{0\} and phase num: \{1\}"{}}, channel , phase\_num.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} );}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00291}00291             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00292}00292         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00293}00293         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00294}00294     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00296}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c}{00296}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c}{tsc\_state::get\_min\_green}}(\textcolor{keywordtype}{int} phase\_num)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00297}00297 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00298}00298         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00299}00299         std::string min\_green\_parameter\_oid = \mbox{\hyperlink{namespacentcip__oids_a90dca09384bbe13e3ee22c4ba9510079}{ntcip\_oids::MINIMUM\_GREEN}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00300}00300 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00301}00301         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} min\_green;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00302}00302         min\_green.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00303}00303 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00304}00304         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(min\_green\_parameter\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, min\_green);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00305}00305 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00306}00306         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) min\_green.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} * 1000; \textcolor{comment}{//Convert seconds to milliseconds}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00307}00307     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00308}00308 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00309}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8}{00309}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8}{tsc\_state::get\_max\_green}}(\textcolor{keywordtype}{int} phase\_num)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00310}00310 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00311}00311         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00312}00312 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00313}00313         std::string max\_green\_parameter\_oid = \mbox{\hyperlink{namespacentcip__oids_a4affb9d542bfdef8b1a3a2ef06941c7c}{ntcip\_oids::MAXIMUM\_GREEN}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00314}00314         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} max\_green;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00315}00315         max\_green.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00316}00316         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00317}00317         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(max\_green\_parameter\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, max\_green);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00318}00318 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00319}00319         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) max\_green.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} * 1000; \textcolor{comment}{//Convert seconds to milliseconds}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00320}00320     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00321}00321 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00322}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925}{00322}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925}{tsc\_state::get\_yellow\_duration}}(\textcolor{keywordtype}{int} phase\_num)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00323}00323 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00324}00324         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00325}00325         std::string yellow\_duration\_oid = \mbox{\hyperlink{namespacentcip__oids_a8af63441377ae9f0975ef2d6dc2c744e}{ntcip\_oids::YELLOW\_CHANGE\_PARAMETER}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00326}00326 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00327}00327         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} yellow\_duration;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00328}00328         yellow\_duration.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00329}00329         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00330}00330         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}} -\/>process\_snmp\_request(yellow\_duration\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, yellow\_duration);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00331}00331 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00332}00332         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) yellow\_duration.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} * 100; \textcolor{comment}{//Convert to milliseconds. NTCIP returned value is in tenths of seconds}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00333}00333     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00334}00334 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00335}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750}{00335}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750}{tsc\_state::get\_red\_clearance}}(\textcolor{keywordtype}{int} phase\_num)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00336}00336 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00337}00337         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} get\_request = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00338}00338         std::string red\_clearance\_oid = \mbox{\hyperlink{namespacentcip__oids_a3ea2c7de3db40c5169671e9c74083bba}{ntcip\_oids::RED\_CLEAR\_PARAMETER}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00339}00339 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00340}00340         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} red\_clearance;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00341}00341         red\_clearance.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c}{snmp\_response\_obj::response\_type::INTEGER}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00342}00342 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00343}00343         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(red\_clearance\_oid, get\_request, red\_clearance);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00344}00344 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00345}00345         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) red\_clearance.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_abbd5d90ba42fc8e1c7747f97b965da30}{val\_int}} * 100; \textcolor{comment}{//Convert to milliseconds. NTCIP returned value is in tenths of seconds}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00346}00346     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00347}00347 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00348}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b}{00348}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b}{tsc\_state::get\_red\_duration}}(\textcolor{keywordtype}{int} phase\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00349}00349     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00350}00350         \textcolor{comment}{//red duration is calculated as red\_clearance time for current phase + (green duration + yellow duration + red\_clearance) for other phases in sequence}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00351}00351 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00352}00352         \textcolor{comment}{// Find signal state associated with phase num}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00353}00353         \textcolor{keywordtype}{int} current\_signal\_group;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00354}00354         \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.find(phase\_num) != \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.end())}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00355}00355         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00356}00356             current\_signal\_group = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}[phase\_num];}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00357}00357         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00358}00358         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00359}00359             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}No signal state associated with phase "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num) + \textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00360}00360         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00361}00361         \textcolor{keyword}{auto} current\_signal\_group\_state = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}[current\_signal\_group];}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00362}00362         \textcolor{comment}{// Only add clearance time for current phase}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00363}00363         \textcolor{keywordtype}{int} red\_duration = current\_signal\_group\_state.red\_clearance;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00364}00364         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00365}00365         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} phase : current\_signal\_group\_state.phase\_seq)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00366}00366         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00367}00367             \textcolor{comment}{// Find state params for each phase in seq}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00368}00368             \textcolor{keywordtype}{int} seq\_signal\_group;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00369}00369             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.find(phase\_num) != \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.end())}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00370}00370             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00371}00371                 seq\_signal\_group = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}[phase];}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00372}00372             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00373}00373             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00374}00374                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1snmp__client__exception}{snmp\_client\_exception}}(\textcolor{stringliteral}{"{}No signal state associated with phase "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase) + \textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00375}00375             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00376}00376             \textcolor{keyword}{auto} seq\_signal\_group\_state = \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}}[seq\_signal\_group];}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00377}00377             \textcolor{keywordflow}{if}(phase == phase\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00378}00378             \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00379}00379                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00380}00380             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00381}00381             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00382}00382                 red\_duration += seq\_signal\_group\_state.green\_duration + seq\_signal\_group\_state.yellow\_duration + seq\_signal\_group\_state.red\_clearance;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00383}00383             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00384}00384         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00385}00385         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00386}00386         \textcolor{keywordflow}{return} red\_duration; }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00387}00387     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00388}00388 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00389}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{00389}}     std::vector<int> \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{tsc\_state::phase\_seq}}(\textcolor{keywordtype}{int} ring\_num)}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00390}00390     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00391}00391         std::vector<int> \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00392}00392         \textcolor{comment}{// Read sequence 1 data for first 2 rings}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00393}00393         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00394}00394         std::string phase\_seq\_oid= \mbox{\hyperlink{namespacentcip__oids_aa886cce34306b7d970f546e495a80480}{ntcip\_oids::SEQUENCE\_DATA}} + \textcolor{stringliteral}{"{}."{}} + \textcolor{stringliteral}{"{}1"{}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(ring\_num); \textcolor{comment}{//Sequence 1 for ring}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00395}00395 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00396}00396         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} seq\_data;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00397}00397         seq\_data.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949}{snmp\_response\_obj::response\_type::STRING}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00398}00398         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(phase\_seq\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, seq\_data);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00399}00399         }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00400}00400         \textcolor{comment}{//extract phase numbers from strings}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00401}00401         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} seq\_val : seq\_data.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_ac6119d52c9266dab1f7fc8463155eb34}{val\_string}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00402}00402         \{   }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00403}00403             \textcolor{keyword}{auto} phase = int(seq\_val);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00404}00404             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.find(phase)!= \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}}.end() \&\& phase != 0 )\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00405}00405                 \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}}.push\_back(phase);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00406}00406             \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00407}00407             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00408}00408         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00409}00409 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00410}00410         \textcolor{keywordflow}{if}(\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}}.empty())}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00411}00411         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00412}00412             SPDLOG\_WARN(\textcolor{stringliteral}{"{}No phases found in sequence 1 for ring \{0\}"{}}, ring\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00413}00413         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00414}00414 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00415}00415         \textcolor{keywordflow}{return} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7}{phase\_seq}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00416}00416 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00417}00417     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00418}00418 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00419}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951}{00419}}     std::vector<int> \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951}{tsc\_state::get\_concurrent\_phases}}(\textcolor{keywordtype}{int} phase\_num)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00420}00420 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00421}00421 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00422}00422         std::vector<int> concurrent\_phases;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00423}00423         std::string concurrent\_phases\_oid = \mbox{\hyperlink{namespacentcip__oids_aedc3a19c20b2cd545d70616264b5805d}{ntcip\_oids::PHASE\_CONCURRENCY}} + \textcolor{stringliteral}{"{}."{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00424}00424 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00425}00425         \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj}{snmp\_response\_obj}} concurrent\_phase\_data;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00426}00426         \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}} = \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8}{request\_type::GET}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00427}00427         concurrent\_phase\_data.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a9a3e45ceab9b7e8c6aa18fb00e242331}{type}} = \mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949}{snmp\_response\_obj::response\_type::STRING}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00428}00428         \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a32ec176910fce4545704a6153c3407eb}{snmp\_client\_worker\_}}-\/>process\_snmp\_request(concurrent\_phases\_oid, \mbox{\hyperlink{namespacetraffic__signal__controller__service_aa91e53dd22b41ddac648a9b468615b61}{request\_type}}, concurrent\_phase\_data);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00429}00429 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00430}00430         \textcolor{comment}{//extract phase numbers from strings}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00431}00431         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} con\_phase :  concurrent\_phase\_data.\mbox{\hyperlink{structtraffic__signal__controller__service_1_1snmp__response__obj_ac6119d52c9266dab1f7fc8463155eb34}{val\_string}})}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00432}00432         \{   }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00433}00433             concurrent\_phases.push\_back(\textcolor{keywordtype}{int}(con\_phase));}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00434}00434             }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00435}00435         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00436}00436 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00437}00437         \textcolor{keywordflow}{if}(concurrent\_phases.empty())}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00438}00438         \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00439}00439             SPDLOG\_WARN(\textcolor{stringliteral}{"{}No phases found in sequence for phase \{0\}"{}}, phase\_num);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00440}00440         \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00441}00441 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00442}00442         \textcolor{keywordflow}{return} concurrent\_phases;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00443}00443     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00444}00444 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00445}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a9af1335fd676f86de7fcbd38493d3985}{00445}}     \textcolor{keyword}{const} std::unordered\_map<int,int>\& \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a9af1335fd676f86de7fcbd38493d3985}{tsc\_state::get\_ped\_phase\_map}}()}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00446}00446     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00447}00447         \textcolor{keywordflow}{return} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a8f31ba52cf271dee1b6caec284f9103f}{ped\_phase\_num\_map\_}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00448}00448     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00449}00449 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00450}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a40c96f54a5eb802026f93906dc1b77d8}{00450}}     \textcolor{keyword}{const} std::unordered\_map<int,int>\& \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a40c96f54a5eb802026f93906dc1b77d8}{tsc\_state::get\_vehicle\_phase\_map}}()}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00451}00451     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00452}00452         \textcolor{keywordflow}{return} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a65824bd6c615b5f4105511c0738aeb89}{vehicle\_phase\_num\_map\_}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00453}00453     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00454}00454 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00455}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3}{00455}}     std::unordered\_map<int, signal\_group\_state>\& \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a27876c0c6172cbb37788cadd97bf6ff3}{tsc\_state::get\_signal\_group\_state\_map}}()}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00456}00456     \{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00457}00457         \textcolor{keywordflow}{return} \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ac8e58f3d13b58c85c3cea5d6e3961af0}{signal\_group\_state\_map\_}};}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00458}00458     \}        }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00459}00459 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00460}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{00460}}     uint16\_t \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f}{tsc\_state::convert\_msepoch\_to\_hour\_tenth\_secs}}(uint64\_t epoch\_time\_ms)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00461}00461         \textcolor{keyword}{auto} system\_time = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00462}00462         \textcolor{keyword}{auto} duration = system\_time.time\_since\_epoch();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00463}00463         \textcolor{keyword}{auto} hours\_since\_epoch = std::chrono::duration\_cast<std::chrono::hours>(duration).count();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00464}00464         \textcolor{keyword}{auto} hour\_tenth\_secs = (epoch\_time\_ms -\/ (hours\_since\_epoch * \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73f09fdaac8a6376b65ad18c44459c9c}{HOUR\_TO\_SECONDS\_}} * \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a17d34ab64b5d3eda6f05a5f3c7622475}{SECOND\_TO\_MILLISECONDS\_}}))/100;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00465}00465         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(hour\_tenth\_secs);}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00466}00466     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00467}00467 }
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00468}\mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a}{00468}}     uint64\_t \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a}{tsc\_state::convert\_hour\_tenth\_secs2epoch\_ts}}(uint16\_t hour\_tenth\_secs)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00469}00469         \textcolor{keyword}{auto} tp = std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00470}00470         \textcolor{keyword}{auto} duration = tp.time\_since\_epoch();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00471}00471         \textcolor{keyword}{auto} hours\_since\_epoch = std::chrono::duration\_cast<std::chrono::hours>(duration).count();}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00472}00472         \textcolor{keyword}{auto} epoch\_start\_time = hours\_since\_epoch * \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a73f09fdaac8a6376b65ad18c44459c9c}{HOUR\_TO\_SECONDS\_}} * \mbox{\hyperlink{classtraffic__signal__controller__service_1_1tsc__state_a17d34ab64b5d3eda6f05a5f3c7622475}{SECOND\_TO\_MILLISECONDS\_}} + hour\_tenth\_secs * 100;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00473}00473         \textcolor{keywordflow}{return} epoch\_start\_time;}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00474}00474     \}}
\DoxyCodeLine{\Hypertarget{monitor__tsc__state_8cpp_source_l00475}00475 \}}

\end{DoxyCode}
