\hypertarget{movement__state_8cpp_source}{}\doxysection{movement\+\_\+state.\+cpp}
\label{movement__state_8cpp_source}\index{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/movement\_state.cpp@{streets\_utils/streets\_signal\_phase\_and\_timing/src/models/movement\_state.cpp}}
\mbox{\hyperlink{movement__state_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{movement__state_8h}{movement\_state.h}}"{}}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesignal__phase__and__timing}{signal\_phase\_and\_timing}} \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00004}\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa872f4da276fd17264851264ed1dde73}{00004}}     rapidjson::Value \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa872f4da276fd17264851264ed1dde73}{movement\_state::toJson}}(rapidjson::Document::AllocatorType \&allocator)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00005}00005         \textcolor{comment}{// Create movement state JSON value}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00006}00006         rapidjson::Value move\_state(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00007}00007         \textcolor{comment}{// Populate}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00008}00008         move\_state.AddMember( \textcolor{stringliteral}{"{}movement\_name"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a1de3e024b500c0b85ebc30fcfba0f9ab}{movement\_name}}, allocator);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00009}00009         move\_state.AddMember( \textcolor{stringliteral}{"{}signal\_group"{}}, \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_ad403f25c761b6ef77b4bbc6bacbfc888}{signal\_group}}, allocator );}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00010}00010         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00011}00011             rapidjson::Value event\_list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00012}00012             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&event: \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}} ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00013}00013                 event\_list.PushBack( event.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00014}00014             \} }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00015}00015             move\_state.AddMember(\textcolor{stringliteral}{"{}state\_time\_speed"{}}, event\_list, allocator);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00017}00017         \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00018}00018         \textcolor{keywordflow}{if} ( !\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}}.empty() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00019}00019             rapidjson::Value maneuver\_list(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00020}00020             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&maneuver: \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}} ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00021}00021                 maneuver\_list.PushBack( maneuver.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00022}00022             \} }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00023}00023             move\_state.AddMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}, maneuver\_list, allocator);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00024}00024         \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00025}00025         \textcolor{keywordflow}{return} move\_state;}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00026}00026     \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00028}\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_add078711d1cf73ce1f433c4b34532fcc}{00028}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_add078711d1cf73ce1f433c4b34532fcc}{movement\_state::fromJson}}( \textcolor{keyword}{const} rapidjson::Value \&val ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00029}00029         \textcolor{keywordflow}{if} ( val.IsObject() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00030}00030             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}movement\_name"{}})-\/>value.IsString() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00031}00031                 \textcolor{comment}{// OPTIONAL see J2735 MovementState definition}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00032}00032                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a1de3e024b500c0b85ebc30fcfba0f9ab}{movement\_name}} =  val[\textcolor{stringliteral}{"{}movement\_name"{}}].GetString();}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00033}00033             \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00034}00034             \textcolor{keywordflow}{if} ( val.HasMember(\textcolor{stringliteral}{"{}signal\_group"{}}) \&\& val[\textcolor{stringliteral}{"{}signal\_group"{}}].IsUint() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00035}00035                 \textcolor{comment}{// REQUIRED see J2735 MovementState definition}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00036}00036                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_ad403f25c761b6ef77b4bbc6bacbfc888}{signal\_group}} = \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(val[\textcolor{stringliteral}{"{}signal\_group"{}}].GetUint());}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00037}00037             \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00038}00038             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00039}00039                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}MovementState is missing required signal\_group property!"{}});}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00040}00040             \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00041}00041             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}state\_time\_speed"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00042}00042                 \textcolor{comment}{// REQUIRED in J2735 MovementState definition }}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00043}00043                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}}.clear();}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00044}00044                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&move\_event: val[\textcolor{stringliteral}{"{}state\_time\_speed"{}}].GetArray() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00045}00045                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event}{movement\_event}} event;}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00046}00046                     \textcolor{keyword}{event}.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__event_a9e78abda6f76b9e03a27859d4003fbb6}{fromJson}}( move\_event );}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00047}00047                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}}.push\_back(event);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00048}00048                 \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00049}00049             \} }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00050}00050             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00051}00051                \textcolor{keywordflow}{throw} \mbox{\hyperlink{classsignal__phase__and__timing_1_1signal__phase__and__timing__exception}{signal\_phase\_and\_timing\_exception}}(\textcolor{stringliteral}{"{}MovementState is missing required state\_time\_speed property!"{}});}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00052}00052             \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00053}00053             \textcolor{keywordflow}{if} ( val.FindMember(\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}})-\/>value.IsArray() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00054}00054                 \textcolor{comment}{// OPTIONAL see J2735 MovementState definition}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00055}00055                 \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}}.clear();}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00056}00056                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&maneuver: val[\textcolor{stringliteral}{"{}maneuver\_assist\_list"{}}].GetArray() ) \{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00057}00057                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist}{connection\_maneuver\_assist}} man;}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00058}00058                     man.\mbox{\hyperlink{structsignal__phase__and__timing_1_1connection__maneuver__assist_a0a1eb4c8b7054414b2a771d67d78404e}{fromJson}}( maneuver );}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00059}00059                     \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}}.push\_back(man);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00060}00060                 \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00061}00061             \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00062}00062         \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00063}00063     \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00065}\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a5d194d48be7e68acd6725161fbd9b00d}{00065}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a5d194d48be7e68acd6725161fbd9b00d}{movement\_state::operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}} \&other)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00066}00066         \textcolor{keywordflow}{return} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a1de3e024b500c0b85ebc30fcfba0f9ab}{movement\_name}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a1de3e024b500c0b85ebc30fcfba0f9ab}{movement\_name}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_ad403f25c761b6ef77b4bbc6bacbfc888}{signal\_group}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_ad403f25c761b6ef77b4bbc6bacbfc888}{signal\_group}} }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00067}00067                 \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a087beaba691971b31df26e90bf4e81c4}{state\_time\_speed}} \&\& \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}} == other.\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa3d4d3985d6aeb065506bc71a30479d3}{maneuver\_assist\_list}};}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00068}00068     \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00070}\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa13a66411886587bb468d9bfb9ab94cd}{00070}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_aa13a66411886587bb468d9bfb9ab94cd}{movement\_state::operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state}{movement\_state}} \&other)\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00071}00071         \textcolor{keywordflow}{return} !\mbox{\hyperlink{structsignal__phase__and__timing_1_1movement__state_a5d194d48be7e68acd6725161fbd9b00d}{operator==}}(other);}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00072}00072     \}}
\DoxyCodeLine{\Hypertarget{movement__state_8cpp_source_l00073}00073 \}}

\end{DoxyCode}
