<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: traffic_signal_controller_service::tsc_state Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtraffic__signal__controller__service_1_1tsc__state.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtraffic__signal__controller__service_1_1tsc__state-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">traffic_signal_controller_service::tsc_state Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for traffic_signal_controller_service::tsc_state:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state__coll__graph.png" border="0" usemap="#atraffic__signal__controller__service_1_1tsc__state_coll__map" alt="Collaboration graph"/></div>
<map name="atraffic__signal__controller__service_1_1tsc__state_coll__map" id="atraffic__signal__controller__service_1_1tsc__state_coll__map">
<area shape="rect" title=" " alt="" coords="387,248,593,692"/>
<area shape="rect" title=" " alt="" coords="5,5,177,112"/>
<area shape="rect" title=" " alt="" coords="202,5,399,112"/>
<area shape="rect" title=" " alt="" coords="424,13,564,105"/>
<area shape="rect" title=" " alt="" coords="608,20,703,97"/>
<area shape="rect" title=" " alt="" coords="780,20,819,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aedb4290f73cd4cfd58b04e1e05969781"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aedb4290f73cd4cfd58b04e1e05969781">tsc_state</a> (std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>)</td></tr>
<tr class="memdesc:aedb4290f73cd4cfd58b04e1e05969781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> class.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#aedb4290f73cd4cfd58b04e1e05969781">More...</a><br /></td></tr>
<tr class="separator:aedb4290f73cd4cfd58b04e1e05969781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27876c0c6172cbb37788cadd97bf6ff3"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a27876c0c6172cbb37788cadd97bf6ff3">get_signal_group_state_map</a> ()</td></tr>
<tr class="memdesc:a27876c0c6172cbb37788cadd97bf6ff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return reference to signal group state map.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a27876c0c6172cbb37788cadd97bf6ff3">More...</a><br /></td></tr>
<tr class="separator:a27876c0c6172cbb37788cadd97bf6ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af1335fd676f86de7fcbd38493d3985"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a9af1335fd676f86de7fcbd38493d3985">get_ped_phase_map</a> ()</td></tr>
<tr class="memdesc:a9af1335fd676f86de7fcbd38493d3985"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of pedestrian phases to signal group ids.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a9af1335fd676f86de7fcbd38493d3985">More...</a><br /></td></tr>
<tr class="separator:a9af1335fd676f86de7fcbd38493d3985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c96f54a5eb802026f93906dc1b77d8"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a40c96f54a5eb802026f93906dc1b77d8">get_vehicle_phase_map</a> ()</td></tr>
<tr class="memdesc:a40c96f54a5eb802026f93906dc1b77d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of pedestrian phases to signal group ids.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a40c96f54a5eb802026f93906dc1b77d8">More...</a><br /></td></tr>
<tr class="separator:a40c96f54a5eb802026f93906dc1b77d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af051312a2931c0f7db32b3d0439a2e6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b">initialize</a> ()</td></tr>
<tr class="memdesc:af051312a2931c0f7db32b3d0439a2e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> by making SNMP calls to TSC for phase sequence and timing information.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b">More...</a><br /></td></tr>
<tr class="separator:af051312a2931c0f7db32b3d0439a2e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af739a1bdb23638f28315e8680f407fdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd">add_future_movement_events</a> (std::shared_ptr&lt; <a class="el" href="structsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt; spat_ptr)</td></tr>
<tr class="memdesc:af739a1bdb23638f28315e8680f407fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates spat with future movement events for vehicle phases.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd">More...</a><br /></td></tr>
<tr class="separator:af739a1bdb23638f28315e8680f407fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a54bb0ddd47fca73403bbc52bbcfba988"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a54bb0ddd47fca73403bbc52bbcfba988">get_phase_channels</a> (int max_channels, std::vector&lt; int &gt; &amp;vehicle_phase_channels, std::vector&lt; int &gt; &amp;ped_phase_channels) const</td></tr>
<tr class="memdesc:a54bb0ddd47fca73403bbc52bbcfba988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap, ped Overlap, queueJump and other (types defined in NTCIP1202 v03)  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a54bb0ddd47fca73403bbc52bbcfba988">More...</a><br /></td></tr>
<tr class="separator:a54bb0ddd47fca73403bbc52bbcfba988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f1926f5f6495742d204dbde1bf9dbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb">map_phase_and_signalgroup</a> (const std::vector&lt; int &gt; &amp;phase_channels, bool is_source_vehicle_channel)</td></tr>
<tr class="memdesc:af0f1926f5f6495742d204dbde1bf9dbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a map between phase number and signal group ids.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb">More...</a><br /></td></tr>
<tr class="separator:af0f1926f5f6495742d204dbde1bf9dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">get_max_channels</a> () const</td></tr>
<tr class="memdesc:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting maximum channels for the traffic signal controller.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">More...</a><br /></td></tr>
<tr class="separator:a2f1d658bc65133d1ba6b4f03d593ffb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73acb7d06ec8d69783f369c504a3010c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">get_min_green</a> (int phase_num) const</td></tr>
<tr class="memdesc:a73acb7d06ec8d69783f369c504a3010c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get minimum green time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">More...</a><br /></td></tr>
<tr class="separator:a73acb7d06ec8d69783f369c504a3010c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">get_max_green</a> (int phase_num) const</td></tr>
<tr class="memdesc:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get maximum green time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">More...</a><br /></td></tr>
<tr class="separator:aa4dbbf6a17e37cbb38a43d4641bf3ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">get_yellow_duration</a> (int phase_num) const</td></tr>
<tr class="memdesc:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get yellow duration time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">More...</a><br /></td></tr>
<tr class="separator:ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5bfca513648fa55566289fe8a9de750"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">get_red_clearance</a> (int phase_num) const</td></tr>
<tr class="memdesc:ae5bfca513648fa55566289fe8a9de750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get red clearance time for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">More...</a><br /></td></tr>
<tr class="separator:ae5bfca513648fa55566289fe8a9de750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaee10dcfb57b70be35a81723b21761b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">get_red_duration</a> (int phase_num)</td></tr>
<tr class="memdesc:acaee10dcfb57b70be35a81723b21761b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get red duration for a phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">More...</a><br /></td></tr>
<tr class="separator:acaee10dcfb57b70be35a81723b21761b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08b298b1834ff6c717926a4d0d4b9ef7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a08b298b1834ff6c717926a4d0d4b9ef7">get_following_phases</a> (int phase_num)</td></tr>
<tr class="memdesc:a08b298b1834ff6c717926a4d0d4b9ef7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a sequence of phases following the given phase.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a08b298b1834ff6c717926a4d0d4b9ef7">More...</a><br /></td></tr>
<tr class="separator:a08b298b1834ff6c717926a4d0d4b9ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb0dd3e03340b8363e34510eb7f5ab7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a> (int ring_num)</td></tr>
<tr class="memdesc:afbb0dd3e03340b8363e34510eb7f5ab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a sequence of phases in the given ring.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">More...</a><br /></td></tr>
<tr class="separator:afbb0dd3e03340b8363e34510eb7f5ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a926ae227a45a7cec9c442c33eeade951"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a926ae227a45a7cec9c442c33eeade951">get_concurrent_phases</a> (int phase_num) const</td></tr>
<tr class="memdesc:a926ae227a45a7cec9c442c33eeade951"><td class="mdescLeft">&#160;</td><td class="mdescRight">The concurrent phases that the given phase can be green along with.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a926ae227a45a7cec9c442c33eeade951">More...</a><br /></td></tr>
<tr class="separator:a926ae227a45a7cec9c442c33eeade951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63c22e776c61212200f708edc26159f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a> (uint64_t epoch_time_ms) const</td></tr>
<tr class="memdesc:ab63c22e776c61212200f708edc26159f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to convert epoch time to hour-tenths time.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">More...</a><br /></td></tr>
<tr class="separator:ab63c22e776c61212200f708edc26159f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac79c6f55b96327e9ad3ef8de6f0f5a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a6ac79c6f55b96327e9ad3ef8de6f0f5a">convert_hour_tenth_secs2epoch_ts</a> (uint16_t hour_tenth_secs) const</td></tr>
<tr class="memdesc:a6ac79c6f55b96327e9ad3ef8de6f0f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to convert hour-tenths time to epoch time.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a6ac79c6f55b96327e9ad3ef8de6f0f5a">More...</a><br /></td></tr>
<tr class="separator:a6ac79c6f55b96327e9ad3ef8de6f0f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167cb5770186a005c223a92c5dcf207e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">get_following_event</a> (const <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;current_event, uint64_t current_event_end_time, const <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &amp;phase_state) const</td></tr>
<tr class="memdesc:a167cb5770186a005c223a92c5dcf207e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get predicted next movement event given a current event.  <a href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">More...</a><br /></td></tr>
<tr class="separator:a167cb5770186a005c223a92c5dcf207e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37ec67564429caa97a7a9a7e9e0e8832"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a37ec67564429caa97a7a9a7e9e0e8832">FRIEND_TEST</a> (traffic_signal_controller_service, test_get_following_movement_events)</td></tr>
<tr class="separator:a37ec67564429caa97a7a9a7e9e0e8832"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a32ec176910fce4545704a6153c3407eb"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a></td></tr>
<tr class="separator:a32ec176910fce4545704a6153c3407eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e58f3d13b58c85c3cea5d6e3961af0"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a></td></tr>
<tr class="separator:ac8e58f3d13b58c85c3cea5d6e3961af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5589bc2137028ff1c1b7ec39bf360fb0"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a5589bc2137028ff1c1b7ec39bf360fb0">signal_group_phase_map_</a></td></tr>
<tr class="separator:a5589bc2137028ff1c1b7ec39bf360fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65824bd6c615b5f4105511c0738aeb89"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a></td></tr>
<tr class="separator:a65824bd6c615b5f4105511c0738aeb89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f31ba52cf271dee1b6caec284f9103f"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a8f31ba52cf271dee1b6caec284f9103f">ped_phase_num_map_</a></td></tr>
<tr class="separator:a8f31ba52cf271dee1b6caec284f9103f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7c1e663e2b2e41e1d3cfb902208add"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a></td></tr>
<tr class="separator:a1f7c1e663e2b2e41e1d3cfb902208add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73756e2d00260dfccd9838cf147bf823"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a></td></tr>
<tr class="separator:a73756e2d00260dfccd9838cf147bf823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2712eeb290c972b3ead1c4ee7e7744"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">required_following_movements_</a> = 3</td></tr>
<tr class="separator:ace2712eeb290c972b3ead1c4ee7e7744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f09fdaac8a6376b65ad18c44459c9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73f09fdaac8a6376b65ad18c44459c9c">HOUR_TO_SECONDS_</a> = 3600</td></tr>
<tr class="separator:a73f09fdaac8a6376b65ad18c44459c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d34ab64b5d3eda6f05a5f3c7622475"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html#a17d34ab64b5d3eda6f05a5f3c7622475">SECOND_TO_MILLISECONDS_</a> = 1000</td></tr>
<tr class="separator:a17d34ab64b5d3eda6f05a5f3c7622475"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00038">38</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aedb4290f73cd4cfd58b04e1e05969781" name="aedb4290f73cd4cfd58b04e1e05969781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb4290f73cd4cfd58b04e1e05969781">&#9670;&nbsp;</a></span>tsc_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_state::tsc_state </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td>
          <td class="paramname"><em>snmp_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a></td><td>A pointer to an <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> worker with a connection established to a traffic signal controller </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00005">5</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    5</span>                                                               : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>(snmp_client)</div>
<div class="line"><span class="lineno">    6</span>    {</div>
<div class="line"><span class="lineno">    7</span>        </div>
<div class="line"><span class="lineno">    8</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a32ec176910fce4545704a6153c3407eb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">traffic_signal_controller_service::tsc_state::snmp_client_worker_</a></div><div class="ttdeci">std::shared_ptr&lt; snmp_client &gt; snmp_client_worker_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00042">monitor_tsc_state.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af739a1bdb23638f28315e8680f407fdd" name="af739a1bdb23638f28315e8680f407fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af739a1bdb23638f28315e8680f407fdd">&#9670;&nbsp;</a></span>add_future_movement_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::add_future_movement_events </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="structsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td>
          <td class="paramname"><em>spat_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates spat with future movement events for vehicle phases. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spat_ptr</td><td>pointer to spat message to update </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if update was successful, false if it failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">117</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span>    {</div>
<div class="line"><span class="lineno">  119</span>        <span class="comment">// Modify spat according to phase configuration</span></div>
<div class="line"><span class="lineno">  120</span>        <span class="comment">// Note: Only first intersection is populated</span></div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> movement : spat_ptr-&gt;intersections.front().states)</div>
<div class="line"><span class="lineno">  122</span>        {</div>
<div class="line"><span class="lineno">  123</span>            <span class="keywordtype">int</span> signal_group_id = movement.signal_group;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>            <span class="comment">// Assumption here is that the movement states have only one event, since this method adds future events to the list.</span></div>
<div class="line"><span class="lineno">  126</span>            <span class="comment">//Throw exception is list size is great than 1</span></div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">if</span> (movement.state_time_speed.size() &gt; 1)</div>
<div class="line"><span class="lineno">  128</span>            {</div>
<div class="line"><span class="lineno">  129</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;Event list has more than one events, not usable when adding future movement events. Associated with Signal Group: {0}&quot;</span>, signal_group_id);</div>
<div class="line"><span class="lineno">  130</span>                <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;Event list has more than one events, not usable when adding future movement events. Associated with Signal Group:&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(signal_group_id));</div>
<div class="line"><span class="lineno">  131</span>            }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>            <span class="comment">// Get movement_state by reference</span></div>
<div class="line"><span class="lineno">  134</span>            <span class="keyword">auto</span>&amp; current_movement = spat_ptr-&gt;intersections.front().get_movement(signal_group_id);</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>            <span class="comment">// Get start time as epoch time</span></div>
<div class="line"><span class="lineno">  137</span>            uint64_t start_time = movement.state_time_speed.front().timing.get_epoch_start_time();</div>
<div class="line"><span class="lineno">  138</span>            </div>
<div class="line"><span class="lineno">  139</span>            <span class="comment">// Check if signal_group_id is associated with a vehicle phase : Only vehicle phases mapped to signal_group_states</span></div>
<div class="line"><span class="lineno">  140</span>            signal_group_state phase_state;</div>
<div class="line"><span class="lineno">  141</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>.find(signal_group_id) == <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>.end()){</div>
<div class="line"><span class="lineno">  142</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  143</span>            }</div>
<div class="line"><span class="lineno">  144</span>            </div>
<div class="line"><span class="lineno">  145</span>            phase_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>[signal_group_id];</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>            uint64_t current_event_end_time_epoch = 0;</div>
<div class="line"><span class="lineno">  148</span>            <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> current_event = current_movement.state_time_speed.front();</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">switch</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>){</div>
<div class="line"><span class="lineno">  151</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a> : <span class="comment">//Red</span></div>
<div class="line"><span class="lineno">  152</span>                    current_event_end_time_epoch = start_time + phase_state.red_duration;</div>
<div class="line"><span class="lineno">  153</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a> : <span class="comment">//Green</span></div>
<div class="line"><span class="lineno">  156</span>                    current_event_end_time_epoch = start_time + phase_state.green_duration;</div>
<div class="line"><span class="lineno">  157</span>                    <span class="keywordflow">break</span>;                                                                </div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a> : <span class="comment">//Yellow</span></div>
<div class="line"><span class="lineno">  160</span>                    current_event_end_time_epoch = start_time + phase_state.yellow_duration;</div>
<div class="line"><span class="lineno">  161</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  164</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: {0}&quot;</span>, <span class="keywordtype">int</span>(current_movement.state_time_speed.front().event_state));</div>
<div class="line"><span class="lineno">  165</span>                    <span class="keywordflow">throw</span> monitor_states_exception(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<span class="keywordtype">int</span>(current_movement.state_time_speed.front().event_state)));</div>
<div class="line"><span class="lineno">  166</span>            }</div>
<div class="line"><span class="lineno">  167</span>            <span class="comment">// Update end_time for current_event</span></div>
<div class="line"><span class="lineno">  168</span>            current_movement.state_time_speed.front().timing.min_end_time = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time_epoch);</div>
<div class="line"><span class="lineno">  169</span>            current_movement.state_time_speed.front().timing.max_end_time = current_movement.state_time_speed.front().timing.min_end_time;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">required_following_movements_</a>; ++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>)</div>
<div class="line"><span class="lineno">  172</span>            {</div>
<div class="line"><span class="lineno">  173</span>                <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> next_event = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">get_following_event</a>(current_event, current_event_end_time_epoch, phase_state);</div>
<div class="line"><span class="lineno">  174</span>                current_event = next_event;</div>
<div class="line"><span class="lineno">  175</span>                current_event_end_time_epoch = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a6ac79c6f55b96327e9ad3ef8de6f0f5a">convert_hour_tenth_secs2epoch_ts</a>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">min_end_time</a>);</div>
<div class="line"><span class="lineno">  176</span>                <span class="comment">//Add events to list</span></div>
<div class="line"><span class="lineno">  177</span>                current_movement.state_time_speed.push_back(next_event);</div>
<div class="line"><span class="lineno">  178</span>            }</div>
<div class="line"><span class="lineno">  179</span>            </div>
<div class="line"><span class="lineno">  180</span>        }</div>
<div class="line"><span class="lineno">  181</span>        </div>
<div class="line"><span class="lineno">  182</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a167cb5770186a005c223a92c5dcf207e"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e">traffic_signal_controller_service::tsc_state::get_following_event</a></div><div class="ttdeci">signal_phase_and_timing::movement_event get_following_event(const signal_phase_and_timing::movement_event &amp;current_event, uint64_t current_event_end_time, const signal_group_state &amp;phase_state) const</div><div class="ttdoc">Get predicted next movement event given a current event.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00083">monitor_tsc_state.cpp:83</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a6ac79c6f55b96327e9ad3ef8de6f0f5a"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a6ac79c6f55b96327e9ad3ef8de6f0f5a">traffic_signal_controller_service::tsc_state::convert_hour_tenth_secs2epoch_ts</a></div><div class="ttdeci">uint64_t convert_hour_tenth_secs2epoch_ts(uint16_t hour_tenth_secs) const</div><div class="ttdoc">Helper function to convert hour-tenths time to epoch time.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00468">monitor_tsc_state.cpp:468</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ab63c22e776c61212200f708edc26159f"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">traffic_signal_controller_service::tsc_state::convert_msepoch_to_hour_tenth_secs</a></div><div class="ttdeci">uint16_t convert_msepoch_to_hour_tenth_secs(uint64_t epoch_time_ms) const</div><div class="ttdoc">Helper function to convert epoch time to hour-tenths time.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00460">monitor_tsc_state.cpp:460</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ac8e58f3d13b58c85c3cea5d6e3961af0"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">traffic_signal_controller_service::tsc_state::signal_group_state_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, signal_group_state &gt; signal_group_state_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00045">monitor_tsc_state.h:45</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ace2712eeb290c972b3ead1c4ee7e7744"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ace2712eeb290c972b3ead1c4ee7e7744">traffic_signal_controller_service::tsc_state::required_following_movements_</a></div><div class="ttdeci">int required_following_movements_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00062">monitor_tsc_state.h:62</a></div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a></div><div class="ttdeci">@ stop_and_remain</div><div class="ttdoc">e.g. called 'red light' in US. Driver Action: Stop vehicle at stop line. Do not proceed....</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a></div><div class="ttdeci">@ protected_clearance</div><div class="ttdoc">Often called 'protected yellow' in US Driver Action: Prepare to stop. Proceed if unable,...</div></div>
<div class="ttc" id="anamespacesignal__phase__and__timing_html_a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b"><div class="ttname"><a href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a></div><div class="ttdeci">@ protected_movement_allowed</div><div class="ttdoc">Often called 'protected green' in US Driver Action: Proceed, tossing caution to the wind,...</div></div>
<div class="ttc" id="anamespacesimulate__bsm_html_a29b8e2f01a805057636de5ad54422c21"><div class="ttname"><a href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">simulate_bsm.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="simulate__bsm_8py_source.html#l00019">simulate_bsm.py:19</a></div></div>
<div class="ttc" id="antcip__1202__ext_8h_html_a576de7b60eacee3f1a70393a005502cd"><div class="ttname"><a href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string</a></div><div class="ttdeci">std::string to_string() const</div><div class="ttdoc">Returns std::string representation of ntcip_1202_ext message including phase_times array.</div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a></div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00110">movement_event.h:110</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html_a6250e85c7ca1b039806b6326812648d3"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">signal_phase_and_timing::movement_event::timing</a></div><div class="ttdeci">time_change_details timing</div><div class="ttdoc">Timing data in UTC time stamps for events. This includes state and min/max end times of phase confide...</div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00121">movement_event.h:121</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1movement__event_html_a6915afd2a08ca17039c92830ee633a30"><div class="ttname"><a href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">signal_phase_and_timing::movement_event::event_state</a></div><div class="ttdeci">movement_phase_state event_state</div><div class="ttdoc">Consisting of Phase state (the basic 11 states) Directional, protected or permissive state.</div><div class="ttdef"><b>Definition:</b> <a href="movement__event_8h_source.html#l00115">movement_event.h:115</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_ad39cfa60daafb321241d3a00fea563e5"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">signal_phase_and_timing::time_change_details::min_end_time</a></div><div class="ttdeci">uint16_t min_end_time</div><div class="ttdoc">Expected shortest end time. (tenths of a second in current or next hour)</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8h_source.html#l00021">time_change_details.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8cpp_source.html#l00468">convert_hour_tenth_secs2epoch_ts()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">convert_msepoch_to_hour_tenth_secs()</a>, <a class="el" href="movement__event_8h_source.html#l00115">signal_phase_and_timing::movement_event::event_state</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00083">get_following_event()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00025">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>, <a class="el" href="time__change__details_8h_source.html#l00021">signal_phase_and_timing::time_change_details::min_end_time</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00031">traffic_signal_controller_service::signal_group_state::red_duration</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00062">required_following_movements_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00045">signal_group_state_map_</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>, <a class="el" href="movement__event_8h_source.html#l00121">signal_phase_and_timing::movement_event::timing</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00027">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af739a1bdb23638f28315e8680f407fdd_cgraph">
<area shape="rect" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,104,181,160"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a6ac79c6f55b96327e9ad3ef8de6f0f5a" title="Helper function to convert hour&#45;tenths time to epoch time." alt="" coords="229,5,415,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f" title="Helper function to convert epoch time to hour&#45;tenths time." alt="" coords="463,104,665,160"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e" title="Get predicted next movement event given a current event." alt="" coords="245,136,399,192"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="528,200,600,227"/>
</map>
</div>

</div>
</div>
<a id="a6ac79c6f55b96327e9ad3ef8de6f0f5a" name="a6ac79c6f55b96327e9ad3ef8de6f0f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac79c6f55b96327e9ad3ef8de6f0f5a">&#9670;&nbsp;</a></span>convert_hour_tenth_secs2epoch_ts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t traffic_signal_controller_service::tsc_state::convert_hour_tenth_secs2epoch_ts </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hour_tenth_secs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to convert hour-tenths time to epoch time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hour_tenth_secs</td><td>tenths of a second in current or next hour </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>epoch time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00468">468</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  468</span>                                                                                      {</div>
<div class="line"><span class="lineno">  469</span>        <span class="keyword">auto</span> tp = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  470</span>        <span class="keyword">auto</span> duration = tp.time_since_epoch();</div>
<div class="line"><span class="lineno">  471</span>        <span class="keyword">auto</span> hours_since_epoch = std::chrono::duration_cast&lt;std::chrono::hours&gt;(duration).count();</div>
<div class="line"><span class="lineno">  472</span>        <span class="keyword">auto</span> epoch_start_time = hours_since_epoch * <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73f09fdaac8a6376b65ad18c44459c9c">HOUR_TO_SECONDS_</a> * <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a17d34ab64b5d3eda6f05a5f3c7622475">SECOND_TO_MILLISECONDS_</a> + hour_tenth_secs * 100;</div>
<div class="line"><span class="lineno">  473</span>        <span class="keywordflow">return</span> epoch_start_time;</div>
<div class="line"><span class="lineno">  474</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a17d34ab64b5d3eda6f05a5f3c7622475"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a17d34ab64b5d3eda6f05a5f3c7622475">traffic_signal_controller_service::tsc_state::SECOND_TO_MILLISECONDS_</a></div><div class="ttdeci">int SECOND_TO_MILLISECONDS_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00066">monitor_tsc_state.h:66</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a73f09fdaac8a6376b65ad18c44459c9c"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73f09fdaac8a6376b65ad18c44459c9c">traffic_signal_controller_service::tsc_state::HOUR_TO_SECONDS_</a></div><div class="ttdeci">int HOUR_TO_SECONDS_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00065">monitor_tsc_state.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00065">HOUR_TO_SECONDS_</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00066">SECOND_TO_MILLISECONDS_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">add_future_movement_events()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a6ac79c6f55b96327e9ad3ef8de6f0f5a_icgraph">
<area shape="rect" title="Helper function to convert hour&#45;tenths time to epoch time." alt="" coords="229,5,415,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,5,181,61"/>
</map>
</div>

</div>
</div>
<a id="ab63c22e776c61212200f708edc26159f" name="ab63c22e776c61212200f708edc26159f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab63c22e776c61212200f708edc26159f">&#9670;&nbsp;</a></span>convert_msepoch_to_hour_tenth_secs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t traffic_signal_controller_service::tsc_state::convert_msepoch_to_hour_tenth_secs </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>epoch_time_ms</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to convert epoch time to hour-tenths time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">epoch_time_ms</td><td>epoch time in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tenths of a second in current or next hour </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">460</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  460</span>                                                                                      {</div>
<div class="line"><span class="lineno">  461</span>        <span class="keyword">auto</span> system_time = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  462</span>        <span class="keyword">auto</span> duration = system_time.time_since_epoch();</div>
<div class="line"><span class="lineno">  463</span>        <span class="keyword">auto</span> hours_since_epoch = std::chrono::duration_cast&lt;std::chrono::hours&gt;(duration).count();</div>
<div class="line"><span class="lineno">  464</span>        <span class="keyword">auto</span> hour_tenth_secs = (epoch_time_ms - (hours_since_epoch * <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73f09fdaac8a6376b65ad18c44459c9c">HOUR_TO_SECONDS_</a> * <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a17d34ab64b5d3eda6f05a5f3c7622475">SECOND_TO_MILLISECONDS_</a>))/100;</div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(hour_tenth_secs);</div>
<div class="line"><span class="lineno">  466</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00065">HOUR_TO_SECONDS_</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00066">SECOND_TO_MILLISECONDS_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">add_future_movement_events()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00083">get_following_event()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ab63c22e776c61212200f708edc26159f_icgraph">
<area shape="rect" title="Helper function to convert epoch time to hour&#45;tenths time." alt="" coords="432,5,635,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,5,181,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a167cb5770186a005c223a92c5dcf207e" title="Get predicted next movement event given a current event." alt="" coords="229,37,384,93"/>
</map>
</div>

</div>
</div>
<a id="a37ec67564429caa97a7a9a7e9e0e8832" name="a37ec67564429caa97a7a9a7e9e0e8832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37ec67564429caa97a7a9a7e9e0e8832">&#9670;&nbsp;</a></span>FRIEND_TEST()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_state::FRIEND_TEST </td>
          <td>(</td>
          <td class="paramtype">traffic_signal_controller_service&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">test_get_following_movement_events&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a926ae227a45a7cec9c442c33eeade951" name="a926ae227a45a7cec9c442c33eeade951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a926ae227a45a7cec9c442c33eeade951">&#9670;&nbsp;</a></span>get_concurrent_phases()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; traffic_signal_controller_service::tsc_state::get_concurrent_phases </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The concurrent phases that the given phase can be green along with. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_num</td><td>The phase for which the concurrent phases needs to be obtained </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector of phases that may be concurrent with the given phase </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00419">419</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>    {</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>        std::vector&lt;int&gt; concurrent_phases;</div>
<div class="line"><span class="lineno">  423</span>        std::string concurrent_phases_oid = <a class="code hl_variable" href="namespacentcip__oids.html#aedc3a19c20b2cd545d70616264b5805d">ntcip_oids::PHASE_CONCURRENCY</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>        snmp_response_obj concurrent_phase_data;</div>
<div class="line"><span class="lineno">  426</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  427</span>        concurrent_phase_data.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">snmp_response_obj::response_type::STRING</a>;</div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(concurrent_phases_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, concurrent_phase_data);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>        <span class="comment">//extract phase numbers from strings</span></div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> con_phase :  concurrent_phase_data.val_string)</div>
<div class="line"><span class="lineno">  432</span>        {   </div>
<div class="line"><span class="lineno">  433</span>            concurrent_phases.push_back(<span class="keywordtype">int</span>(con_phase));</div>
<div class="line"><span class="lineno">  434</span>            </div>
<div class="line"><span class="lineno">  435</span>        }</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">if</span>(concurrent_phases.empty())</div>
<div class="line"><span class="lineno">  438</span>        {</div>
<div class="line"><span class="lineno">  439</span>            SPDLOG_WARN(<span class="stringliteral">&quot;No phases found in sequence for phase {0}&quot;</span>, phase_num);</div>
<div class="line"><span class="lineno">  440</span>        }</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">return</span> concurrent_phases;</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_aedc3a19c20b2cd545d70616264b5805d"><div class="ttname"><a href="namespacentcip__oids.html#aedc3a19c20b2cd545d70616264b5805d">ntcip_oids::PHASE_CONCURRENCY</a></div><div class="ttdeci">static const std::string PHASE_CONCURRENCY</div><div class="ttdoc">Each octet contains a phase number that may run concurrently with the associated phase....</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00072">ntcip_oids.h:72</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aa91e53dd22b41ddac648a9b468615b61"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">traffic_signal_controller_service::request_type</a></div><div class="ttdeci">request_type</div><div class="ttdef"><b>Definition:</b> <a href="snmp__client_8h_source.html#l00018">snmp_client.h:19</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::request_type::GET</a></div><div class="ttdeci">@ GET</div></div>
<div class="ttc" id="astructtraffic__signal__controller__service_1_1snmp__response__obj_html_a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949"><div class="ttname"><a href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::response_type::STRING</a></div><div class="ttdeci">@ STRING</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="ntcip__oids_8h_source.html#l00072">ntcip_oids::PHASE_CONCURRENCY</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::STRING</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00038">traffic_signal_controller_service::snmp_response_obj::val_string</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_cgraph">
<area shape="rect" title="The concurrent phases that the given phase can be green along with." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a926ae227a45a7cec9c442c33eeade951_icgraph">
<area shape="rect" title="The concurrent phases that the given phase can be green along with." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a167cb5770186a005c223a92c5dcf207e" name="a167cb5770186a005c223a92c5dcf207e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a167cb5770186a005c223a92c5dcf207e">&#9670;&nbsp;</a></span>get_following_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> traffic_signal_controller_service::tsc_state::get_following_event </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> &amp;&#160;</td>
          <td class="paramname"><em>current_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>current_event_end_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &amp;&#160;</td>
          <td class="paramname"><em>phase_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get predicted next movement event given a current event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_event</td><td>movement_event from the next movement needs to be predicted </td></tr>
    <tr><td class="paramname">current_event_end_time</td><td>End time of the current event in epoch time (milliseconds) </td></tr>
    <tr><td class="paramname">phase_state</td><td><a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> for the phase of which the movement events are a part </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>predicted next movement event </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00083">83</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>    {</div>
<div class="line"><span class="lineno">   86</span>        <a class="code hl_struct" href="structsignal__phase__and__timing_1_1movement__event.html">signal_phase_and_timing::movement_event</a> next_event;</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">switch</span> (current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>){</div>
<div class="line"><span class="lineno">   88</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>: <span class="comment">//Green</span></div>
<div class="line"><span class="lineno">   89</span>                <span class="comment">// Create next movement - yellow</span></div>
<div class="line"><span class="lineno">   90</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>;</div>
<div class="line"><span class="lineno">   91</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#aa43eafdf46377a5743e82b5be8ce3133">start_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time);</div>
<div class="line"><span class="lineno">   92</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">min_end_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time + phase_state.yellow_duration);</div>
<div class="line"><span class="lineno">   93</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::movement_phase_state::protected_clearance</a>: <span class="comment">//Yellow</span></div>
<div class="line"><span class="lineno">   96</span>                <span class="comment">// Create next movement - red</span></div>
<div class="line"><span class="lineno">   97</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>;</div>
<div class="line"><span class="lineno">   98</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#aa43eafdf46377a5743e82b5be8ce3133">start_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time); </div>
<div class="line"><span class="lineno">   99</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">min_end_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time + phase_state.red_duration);</div>
<div class="line"><span class="lineno">  100</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::movement_phase_state::stop_and_remain</a>:  <span class="comment">//Red</span></div>
<div class="line"><span class="lineno">  103</span>                <span class="comment">// Create next movement - green</span></div>
<div class="line"><span class="lineno">  104</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a> = <a class="code hl_enumvalue" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::movement_phase_state::protected_movement_allowed</a>;</div>
<div class="line"><span class="lineno">  105</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#aa43eafdf46377a5743e82b5be8ce3133">start_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time);</div>
<div class="line"><span class="lineno">  106</span>                next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">min_end_time</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f">convert_msepoch_to_hour_tenth_secs</a>(current_event_end_time + phase_state.green_duration);</div>
<div class="line"><span class="lineno">  107</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  110</span>                SPDLOG_ERROR(<span class="stringliteral">&quot;This movement phase is not supported. Movement phase type: {0}&quot;</span>, <span class="keywordtype">int</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>));</div>
<div class="line"><span class="lineno">  111</span>                <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed request for unsupported movement phase type: &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(<span class="keywordtype">int</span>(current_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6915afd2a08ca17039c92830ee633a30">event_state</a>)));</div>
<div class="line"><span class="lineno">  112</span>        }</div>
<div class="line"><span class="lineno">  113</span>        next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#a1c9501b5a44c66a178b8753db439a753">max_end_time</a> = next_event.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1movement__event.html#a6250e85c7ca1b039806b6326812648d3">timing</a>.<a class="code hl_variable" href="structsignal__phase__and__timing_1_1time__change__details.html#ad39cfa60daafb321241d3a00fea563e5">min_end_time</a>;</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> next_event;</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_a1c9501b5a44c66a178b8753db439a753"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#a1c9501b5a44c66a178b8753db439a753">signal_phase_and_timing::time_change_details::max_end_time</a></div><div class="ttdeci">uint16_t max_end_time</div><div class="ttdoc">Expected longest end time. (tenths of a second in current or next hour)</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8h_source.html#l00025">time_change_details.h:25</a></div></div>
<div class="ttc" id="astructsignal__phase__and__timing_1_1time__change__details_html_aa43eafdf46377a5743e82b5be8ce3133"><div class="ttname"><a href="structsignal__phase__and__timing_1_1time__change__details.html#aa43eafdf46377a5743e82b5be8ce3133">signal_phase_and_timing::time_change_details::start_time</a></div><div class="ttdeci">uint16_t start_time</div><div class="ttdoc">When this phase first started. (tenths of a second in current or next hour)</div><div class="ttdef"><b>Definition:</b> <a href="time__change__details_8h_source.html#l00017">time_change_details.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">convert_msepoch_to_hour_tenth_secs()</a>, <a class="el" href="movement__event_8h_source.html#l00115">signal_phase_and_timing::movement_event::event_state</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00025">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="time__change__details_8h_source.html#l00025">signal_phase_and_timing::time_change_details::max_end_time</a>, <a class="el" href="time__change__details_8h_source.html#l00021">signal_phase_and_timing::time_change_details::min_end_time</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a909f43d0494b87359c21298b5310e4fc">signal_phase_and_timing::protected_clearance</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14ababa6a65d4933ea6229e61b20668218b">signal_phase_and_timing::protected_movement_allowed</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00031">traffic_signal_controller_service::signal_group_state::red_duration</a>, <a class="el" href="time__change__details_8h_source.html#l00017">signal_phase_and_timing::time_change_details::start_time</a>, <a class="el" href="namespacesignal__phase__and__timing.html#a89bd5b280352669f719b2c36a9dc2a14a03e3f63efcce21f01897bc0583979afa">signal_phase_and_timing::stop_and_remain</a>, <a class="el" href="movement__event_8h_source.html#l00121">signal_phase_and_timing::movement_event::timing</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00027">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">add_future_movement_events()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_cgraph">
<area shape="rect" title="Get predicted next movement event given a current event." alt="" coords="5,39,160,95"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ab63c22e776c61212200f708edc26159f" title="Helper function to convert epoch time to hour&#45;tenths time." alt="" coords="208,5,411,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="273,85,345,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a167cb5770186a005c223a92c5dcf207e_icgraph">
<area shape="rect" title="Get predicted next movement event given a current event." alt="" coords="229,5,384,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af739a1bdb23638f28315e8680f407fdd" title="Updates spat with future movement events for vehicle phases." alt="" coords="5,5,181,61"/>
</map>
</div>

</div>
</div>
<a id="a08b298b1834ff6c717926a4d0d4b9ef7" name="a08b298b1834ff6c717926a4d0d4b9ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08b298b1834ff6c717926a4d0d4b9ef7">&#9670;&nbsp;</a></span>get_following_phases()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; traffic_signal_controller_service::tsc_state::get_following_phases </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a sequence of phases following the given phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the sequence needs to be obtained </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector as a sequence of phases starting from the given phase </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00184">184</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>        std::vector&lt;int&gt; sequence;</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>        <span class="comment">// Add phase sequence to signal group state</span></div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>.size();++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>)</div>
<div class="line"><span class="lineno">  190</span>        {</div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>[<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>] == phase_num)</div>
<div class="line"><span class="lineno">  192</span>            {</div>
<div class="line"><span class="lineno">  193</span>                sequence.insert(sequence.begin(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>.end());</div>
<div class="line"><span class="lineno">  194</span>                sequence.insert(sequence.end(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>.begin(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a>.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>                <span class="keywordflow">return</span> sequence; </div>
<div class="line"><span class="lineno">  197</span>            }</div>
<div class="line"><span class="lineno">  198</span>        }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> = 0; <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a> &lt; <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>.size();++<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>)</div>
<div class="line"><span class="lineno">  201</span>        {</div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>[<a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>] == phase_num)</div>
<div class="line"><span class="lineno">  203</span>            {</div>
<div class="line"><span class="lineno">  204</span>                sequence.insert(sequence.begin(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>, <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>.end());</div>
<div class="line"><span class="lineno">  205</span>                sequence.insert(sequence.end(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>.begin(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a>.begin() + <a class="code hl_variable" href="namespacesimulate__bsm.html#a29b8e2f01a805057636de5ad54422c21">i</a>);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>                <span class="keywordflow">return</span> sequence; </div>
<div class="line"><span class="lineno">  208</span>            }</div>
<div class="line"><span class="lineno">  209</span>        }</div>
<div class="line"><span class="lineno">  210</span>        <span class="comment">// No following phase information found</span></div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;No following phases found&quot;</span>);</div>
<div class="line"><span class="lineno">  212</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a1f7c1e663e2b2e41e1d3cfb902208add"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">traffic_signal_controller_service::tsc_state::phase_seq_ring1_</a></div><div class="ttdeci">std::vector&lt; int &gt; phase_seq_ring1_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00057">monitor_tsc_state.h:57</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a73756e2d00260dfccd9838cf147bf823"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">traffic_signal_controller_service::tsc_state::phase_seq_ring2_</a></div><div class="ttdeci">std::vector&lt; int &gt; phase_seq_ring2_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00059">monitor_tsc_state.h:59</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simulate__bsm_8py_source.html#l00019">simulate_bsm::i</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00057">phase_seq_ring1_</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00059">phase_seq_ring2_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a08b298b1834ff6c717926a4d0d4b9ef7_icgraph">
<area shape="rect" title="Get a sequence of phases following the given phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a2f1d658bc65133d1ba6b4f03d593ffb3" name="a2f1d658bc65133d1ba6b4f03d593ffb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f1d658bc65133d1ba6b4f03d593ffb3">&#9670;&nbsp;</a></span>get_max_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_max_channels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for getting maximum channels for the traffic signal controller. </p>
<dl class="section return"><dt>Returns</dt><dd>number of maximum channels in the traffic signal controller </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00214">214</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  214</span>                                          {</div>
<div class="line"><span class="lineno">  215</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  216</span>        snmp_response_obj max_channels_in_tsc;</div>
<div class="line"><span class="lineno">  217</span>        max_channels_in_tsc.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(<a class="code hl_variable" href="namespacentcip__oids.html#a5e92b2d342b6fa23f9be040041b5d631">ntcip_oids::MAX_CHANNELS</a>, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, max_channels_in_tsc))</div>
<div class="line"><span class="lineno">  220</span>        {</div>
<div class="line"><span class="lineno">  221</span>            <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed to get max channels!&quot;</span>);</div>
<div class="line"><span class="lineno">  222</span>        }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) max_channels_in_tsc.val_int;</div>
<div class="line"><span class="lineno">  225</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a5e92b2d342b6fa23f9be040041b5d631"><div class="ttname"><a href="namespacentcip__oids.html#a5e92b2d342b6fa23f9be040041b5d631">ntcip_oids::MAX_CHANNELS</a></div><div class="ttdeci">static const std::string MAX_CHANNELS</div><div class="ttdoc">OID for MAX_CHANNELS: The maximum number of channels this TSC supports.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00017">ntcip_oids.h:17</a></div></div>
<div class="ttc" id="astructtraffic__signal__controller__service_1_1snmp__response__obj_html_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c"><div class="ttname"><a href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::response_type::INTEGER</a></div><div class="ttdeci">@ INTEGER</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00017">ntcip_oids::MAX_CHANNELS</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a2f1d658bc65133d1ba6b4f03d593ffb3_icgraph">
<area shape="rect" title="Method for getting maximum channels for the traffic signal controller." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="aa4dbbf6a17e37cbb38a43d4641bf3ec8" name="aa4dbbf6a17e37cbb38a43d4641bf3ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4dbbf6a17e37cbb38a43d4641bf3ec8">&#9670;&nbsp;</a></span>get_max_green()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_max_green </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get maximum green time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the maximum green needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>maximum green time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00309">309</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  310</span>    {</div>
<div class="line"><span class="lineno">  311</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>        std::string max_green_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a4affb9d542bfdef8b1a3a2ef06941c7c">ntcip_oids::MAXIMUM_GREEN</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  314</span>        snmp_response_obj max_green;</div>
<div class="line"><span class="lineno">  315</span>        max_green.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  316</span>        </div>
<div class="line"><span class="lineno">  317</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(max_green_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, max_green);</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) max_green.val_int * 1000; <span class="comment">//Convert seconds to milliseconds</span></div>
<div class="line"><span class="lineno">  320</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a4affb9d542bfdef8b1a3a2ef06941c7c"><div class="ttname"><a href="namespacentcip__oids.html#a4affb9d542bfdef8b1a3a2ef06941c7c">ntcip_oids::MAXIMUM_GREEN</a></div><div class="ttdeci">static const std::string MAXIMUM_GREEN</div><div class="ttdoc">This time shall determine the maximum length of time this phase may be held in Green in the absence o...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00044">ntcip_oids.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00044">ntcip_oids::MAXIMUM_GREEN</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_cgraph">
<area shape="rect" title="Get maximum green time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_aa4dbbf6a17e37cbb38a43d4641bf3ec8_icgraph">
<area shape="rect" title="Get maximum green time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a73acb7d06ec8d69783f369c504a3010c" name="a73acb7d06ec8d69783f369c504a3010c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73acb7d06ec8d69783f369c504a3010c">&#9670;&nbsp;</a></span>get_min_green()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_min_green </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get minimum green time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the min green needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>minimum green time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00296">296</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  297</span>    {</div>
<div class="line"><span class="lineno">  298</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  299</span>        std::string min_green_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a90dca09384bbe13e3ee22c4ba9510079">ntcip_oids::MINIMUM_GREEN</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>        snmp_response_obj min_green;</div>
<div class="line"><span class="lineno">  302</span>        min_green.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(min_green_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, min_green);</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) min_green.val_int * 1000; <span class="comment">//Convert seconds to milliseconds</span></div>
<div class="line"><span class="lineno">  307</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a90dca09384bbe13e3ee22c4ba9510079"><div class="ttname"><a href="namespacentcip__oids.html#a90dca09384bbe13e3ee22c4ba9510079">ntcip_oids::MINIMUM_GREEN</a></div><div class="ttdeci">static const std::string MINIMUM_GREEN</div><div class="ttdoc">Phase Minimum Green Parameter: The minimum green parameter in seconds.Used with (....</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00039">ntcip_oids.h:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00039">ntcip_oids::MINIMUM_GREEN</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_cgraph">
<area shape="rect" title="Get minimum green time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a73acb7d06ec8d69783f369c504a3010c_icgraph">
<area shape="rect" title="Get minimum green time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a9af1335fd676f86de7fcbd38493d3985" name="a9af1335fd676f86de7fcbd38493d3985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af1335fd676f86de7fcbd38493d3985">&#9670;&nbsp;</a></span>get_ped_phase_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; int, int &gt; &amp; traffic_signal_controller_service::tsc_state::get_ped_phase_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a map of pedestrian phases to signal group ids. </p>
<dl class="section return"><dt>Returns</dt><dd>a map of pedestrian phases to signal group ids </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00445">445</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  446</span>    {</div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a8f31ba52cf271dee1b6caec284f9103f">ped_phase_num_map_</a>;</div>
<div class="line"><span class="lineno">  448</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a8f31ba52cf271dee1b6caec284f9103f"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a8f31ba52cf271dee1b6caec284f9103f">traffic_signal_controller_service::tsc_state::ped_phase_num_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; ped_phase_num_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00054">monitor_tsc_state.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00054">ped_phase_num_map_</a>.</p>

</div>
</div>
<a id="a54bb0ddd47fca73403bbc52bbcfba988" name="a54bb0ddd47fca73403bbc52bbcfba988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54bb0ddd47fca73403bbc52bbcfba988">&#9670;&nbsp;</a></span>get_phase_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::get_phase_channels </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vehicle_phase_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>ped_phase_channels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap, ped Overlap, queueJump and other (types defined in NTCIP1202 v03) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_channels</td><td>The maximum number of channels in the traffic signal controller. </td></tr>
    <tr><td class="paramname">vehicle_phase_channels</td><td>a vector of active vehicle phases associated with a channel </td></tr>
    <tr><td class="paramname">ped_phase_channels</td><td>a vector of active pedestrian phases associated with a channel </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00227">227</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  227</span>                                                                                                                                        {</div>
<div class="line"><span class="lineno">  228</span>        </div>
<div class="line"><span class="lineno">  229</span>        <span class="comment">// Loop through channel control types and add channels with vehicle phase to list</span></div>
<div class="line"><span class="lineno">  230</span>        snmp_response_obj control_type;</div>
<div class="line"><span class="lineno">  231</span>        control_type.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  232</span>        </div>
<div class="line"><span class="lineno">  233</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  234</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel_num = 1; channel_num &lt;= max_channels; ++channel_num)</div>
<div class="line"><span class="lineno">  235</span>        {</div>
<div class="line"><span class="lineno">  236</span>            std::string control_type_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a9c039d3da352a48fe04ff8fd43014fec">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(channel_num);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>            <span class="keywordflow">if</span>(!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(control_type_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, control_type))</div>
<div class="line"><span class="lineno">  239</span>            {</div>
<div class="line"><span class="lineno">  240</span>                <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;Failed to get channel control type&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>            }</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>            <span class="keywordflow">if</span>(control_type.val_int == 2)</div>
<div class="line"><span class="lineno">  244</span>            {</div>
<div class="line"><span class="lineno">  245</span>                vehicle_phase_channels.push_back(channel_num);</div>
<div class="line"><span class="lineno">  246</span>            }</div>
<div class="line"><span class="lineno">  247</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(control_type.val_int == 3)</div>
<div class="line"><span class="lineno">  248</span>            {</div>
<div class="line"><span class="lineno">  249</span>                ped_phase_channels.push_back(channel_num);</div>
<div class="line"><span class="lineno">  250</span>            }</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">if</span>(vehicle_phase_channels.empty()){</div>
<div class="line"><span class="lineno">  255</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Found no active vehicle phases&quot;</span>);</div>
<div class="line"><span class="lineno">  256</span>        }</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">if</span>(ped_phase_channels.empty()){</div>
<div class="line"><span class="lineno">  258</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;Found no active ped phases&quot;</span>);</div>
<div class="line"><span class="lineno">  259</span>        }</div>
<div class="line"><span class="lineno">  260</span>        </div>
<div class="line"><span class="lineno">  261</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Number of vehicle phase channels found: {0}&quot;</span>, vehicle_phase_channels.size());</div>
<div class="line"><span class="lineno">  262</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Number of ped phase channels found: {0}&quot;</span>, ped_phase_channels.size());</div>
<div class="line"><span class="lineno">  263</span>        </div>
<div class="line"><span class="lineno">  264</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a9c039d3da352a48fe04ff8fd43014fec"><div class="ttname"><a href="namespacentcip__oids.html#a9c039d3da352a48fe04ff8fd43014fec">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a></div><div class="ttdeci">static const std::string CHANNEL_CONTROL_TYPE_PARAMETER</div><div class="ttdoc">OID for Channel control type: Used with (.channel number) This object defines the channel control typ...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00024">ntcip_oids.h:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__oids_8h_source.html#l00024">ntcip_oids::CHANNEL_CONTROL_TYPE_PARAMETER</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_cgraph">
<area shape="rect" title="Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap,..." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_a54bb0ddd47fca73403bbc52bbcfba988_icgraph">
<area shape="rect" title="Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap,..." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="ae5bfca513648fa55566289fe8a9de750" name="ae5bfca513648fa55566289fe8a9de750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5bfca513648fa55566289fe8a9de750">&#9670;&nbsp;</a></span>get_red_clearance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_red_clearance </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get red clearance time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the red clearance needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>red clearance time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00335">335</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  336</span>    {</div>
<div class="line"><span class="lineno">  337</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> get_request = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  338</span>        std::string red_clearance_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a3ea2c7de3db40c5169671e9c74083bba">ntcip_oids::RED_CLEAR_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>        snmp_response_obj red_clearance;</div>
<div class="line"><span class="lineno">  341</span>        red_clearance.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(red_clearance_oid, get_request, red_clearance);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) red_clearance.val_int * 100; <span class="comment">//Convert to milliseconds. NTCIP returned value is in tenths of seconds</span></div>
<div class="line"><span class="lineno">  346</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a3ea2c7de3db40c5169671e9c74083bba"><div class="ttname"><a href="namespacentcip__oids.html#a3ea2c7de3db40c5169671e9c74083bba">ntcip_oids::RED_CLEAR_PARAMETER</a></div><div class="ttdeci">static const std::string RED_CLEAR_PARAMETER</div><div class="ttdoc">Following the yellow change interval for each phase, the CU shall provide a red clearance interval wh...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00065">ntcip_oids.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="ntcip__oids_8h_source.html#l00065">ntcip_oids::RED_CLEAR_PARAMETER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, and <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_cgraph">
<area shape="rect" title="Get red clearance time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae5bfca513648fa55566289fe8a9de750_icgraph">
<area shape="rect" title="Get red clearance time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="acaee10dcfb57b70be35a81723b21761b" name="acaee10dcfb57b70be35a81723b21761b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaee10dcfb57b70be35a81723b21761b">&#9670;&nbsp;</a></span>get_red_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_red_duration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get red duration for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the red duration needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>red duration time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00348">348</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  349</span>    {</div>
<div class="line"><span class="lineno">  350</span>        <span class="comment">//red duration is calculated as red_clearance time for current phase + (green duration + yellow duration + red_clearance) for other phases in sequence</span></div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>        <span class="comment">// Find signal state associated with phase num</span></div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordtype">int</span> current_signal_group;</div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.find(phase_num) != <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.end())</div>
<div class="line"><span class="lineno">  355</span>        {</div>
<div class="line"><span class="lineno">  356</span>            current_signal_group = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>[phase_num];</div>
<div class="line"><span class="lineno">  357</span>        }</div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;No signal state associated with phase &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num) + <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  360</span>        }</div>
<div class="line"><span class="lineno">  361</span>        <span class="keyword">auto</span> current_signal_group_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>[current_signal_group];</div>
<div class="line"><span class="lineno">  362</span>        <span class="comment">// Only add clearance time for current phase</span></div>
<div class="line"><span class="lineno">  363</span>        <span class="keywordtype">int</span> red_duration = current_signal_group_state.red_clearance;</div>
<div class="line"><span class="lineno">  364</span>        </div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> phase : current_signal_group_state.phase_seq)</div>
<div class="line"><span class="lineno">  366</span>        {</div>
<div class="line"><span class="lineno">  367</span>            <span class="comment">// Find state params for each phase in seq</span></div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordtype">int</span> seq_signal_group;</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.find(phase_num) != <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.end())</div>
<div class="line"><span class="lineno">  370</span>            {</div>
<div class="line"><span class="lineno">  371</span>                seq_signal_group = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>[phase];</div>
<div class="line"><span class="lineno">  372</span>            }</div>
<div class="line"><span class="lineno">  373</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  374</span>                <span class="keywordflow">throw</span> snmp_client_exception(<span class="stringliteral">&quot;No signal state associated with phase &quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase) + <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>            }</div>
<div class="line"><span class="lineno">  376</span>            <span class="keyword">auto</span> seq_signal_group_state = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>[seq_signal_group];</div>
<div class="line"><span class="lineno">  377</span>            <span class="keywordflow">if</span>(phase == phase_num)</div>
<div class="line"><span class="lineno">  378</span>            {</div>
<div class="line"><span class="lineno">  379</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  380</span>            }</div>
<div class="line"><span class="lineno">  381</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  382</span>                red_duration += seq_signal_group_state.green_duration + seq_signal_group_state.yellow_duration + seq_signal_group_state.red_clearance;</div>
<div class="line"><span class="lineno">  383</span>            }</div>
<div class="line"><span class="lineno">  384</span>        }</div>
<div class="line"><span class="lineno">  385</span>        </div>
<div class="line"><span class="lineno">  386</span>        <span class="keywordflow">return</span> red_duration; </div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a65824bd6c615b5f4105511c0738aeb89"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">traffic_signal_controller_service::tsc_state::vehicle_phase_num_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; vehicle_phase_num_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00051">monitor_tsc_state.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00045">signal_group_state_map_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00051">vehicle_phase_num_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_cgraph">
<area shape="rect" title="Get red duration for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_acaee10dcfb57b70be35a81723b21761b_icgraph">
<area shape="rect" title="Get red duration for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="a27876c0c6172cbb37788cadd97bf6ff3" name="a27876c0c6172cbb37788cadd97bf6ff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27876c0c6172cbb37788cadd97bf6ff3">&#9670;&nbsp;</a></span>get_signal_group_state_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a> &gt; &amp; traffic_signal_controller_service::tsc_state::get_signal_group_state_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return reference to signal group state map. </p>
<dl class="section return"><dt>Returns</dt><dd>std::unordered_map&lt;int, signal_group_state&gt;&amp; </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00455">455</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  456</span>    {</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>;</div>
<div class="line"><span class="lineno">  458</span>    }        </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00045">signal_group_state_map_</a>.</p>

</div>
</div>
<a id="a40c96f54a5eb802026f93906dc1b77d8" name="a40c96f54a5eb802026f93906dc1b77d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c96f54a5eb802026f93906dc1b77d8">&#9670;&nbsp;</a></span>get_vehicle_phase_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; int, int &gt; &amp; traffic_signal_controller_service::tsc_state::get_vehicle_phase_map </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a map of pedestrian phases to signal group ids. </p>
<dl class="section return"><dt>Returns</dt><dd>a map of pedestrian phases to signal group ids </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00450">450</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  451</span>    {</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>;</div>
<div class="line"><span class="lineno">  453</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00051">vehicle_phase_num_map_</a>.</p>

</div>
</div>
<a id="ae76cdfcdb7d2cbd8fcf0afef1d0f8925" name="ae76cdfcdb7d2cbd8fcf0afef1d0f8925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">&#9670;&nbsp;</a></span>get_yellow_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::get_yellow_duration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>phase_num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get yellow duration time for a phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_num</td><td>The phase for which the yellow duration needs to be requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>yellow duration time in milliseconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00322">322</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  323</span>    {</div>
<div class="line"><span class="lineno">  324</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  325</span>        std::string yellow_duration_oid = <a class="code hl_variable" href="namespacentcip__oids.html#a8af63441377ae9f0975ef2d6dc2c744e">ntcip_oids::YELLOW_CHANGE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(phase_num);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>        snmp_response_obj yellow_duration;</div>
<div class="line"><span class="lineno">  328</span>        yellow_duration.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  329</span>        </div>
<div class="line"><span class="lineno">  330</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a> -&gt;process_snmp_request(yellow_duration_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, yellow_duration);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) yellow_duration.val_int * 100; <span class="comment">//Convert to milliseconds. NTCIP returned value is in tenths of seconds</span></div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_a8af63441377ae9f0975ef2d6dc2c744e"><div class="ttname"><a href="namespacentcip__oids.html#a8af63441377ae9f0975ef2d6dc2c744e">ntcip_oids::YELLOW_CHANGE_PARAMETER</a></div><div class="ttdeci">static const std::string YELLOW_CHANGE_PARAMETER</div><div class="ttdoc">Phase Yellow Change Parameter: Following the green interval of each phase, the CU shall provide a yel...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00049">ntcip_oids.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>, and <a class="el" href="ntcip__oids_8h_source.html#l00049">ntcip_oids::YELLOW_CHANGE_PARAMETER</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_cgraph">
<area shape="rect" title="Get yellow duration time for a phase." alt="" coords="5,5,160,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="208,20,280,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_ae76cdfcdb7d2cbd8fcf0afef1d0f8925_icgraph">
<area shape="rect" title="Get yellow duration time for a phase." alt="" coords="236,5,391,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="af051312a2931c0f7db32b3d0439a2e6b" name="af051312a2931c0f7db32b3d0439a2e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af051312a2931c0f7db32b3d0439a2e6b">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_state::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> by making SNMP calls to TSC for phase sequence and timing information. </p>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">10</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   10</span>                               {</div>
<div class="line"><span class="lineno">   11</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   12</span>            <span class="comment">// Map signal group ids and phase nums</span></div>
<div class="line"><span class="lineno">   13</span>            <span class="comment">//Get phase number given a signal group id</span></div>
<div class="line"><span class="lineno">   14</span>            <span class="keywordtype">int</span> max_channels_in_tsc = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">get_max_channels</a>();</div>
<div class="line"><span class="lineno">   15</span>            std::vector&lt;int&gt; vehicle_phase_channels;</div>
<div class="line"><span class="lineno">   16</span>            std::vector&lt;int&gt; ped_phase_channels;</div>
<div class="line"><span class="lineno">   17</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a54bb0ddd47fca73403bbc52bbcfba988">get_phase_channels</a>(max_channels_in_tsc, vehicle_phase_channels, ped_phase_channels);</div>
<div class="line"><span class="lineno">   18</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb">map_phase_and_signalgroup</a>(vehicle_phase_channels, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   19</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb">map_phase_and_signalgroup</a>(ped_phase_channels, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   20</span>            <span class="comment">// Get phase sequences for ring 1 and ring 2</span></div>
<div class="line"><span class="lineno">   21</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a1f7c1e663e2b2e41e1d3cfb902208add">phase_seq_ring1_</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>(1);</div>
<div class="line"><span class="lineno">   22</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73756e2d00260dfccd9838cf147bf823">phase_seq_ring2_</a> = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>(2);</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>            <span class="comment">// Define state of each signal group</span></div>
<div class="line"><span class="lineno">   25</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; signal_group : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a5589bc2137028ff1c1b7ec39bf360fb0">signal_group_phase_map_</a>)</div>
<div class="line"><span class="lineno">   26</span>            {</div>
<div class="line"><span class="lineno">   27</span>                <span class="keywordtype">int</span> phase_num = signal_group.second;</div>
<div class="line"><span class="lineno">   28</span>                signal_group_state state;</div>
<div class="line"><span class="lineno">   29</span>                state.phase_num = phase_num;</div>
<div class="line"><span class="lineno">   30</span>                state.max_green = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">get_max_green</a>(phase_num);</div>
<div class="line"><span class="lineno">   31</span>                state.min_green = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">get_min_green</a>(phase_num);</div>
<div class="line"><span class="lineno">   32</span>                state.yellow_duration = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">get_yellow_duration</a>(phase_num);</div>
<div class="line"><span class="lineno">   33</span>                <span class="comment">// Define green duration as min/max as decided</span></div>
<div class="line"><span class="lineno">   34</span>                state.green_duration = state.min_green;</div>
<div class="line"><span class="lineno">   35</span>                state.red_clearance = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">get_red_clearance</a>(phase_num);</div>
<div class="line"><span class="lineno">   36</span>                state.phase_seq = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a08b298b1834ff6c717926a4d0d4b9ef7">get_following_phases</a>(phase_num);</div>
<div class="line"><span class="lineno">   37</span>                state.concurrent_phases = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#a926ae227a45a7cec9c442c33eeade951">get_concurrent_phases</a>(phase_num);</div>
<div class="line"><span class="lineno">   38</span>                <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>.insert(std::make_pair(signal_group.first, state));</div>
<div class="line"><span class="lineno">   39</span>            }</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>        </div>
<div class="line"><span class="lineno">   42</span>            <span class="comment">// Loop through states once other state parameters are defined to get the red duration</span></div>
<div class="line"><span class="lineno">   43</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; [signal_group, state] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>)</div>
<div class="line"><span class="lineno">   44</span>            {</div>
<div class="line"><span class="lineno">   45</span>                </div>
<div class="line"><span class="lineno">   46</span>                state.red_duration = <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">get_red_duration</a>(state.phase_num);</div>
<div class="line"><span class="lineno">   47</span>            }</div>
<div class="line"><span class="lineno">   48</span>            </div>
<div class="line"><span class="lineno">   49</span>            <span class="comment">// Print signal_group map</span></div>
<div class="line"><span class="lineno">   50</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signal_group, phase] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a5589bc2137028ff1c1b7ec39bf360fb0">signal_group_phase_map_</a>)</div>
<div class="line"><span class="lineno">   51</span>            {</div>
<div class="line"><span class="lineno">   52</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Signal group id: {0} phase: {1}&quot;</span>, signal_group, phase);</div>
<div class="line"><span class="lineno">   53</span>            }</div>
<div class="line"><span class="lineno">   54</span>            <span class="comment">// Print state map</span></div>
<div class="line"><span class="lineno">   55</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [signal_group, state] : <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#ac8e58f3d13b58c85c3cea5d6e3961af0">signal_group_state_map_</a>)</div>
<div class="line"><span class="lineno">   56</span>            {</div>
<div class="line"><span class="lineno">   57</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Signal group id: {0}&quot;</span>, signal_group);</div>
<div class="line"><span class="lineno">   58</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Phase num: {0}&quot;</span>, state.phase_num);</div>
<div class="line"><span class="lineno">   59</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Max green: {0}&quot;</span>, state.max_green);</div>
<div class="line"><span class="lineno">   60</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Min green: {0}&quot;</span>, state.min_green);</div>
<div class="line"><span class="lineno">   61</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Green Duration: {0}&quot;</span>, state.green_duration);</div>
<div class="line"><span class="lineno">   62</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;yellow duration: {0}&quot;</span>, state.yellow_duration);</div>
<div class="line"><span class="lineno">   63</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Red clearance: {0}&quot;</span>, state.red_clearance);</div>
<div class="line"><span class="lineno">   64</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Red duration: {0}&quot;</span>, state.red_duration);</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Phase sequence:&quot;</span>);</div>
<div class="line"><span class="lineno">   67</span>                <span class="keywordflow">for</span>(<span class="keyword">auto</span> phase : state.phase_seq){</div>
<div class="line"><span class="lineno">   68</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;{0}&quot;</span>, phase);</div>
<div class="line"><span class="lineno">   69</span>                }</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Concurrent Phases:&quot;</span>);</div>
<div class="line"><span class="lineno">   72</span>                <span class="keywordflow">for</span>(<span class="keyword">auto</span> phase : state.concurrent_phases){</div>
<div class="line"><span class="lineno">   73</span>                    SPDLOG_DEBUG(<span class="stringliteral">&quot;{0}&quot;</span>, phase);</div>
<div class="line"><span class="lineno">   74</span>                }  </div>
<div class="line"><span class="lineno">   75</span>            }</div>
<div class="line"><span class="lineno">   76</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   77</span>        }<span class="keywordflow">catch</span> ( <span class="keyword">const</span> snmp_client_exception &amp;e ) {</div>
<div class="line"><span class="lineno">   78</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Exception encounters during initialization: \n {0}&quot;</span>,e.what());</div>
<div class="line"><span class="lineno">   79</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   80</span>        }</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a08b298b1834ff6c717926a4d0d4b9ef7"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a08b298b1834ff6c717926a4d0d4b9ef7">traffic_signal_controller_service::tsc_state::get_following_phases</a></div><div class="ttdeci">std::vector&lt; int &gt; get_following_phases(int phase_num)</div><div class="ttdoc">Get a sequence of phases following the given phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00184">monitor_tsc_state.cpp:184</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a2f1d658bc65133d1ba6b4f03d593ffb3"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3">traffic_signal_controller_service::tsc_state::get_max_channels</a></div><div class="ttdeci">int get_max_channels() const</div><div class="ttdoc">Method for getting maximum channels for the traffic signal controller.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00214">monitor_tsc_state.cpp:214</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a54bb0ddd47fca73403bbc52bbcfba988"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a54bb0ddd47fca73403bbc52bbcfba988">traffic_signal_controller_service::tsc_state::get_phase_channels</a></div><div class="ttdeci">void get_phase_channels(int max_channels, std::vector&lt; int &gt; &amp;vehicle_phase_channels, std::vector&lt; int &gt; &amp;ped_phase_channels) const</div><div class="ttdoc">Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap,...</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00227">monitor_tsc_state.cpp:227</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a5589bc2137028ff1c1b7ec39bf360fb0"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a5589bc2137028ff1c1b7ec39bf360fb0">traffic_signal_controller_service::tsc_state::signal_group_phase_map_</a></div><div class="ttdeci">std::unordered_map&lt; int, int &gt; signal_group_phase_map_</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8h_source.html#l00048">monitor_tsc_state.h:48</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a73acb7d06ec8d69783f369c504a3010c"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c">traffic_signal_controller_service::tsc_state::get_min_green</a></div><div class="ttdeci">int get_min_green(int phase_num) const</div><div class="ttdoc">Get minimum green time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00296">monitor_tsc_state.cpp:296</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_a926ae227a45a7cec9c442c33eeade951"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#a926ae227a45a7cec9c442c33eeade951">traffic_signal_controller_service::tsc_state::get_concurrent_phases</a></div><div class="ttdeci">std::vector&lt; int &gt; get_concurrent_phases(int phase_num) const</div><div class="ttdoc">The concurrent phases that the given phase can be green along with.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00419">monitor_tsc_state.cpp:419</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_aa4dbbf6a17e37cbb38a43d4641bf3ec8"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8">traffic_signal_controller_service::tsc_state::get_max_green</a></div><div class="ttdeci">int get_max_green(int phase_num) const</div><div class="ttdoc">Get maximum green time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00309">monitor_tsc_state.cpp:309</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_acaee10dcfb57b70be35a81723b21761b"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b">traffic_signal_controller_service::tsc_state::get_red_duration</a></div><div class="ttdeci">int get_red_duration(int phase_num)</div><div class="ttdoc">Get red duration for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00348">monitor_tsc_state.cpp:348</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ae5bfca513648fa55566289fe8a9de750"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750">traffic_signal_controller_service::tsc_state::get_red_clearance</a></div><div class="ttdeci">int get_red_clearance(int phase_num) const</div><div class="ttdoc">Get red clearance time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00335">monitor_tsc_state.cpp:335</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_ae76cdfcdb7d2cbd8fcf0afef1d0f8925"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925">traffic_signal_controller_service::tsc_state::get_yellow_duration</a></div><div class="ttdeci">int get_yellow_duration(int phase_num) const</div><div class="ttdoc">Get yellow duration time for a phase.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00322">monitor_tsc_state.cpp:322</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_af0f1926f5f6495742d204dbde1bf9dbb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb">traffic_signal_controller_service::tsc_state::map_phase_and_signalgroup</a></div><div class="ttdeci">void map_phase_and_signalgroup(const std::vector&lt; int &gt; &amp;phase_channels, bool is_source_vehicle_channel)</div><div class="ttdoc">Constructs a map between phase number and signal group ids.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00266">monitor_tsc_state.cpp:266</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__state_html_afbb0dd3e03340b8363e34510eb7f5ab7"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">traffic_signal_controller_service::tsc_state::phase_seq</a></div><div class="ttdeci">std::vector&lt; int &gt; phase_seq(int ring_num)</div><div class="ttdoc">Get a sequence of phases in the given ring.</div><div class="ttdef"><b>Definition:</b> <a href="monitor__tsc__state_8cpp_source.html#l00389">monitor_tsc_state.cpp:389</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monitor__tsc__state_8h_source.html#l00035">traffic_signal_controller_service::signal_group_state::concurrent_phases</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00419">get_concurrent_phases()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00184">get_following_phases()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00214">get_max_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00309">get_max_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00296">get_min_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00227">get_phase_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00335">get_red_clearance()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00348">get_red_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00322">get_yellow_duration()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00025">traffic_signal_controller_service::signal_group_state::green_duration</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">map_phase_and_signalgroup()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00023">traffic_signal_controller_service::signal_group_state::max_green</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00021">traffic_signal_controller_service::signal_group_state::min_green</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00019">traffic_signal_controller_service::signal_group_state::phase_num</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00033">traffic_signal_controller_service::signal_group_state::phase_seq</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">phase_seq()</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00057">phase_seq_ring1_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00059">phase_seq_ring2_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00029">traffic_signal_controller_service::signal_group_state::red_clearance</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00048">signal_group_phase_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00045">signal_group_state_map_</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00027">traffic_signal_controller_service::signal_group_state::yellow_duration</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af051312a2931c0f7db32b3d0439a2e6b_cgraph">
<area shape="rect" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,413,188,454"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a926ae227a45a7cec9c442c33eeade951" title="The concurrent phases that the given phase can be green along with." alt="" coords="259,5,413,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a08b298b1834ff6c717926a4d0d4b9ef7" title="Get a sequence of phases following the given phase." alt="" coords="259,85,413,141"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a2f1d658bc65133d1ba6b4f03d593ffb3" title="Method for getting maximum channels for the traffic signal controller." alt="" coords="259,165,413,221"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#aa4dbbf6a17e37cbb38a43d4641bf3ec8" title="Get maximum green time for a phase." alt="" coords="259,245,413,301"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a73acb7d06ec8d69783f369c504a3010c" title="Get minimum green time for a phase." alt="" coords="259,325,413,381"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#a54bb0ddd47fca73403bbc52bbcfba988" title="Creates vectors of channels associated with a vehicle phase and a pedestrian. Ignores overlap,..." alt="" coords="259,405,413,461"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae5bfca513648fa55566289fe8a9de750" title="Get red clearance time for a phase." alt="" coords="259,485,413,541"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#acaee10dcfb57b70be35a81723b21761b" title="Get red duration for a phase." alt="" coords="259,565,413,621"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#ae76cdfcdb7d2cbd8fcf0afef1d0f8925" title="Get yellow duration time for a phase." alt="" coords="259,645,413,701"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af0f1926f5f6495742d204dbde1bf9dbb" title="Constructs a map between phase number and signal group ids." alt="" coords="253,725,419,781"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7" title="Get a sequence of phases in the given ring." alt="" coords="236,830,436,871"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="484,500,556,527"/>
</map>
</div>

</div>
</div>
<a id="af0f1926f5f6495742d204dbde1bf9dbb" name="af0f1926f5f6495742d204dbde1bf9dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0f1926f5f6495742d204dbde1bf9dbb">&#9670;&nbsp;</a></span>map_phase_and_signalgroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_state::map_phase_and_signalgroup </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>phase_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_source_vehicle_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a map between phase number and signal group ids. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_channels</td><td>a vector of channel numbers in the traffic signal controller associated with a phase </td></tr>
    <tr><td class="paramname">is_source_vehicle_channel</td><td>a boolean that indicates whether the phase_channels arg is for channels associated with vehicle phases. In case they are not its assumed that they are pedestrian phases According to the NTCIP 1202 v03 documentation signal group ids in the SPAT message are the channel numbers in the TSC </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">266</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  267</span>    {</div>
<div class="line"><span class="lineno">  268</span>        <span class="comment">// According to NTCIP 1202 v03 documentation Signal Group ID in a SPAT message is the Channel Number from TSC</span></div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>        <span class="comment">// Get phases associated with vehicle phase channels</span></div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  272</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel : phase_channels)</div>
<div class="line"><span class="lineno">  273</span>        {</div>
<div class="line"><span class="lineno">  274</span>            snmp_response_obj phase_num;</div>
<div class="line"><span class="lineno">  275</span>            phase_num.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>            std::string control_source_parameter_oid = <a class="code hl_variable" href="namespacentcip__oids.html#adbf60170a7e456fe10c1b7ef1f84a262">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(channel);</div>
<div class="line"><span class="lineno">  278</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(control_source_parameter_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, phase_num);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>            <span class="comment">// According to NTCIP 1202 v03 returned value of 0 here would mean a phase is not associated with the channel</span></div>
<div class="line"><span class="lineno">  281</span>            <span class="keywordflow">if</span>(phase_num.val_int != 0)</div>
<div class="line"><span class="lineno">  282</span>            {</div>
<div class="line"><span class="lineno">  283</span>                <span class="keywordflow">if</span>(is_source_vehicle_channel){</div>
<div class="line"><span class="lineno">  284</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.insert(std::make_pair(phase_num.val_int, channel));</div>
<div class="line"><span class="lineno">  285</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a5589bc2137028ff1c1b7ec39bf360fb0">signal_group_phase_map_</a>.insert(std::make_pair(channel, phase_num.val_int));</div>
<div class="line"><span class="lineno">  286</span>                }</div>
<div class="line"><span class="lineno">  287</span>                <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  288</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a8f31ba52cf271dee1b6caec284f9103f">ped_phase_num_map_</a>.insert(std::make_pair(phase_num.val_int, channel));</div>
<div class="line"><span class="lineno">  289</span>                }</div>
<div class="line"><span class="lineno">  290</span>                SPDLOG_DEBUG(<span class="stringliteral">&quot;Found mapping between signal group: {0} and phase num: {1}&quot;</span>, channel , phase_num.val_int );</div>
<div class="line"><span class="lineno">  291</span>            }</div>
<div class="line"><span class="lineno">  292</span>        }</div>
<div class="line"><span class="lineno">  293</span>        </div>
<div class="line"><span class="lineno">  294</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_adbf60170a7e456fe10c1b7ef1f84a262"><div class="ttname"><a href="namespacentcip__oids.html#adbf60170a7e456fe10c1b7ef1f84a262">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a></div><div class="ttdeci">static const std::string CHANNEL_CONTROL_SOURCE_PARAMETER</div><div class="ttdoc">OID for Channel control source: Used with (.channel number) Value 00 = No Control (Not In Use) Value ...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00036">ntcip_oids.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ntcip__oids_8h_source.html#l00036">ntcip_oids::CHANNEL_CONTROL_SOURCE_PARAMETER</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00054">ped_phase_num_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00048">signal_group_phase_map_</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, <a class="el" href="snmp__client_8h_source.html#l00037">traffic_signal_controller_service::snmp_response_obj::val_int</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00051">vehicle_phase_num_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_cgraph">
<area shape="rect" title="Constructs a map between phase number and signal group ids." alt="" coords="5,5,171,61"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="219,20,291,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_af0f1926f5f6495742d204dbde1bf9dbb_icgraph">
<area shape="rect" title="Constructs a map between phase number and signal group ids." alt="" coords="236,5,401,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,13,188,54"/>
</map>
</div>

</div>
</div>
<a id="afbb0dd3e03340b8363e34510eb7f5ab7" name="afbb0dd3e03340b8363e34510eb7f5ab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb0dd3e03340b8363e34510eb7f5ab7">&#9670;&nbsp;</a></span>phase_seq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; traffic_signal_controller_service::tsc_state::phase_seq </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ring_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a sequence of phases in the given ring. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_num</td><td>The phase for which the sequence needs to be obtained </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector as a sequence of phases in the ring </dd></dl>

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">389</a> of file <a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>    {</div>
<div class="line"><span class="lineno">  391</span>        std::vector&lt;int&gt; <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>;</div>
<div class="line"><span class="lineno">  392</span>        <span class="comment">// Read sequence 1 data for first 2 rings</span></div>
<div class="line"><span class="lineno">  393</span>        <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a> = <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">request_type::GET</a>;</div>
<div class="line"><span class="lineno">  394</span>        std::string phase_seq_oid= <a class="code hl_variable" href="namespacentcip__oids.html#aa886cce34306b7d970f546e495a80480">ntcip_oids::SEQUENCE_DATA</a> + <span class="stringliteral">&quot;.&quot;</span> + <span class="stringliteral">&quot;1&quot;</span> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code hl_function" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">std::to_string</a>(ring_num); <span class="comment">//Sequence 1 for ring</span></div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>        snmp_response_obj seq_data;</div>
<div class="line"><span class="lineno">  397</span>        seq_data.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">snmp_response_obj::response_type::STRING</a>;</div>
<div class="line"><span class="lineno">  398</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a32ec176910fce4545704a6153c3407eb">snmp_client_worker_</a>-&gt;process_snmp_request(phase_seq_oid, <a class="code hl_enumeration" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61">request_type</a>, seq_data);</div>
<div class="line"><span class="lineno">  399</span>        </div>
<div class="line"><span class="lineno">  400</span>        <span class="comment">//extract phase numbers from strings</span></div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span> seq_val : seq_data.val_string)</div>
<div class="line"><span class="lineno">  402</span>        {   </div>
<div class="line"><span class="lineno">  403</span>            <span class="keyword">auto</span> phase = int(seq_val);</div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.find(phase)!= <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__state.html#a65824bd6c615b5f4105511c0738aeb89">vehicle_phase_num_map_</a>.end() &amp;&amp; phase != 0 ){</div>
<div class="line"><span class="lineno">  405</span>                <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>.push_back(phase);</div>
<div class="line"><span class="lineno">  406</span>            }</div>
<div class="line"><span class="lineno">  407</span>            </div>
<div class="line"><span class="lineno">  408</span>        }</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>.empty())</div>
<div class="line"><span class="lineno">  411</span>        {</div>
<div class="line"><span class="lineno">  412</span>            SPDLOG_WARN(<span class="stringliteral">&quot;No phases found in sequence 1 for ring {0}&quot;</span>, ring_num);</div>
<div class="line"><span class="lineno">  413</span>        }</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__state.html#afbb0dd3e03340b8363e34510eb7f5ab7">phase_seq</a>;</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="ttc" id="anamespacentcip__oids_html_aa886cce34306b7d970f546e495a80480"><div class="ttname"><a href="namespacentcip__oids.html#aa886cce34306b7d970f546e495a80480">ntcip_oids::SEQUENCE_DATA</a></div><div class="ttdeci">static const std::string SEQUENCE_DATA</div><div class="ttdoc">Each octet is a phase number within the associated ring number. The phase number value shall not exce...</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00056">ntcip_oids.h:56</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a7528035a93ee69cedb1dbddb2f0bfcc8">traffic_signal_controller_service::GET</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">phase_seq()</a>, <a class="el" href="ntcip__oids_8h_source.html#l00056">ntcip_oids::SEQUENCE_DATA</a>, <a class="el" href="monitor__tsc__state_8h_source.html#l00042">snmp_client_worker_</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa63b588d5559f64f89a416e656880b949">traffic_signal_controller_service::snmp_response_obj::STRING</a>, <a class="el" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd">to_string()</a>, <a class="el" href="snmp__client_8h_source.html#l00039">traffic_signal_controller_service::snmp_response_obj::type</a>, <a class="el" href="snmp__client_8h_source.html#l00038">traffic_signal_controller_service::snmp_response_obj::val_string</a>, and <a class="el" href="monitor__tsc__state_8h_source.html#l00051">vehicle_phase_num_map_</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">phase_seq()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_cgraph">
<area shape="rect" title="Get a sequence of phases in the given ring." alt="" coords="5,29,205,71"/>
<area shape="rect" href="ntcip__1202__ext_8h.html#a576de7b60eacee3f1a70393a005502cd" title="Returns std::string representation of ntcip_1202_ext message including phase_times array." alt="" coords="253,37,325,63"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__state_afbb0dd3e03340b8363e34510eb7f5ab7_icgraph">
<area shape="rect" title="Get a sequence of phases in the given ring." alt="" coords="236,29,436,71"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__state.html#af051312a2931c0f7db32b3d0439a2e6b" title="Initialize tsc_state by making SNMP calls to TSC for phase sequence and timing information." alt="" coords="5,29,188,71"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a73f09fdaac8a6376b65ad18c44459c9c" name="a73f09fdaac8a6376b65ad18c44459c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f09fdaac8a6376b65ad18c44459c9c">&#9670;&nbsp;</a></span>HOUR_TO_SECONDS_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::HOUR_TO_SECONDS_ = 3600</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00065">65</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00468">convert_hour_tenth_secs2epoch_ts()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">convert_msepoch_to_hour_tenth_secs()</a>.</p>

</div>
</div>
<a id="a8f31ba52cf271dee1b6caec284f9103f" name="a8f31ba52cf271dee1b6caec284f9103f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f31ba52cf271dee1b6caec284f9103f">&#9670;&nbsp;</a></span>ped_phase_num_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int,int&gt; traffic_signal_controller_service::tsc_state::ped_phase_num_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00054">54</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00445">get_ped_phase_map()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">map_phase_and_signalgroup()</a>.</p>

</div>
</div>
<a id="a1f7c1e663e2b2e41e1d3cfb902208add" name="a1f7c1e663e2b2e41e1d3cfb902208add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7c1e663e2b2e41e1d3cfb902208add">&#9670;&nbsp;</a></span>phase_seq_ring1_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; traffic_signal_controller_service::tsc_state::phase_seq_ring1_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00057">57</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00184">get_following_phases()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="a73756e2d00260dfccd9838cf147bf823" name="a73756e2d00260dfccd9838cf147bf823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73756e2d00260dfccd9838cf147bf823">&#9670;&nbsp;</a></span>phase_seq_ring2_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; traffic_signal_controller_service::tsc_state::phase_seq_ring2_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00059">59</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00184">get_following_phases()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="ace2712eeb290c972b3ead1c4ee7e7744" name="ace2712eeb290c972b3ead1c4ee7e7744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace2712eeb290c972b3ead1c4ee7e7744">&#9670;&nbsp;</a></span>required_following_movements_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::required_following_movements_ = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00062">62</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">add_future_movement_events()</a>.</p>

</div>
</div>
<a id="a17d34ab64b5d3eda6f05a5f3c7622475" name="a17d34ab64b5d3eda6f05a5f3c7622475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d34ab64b5d3eda6f05a5f3c7622475">&#9670;&nbsp;</a></span>SECOND_TO_MILLISECONDS_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traffic_signal_controller_service::tsc_state::SECOND_TO_MILLISECONDS_ = 1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00066">66</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00468">convert_hour_tenth_secs2epoch_ts()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00460">convert_msepoch_to_hour_tenth_secs()</a>.</p>

</div>
</div>
<a id="a5589bc2137028ff1c1b7ec39bf360fb0" name="a5589bc2137028ff1c1b7ec39bf360fb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5589bc2137028ff1c1b7ec39bf360fb0">&#9670;&nbsp;</a></span>signal_group_phase_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, int&gt; traffic_signal_controller_service::tsc_state::signal_group_phase_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00048">48</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">map_phase_and_signalgroup()</a>.</p>

</div>
</div>
<a id="ac8e58f3d13b58c85c3cea5d6e3961af0" name="ac8e58f3d13b58c85c3cea5d6e3961af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8e58f3d13b58c85c3cea5d6e3961af0">&#9670;&nbsp;</a></span>signal_group_state_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int, <a class="el" href="structtraffic__signal__controller__service_1_1signal__group__state.html">signal_group_state</a>&gt; traffic_signal_controller_service::tsc_state::signal_group_state_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00045">45</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00117">add_future_movement_events()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00348">get_red_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00455">get_signal_group_state_map()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00010">initialize()</a>.</p>

</div>
</div>
<a id="a32ec176910fce4545704a6153c3407eb" name="a32ec176910fce4545704a6153c3407eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ec176910fce4545704a6153c3407eb">&#9670;&nbsp;</a></span>snmp_client_worker_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>&gt; traffic_signal_controller_service::tsc_state::snmp_client_worker_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00042">42</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00419">get_concurrent_phases()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00214">get_max_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00309">get_max_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00296">get_min_green()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00227">get_phase_channels()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00335">get_red_clearance()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00322">get_yellow_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">map_phase_and_signalgroup()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">phase_seq()</a>.</p>

</div>
</div>
<a id="a65824bd6c615b5f4105511c0738aeb89" name="a65824bd6c615b5f4105511c0738aeb89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65824bd6c615b5f4105511c0738aeb89">&#9670;&nbsp;</a></span>vehicle_phase_num_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;int,int&gt; traffic_signal_controller_service::tsc_state::vehicle_phase_num_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="monitor__tsc__state_8h_source.html#l00051">51</a> of file <a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="monitor__tsc__state_8cpp_source.html#l00348">get_red_duration()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00450">get_vehicle_phase_map()</a>, <a class="el" href="monitor__tsc__state_8cpp_source.html#l00266">map_phase_and_signalgroup()</a>, and <a class="el" href="monitor__tsc__state_8cpp_source.html#l00389">phase_seq()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tsc_client_service/include/<a class="el" href="monitor__tsc__state_8h_source.html">monitor_tsc_state.h</a></li>
<li>tsc_client_service/src/<a class="el" href="monitor__tsc__state_8cpp_source.html">monitor_tsc_state.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetraffic__signal__controller__service.html">traffic_signal_controller_service</a></li><li class="navelem"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a></li>
    <li class="footer">Generated on Tue Oct 4 2022 17:45:38 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
