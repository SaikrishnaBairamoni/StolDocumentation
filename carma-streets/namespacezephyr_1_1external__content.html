<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: zephyr.external_content Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacezephyr_1_1external__content.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">zephyr.external_content Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae4c560a73827fbe74bb01403d54ceec0"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacezephyr_1_1external__content.html#ae4c560a73827fbe74bb01403d54ceec0">adjust_includes</a> (Path fname, Path basepath, List[str] directives, str encoding, Optional[Path] dstpath=None)</td></tr>
<tr class="separator:ae4c560a73827fbe74bb01403d54ceec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9f192f2fd867d5768c59a81ae51ca7"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacezephyr_1_1external__content.html#a6a9f192f2fd867d5768c59a81ae51ca7">sync_contents</a> (Sphinx app)</td></tr>
<tr class="separator:a6a9f192f2fd867d5768c59a81ae51ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dcf308d6f664210596abd84c82a26c7"><td class="memItemLeft" align="right" valign="top">Dict[str, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacezephyr_1_1external__content.html#a0dcf308d6f664210596abd84c82a26c7">setup</a> (Sphinx app)</td></tr>
<tr class="separator:a0dcf308d6f664210596abd84c82a26c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab733259d136b61d033974b890a451df8"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacezephyr_1_1external__content.html#ab733259d136b61d033974b890a451df8">__version__</a> = &quot;0.1.0&quot;</td></tr>
<tr class="separator:ab733259d136b61d033974b890a451df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9939d12d69003f1f6a1b9e2ec6233850"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacezephyr_1_1external__content.html#a9939d12d69003f1f6a1b9e2ec6233850">DEFAULT_DIRECTIVES</a> = (&quot;figure&quot;, &quot;image&quot;, &quot;include&quot;, &quot;literalinclude&quot;)</td></tr>
<tr class="separator:a9939d12d69003f1f6a1b9e2ec6233850"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">External content
################

Copyright (c) 2021 Nordic Semiconductor ASA
SPDX-License-Identifier: Apache-2.0

Introduction
============

This extension allows to import sources from directories out of the Sphinx
source directory. They are copied to the source directory before starting the
build. Note that the copy is *smart*, that is, only updated files are actually
copied. Therefore, incremental builds detect changes correctly and behave as
expected.

Paths for external content included via e.g. figure, literalinclude, etc.
are adjusted as needed.

Configuration options
=====================

- ``external_content_contents``: A list of external contents. Each entry is
  a tuple with two fields: the external base directory and a file glob pattern.
- ``external_content_directives``: A list of directives that should be analyzed
  and their paths adjusted if necessary. Defaults to ``DEFAULT_DIRECTIVES``.
- ``external_content_keep``: A list of file globs (relative to the destination
  directory) that should be kept even if they do not exist in the source
  directory. This option can be useful for auto-generated files in the
  destination directory.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ae4c560a73827fbe74bb01403d54ceec0" name="ae4c560a73827fbe74bb01403d54ceec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c560a73827fbe74bb01403d54ceec0">&#9670;&nbsp;</a></span>adjust_includes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None zephyr.external_content.adjust_includes </td>
          <td>(</td>
          <td class="paramtype">Path&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Path&#160;</td>
          <td class="paramname"><em>basepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List[str]&#160;</td>
          <td class="paramname"><em>directives</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>encoding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Path] &#160;</td>
          <td class="paramname"><em>dstpath</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Adjust included content paths.

Args:
    fname: File to be processed.
    basepath: Base path to be used to resolve content location.
    directives: Directives to be parsed and adjusted.
    encoding: Sources encoding.
    dstpath: Destination path for fname if its path is not the actual destination.
</pre> 
<p class="definition">Definition at line <a class="el" href="external__content_8py_source.html#l00051">51</a> of file <a class="el" href="external__content_8py_source.html">external_content.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   58</span>    <span class="stringliteral">&quot;&quot;&quot;Adjust included content paths.</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">        fname: File to be processed.</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">        basepath: Base path to be used to resolve content location.</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">        directives: Directives to be parsed </span><span class="keywordflow">and</span> adjusted.</div>
<div class="line"><span class="lineno">   64</span>        encoding: Sources encoding.</div>
<div class="line"><span class="lineno">   65</span>        dstpath: Destination path <span class="keywordflow">for</span> fname <span class="keywordflow">if</span> its path <span class="keywordflow">is</span> <span class="keywordflow">not</span> the actual destination.</div>
<div class="line"><span class="lineno">   66</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    </span><span class="keywordflow">if</span> fname.suffix != <span class="stringliteral">&quot;.rst&quot;</span>:</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    dstpath = dstpath <span class="keywordflow">or</span> fname.parent</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="keyword">def </span>_adjust(m):</div>
<div class="line"><span class="lineno">   74</span>        directive, fpath = m.groups()</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>        <span class="comment"># ignore absolute paths</span></div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">if</span> fpath.startswith(<span class="stringliteral">&quot;/&quot;</span>):</div>
<div class="line"><span class="lineno">   78</span>            fpath_adj = fpath</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   80</span>            fpath_adj = Path(os.path.relpath(basepath / fpath, dstpath)).as_posix()</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;.. {directive}:: {fpath_adj}&quot;</span></div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="keyword">with</span> open(fname, <span class="stringliteral">&quot;r+&quot;</span>, encoding=encoding) <span class="keyword">as</span> f:</div>
<div class="line"><span class="lineno">   85</span>        content = f.read()</div>
<div class="line"><span class="lineno">   86</span>        content_adj, modified = re.subn(</div>
<div class="line"><span class="lineno">   87</span>            <span class="stringliteral">r&quot;\.\. (&quot;</span> + <span class="stringliteral">&quot;|&quot;</span>.join(directives) + <span class="stringliteral">r&quot;)::\s*([^`\n]+)&quot;</span>, _adjust, content</div>
<div class="line"><span class="lineno">   88</span>        )</div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">if</span> modified:</div>
<div class="line"><span class="lineno">   90</span>            f.seek(0)</div>
<div class="line"><span class="lineno">   91</span>            f.write(content_adj)</div>
<div class="line"><span class="lineno">   92</span>            f.truncate()</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="external__content_8py_source.html#l00095">zephyr.external_content.sync_contents()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0_icgraph.png" border="0" usemap="#anamespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0_icgraph" alt=""/></div>
<map name="anamespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0_icgraph" id="anamespacezephyr_1_1external__content_ae4c560a73827fbe74bb01403d54ceec0_icgraph">
<area shape="rect" title=" " alt="" coords="240,5,435,47"/>
<area shape="rect" href="namespacezephyr_1_1external__content.html#a6a9f192f2fd867d5768c59a81ae51ca7" title=" " alt="" coords="5,5,192,47"/>
</map>
</div>

</div>
</div>
<a id="a0dcf308d6f664210596abd84c82a26c7" name="a0dcf308d6f664210596abd84c82a26c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dcf308d6f664210596abd84c82a26c7">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Dict[str, Any] zephyr.external_content.setup </td>
          <td>(</td>
          <td class="paramtype">Sphinx&#160;</td>
          <td class="paramname"><em>app</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="external__content_8py_source.html#l00165">165</a> of file <a class="el" href="external__content_8py_source.html">external_content.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span><span class="keyword">def </span><a class="code hl_function" href="namespacezephyr_1_1external__content.html#a0dcf308d6f664210596abd84c82a26c7">setup</a>(app: Sphinx) -&gt; Dict[str, Any]:</div>
<div class="line"><span class="lineno">  166</span>    app.add_config_value(<span class="stringliteral">&quot;external_content_contents&quot;</span>, [], <span class="stringliteral">&quot;env&quot;</span>)</div>
<div class="line"><span class="lineno">  167</span>    app.add_config_value(<span class="stringliteral">&quot;external_content_directives&quot;</span>, DEFAULT_DIRECTIVES, <span class="stringliteral">&quot;env&quot;</span>)</div>
<div class="line"><span class="lineno">  168</span>    app.add_config_value(<span class="stringliteral">&quot;external_content_keep&quot;</span>, [], <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    app.connect(<span class="stringliteral">&quot;builder-inited&quot;</span>, sync_contents)</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">return</span> {</div>
<div class="line"><span class="lineno">  173</span>        <span class="stringliteral">&quot;version&quot;</span>: __version__,</div>
<div class="line"><span class="lineno">  174</span>        <span class="stringliteral">&quot;parallel_read_safe&quot;</span>: <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  175</span>        <span class="stringliteral">&quot;parallel_write_safe&quot;</span>: <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="ttc" id="anamespacezephyr_1_1external__content_html_a0dcf308d6f664210596abd84c82a26c7"><div class="ttname"><a href="namespacezephyr_1_1external__content.html#a0dcf308d6f664210596abd84c82a26c7">zephyr.external_content.setup</a></div><div class="ttdeci">Dict[str, Any] setup(Sphinx app)</div><div class="ttdef"><b>Definition:</b> <a href="external__content_8py_source.html#l00165">external_content.py:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a9f192f2fd867d5768c59a81ae51ca7" name="a6a9f192f2fd867d5768c59a81ae51ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a9f192f2fd867d5768c59a81ae51ca7">&#9670;&nbsp;</a></span>sync_contents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None zephyr.external_content.sync_contents </td>
          <td>(</td>
          <td class="paramtype">Sphinx&#160;</td>
          <td class="paramname"><em>app</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Synchronize external contents.

Args:
    app: Sphinx application instance.
</pre> 
<p class="definition">Definition at line <a class="el" href="external__content_8py_source.html#l00095">95</a> of file <a class="el" href="external__content_8py_source.html">external_content.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span><span class="keyword">def </span><a class="code hl_function" href="namespacezephyr_1_1external__content.html#a6a9f192f2fd867d5768c59a81ae51ca7">sync_contents</a>(app: Sphinx) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   96</span>    <span class="stringliteral">&quot;&quot;&quot;Synchronize external contents.</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">        app: Sphinx application instance.</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    srcdir = Path(app.srcdir).resolve()</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">    to_copy = []</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">    to_delete = set(f </span><span class="keywordflow">for</span> f <span class="keywordflow">in</span> srcdir.glob(<span class="stringliteral">&quot;**/*&quot;</span>) <span class="keywordflow">if</span> <span class="keywordflow">not</span> f.is_dir())</div>
<div class="line"><span class="lineno">  105</span>    to_keep = set(</div>
<div class="line"><span class="lineno">  106</span>        f</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> app.config.external_content_keep</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">for</span> f <span class="keywordflow">in</span> srcdir.glob(k)</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> f.is_dir()</div>
<div class="line"><span class="lineno">  110</span>    )</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">for</span> content <span class="keywordflow">in</span> app.config.external_content_contents:</div>
<div class="line"><span class="lineno">  113</span>        prefix_src, glob = content</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">for</span> src <span class="keywordflow">in</span> prefix_src.glob(glob):</div>
<div class="line"><span class="lineno">  115</span>            <span class="keywordflow">if</span> src.is_dir():</div>
<div class="line"><span class="lineno">  116</span>                to_copy.extend(</div>
<div class="line"><span class="lineno">  117</span>                    [(f, prefix_src) <span class="keywordflow">for</span> f <span class="keywordflow">in</span> src.glob(<span class="stringliteral">&quot;**/*&quot;</span>) <span class="keywordflow">if</span> <span class="keywordflow">not</span> f.is_dir()]</div>
<div class="line"><span class="lineno">  118</span>                )</div>
<div class="line"><span class="lineno">  119</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  120</span>                to_copy.append((src, prefix_src))</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">for</span> entry <span class="keywordflow">in</span> to_copy:</div>
<div class="line"><span class="lineno">  123</span>        src, prefix_src = entry</div>
<div class="line"><span class="lineno">  124</span>        dst = (srcdir / src.relative_to(prefix_src)).resolve()</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> dst <span class="keywordflow">in</span> to_delete:</div>
<div class="line"><span class="lineno">  127</span>            to_delete.remove(dst)</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> dst.parent.exists():</div>
<div class="line"><span class="lineno">  130</span>            dst.parent.mkdir(parents=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        <span class="comment"># just copy if it does not exist</span></div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> dst.exists():</div>
<div class="line"><span class="lineno">  134</span>            shutil.copy(src, dst)</div>
<div class="line"><span class="lineno">  135</span>            <a class="code hl_function" href="namespacezephyr_1_1external__content.html#ae4c560a73827fbe74bb01403d54ceec0">adjust_includes</a>(</div>
<div class="line"><span class="lineno">  136</span>                dst,</div>
<div class="line"><span class="lineno">  137</span>                src.parent,</div>
<div class="line"><span class="lineno">  138</span>                app.config.external_content_directives,</div>
<div class="line"><span class="lineno">  139</span>                app.config.source_encoding,</div>
<div class="line"><span class="lineno">  140</span>            )</div>
<div class="line"><span class="lineno">  141</span>        <span class="comment"># if origin file is modified only copy if different</span></div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">elif</span> src.stat().st_mtime &gt; dst.stat().st_mtime:</div>
<div class="line"><span class="lineno">  143</span>            <span class="keyword">with</span> tempfile.TemporaryDirectory() <span class="keyword">as</span> td:</div>
<div class="line"><span class="lineno">  144</span>                <span class="comment"># adjust origin includes before comparing</span></div>
<div class="line"><span class="lineno">  145</span>                src_adjusted = Path(td) / src.name</div>
<div class="line"><span class="lineno">  146</span>                shutil.copy(src, src_adjusted)</div>
<div class="line"><span class="lineno">  147</span>                <a class="code hl_function" href="namespacezephyr_1_1external__content.html#ae4c560a73827fbe74bb01403d54ceec0">adjust_includes</a>(</div>
<div class="line"><span class="lineno">  148</span>                    src_adjusted,</div>
<div class="line"><span class="lineno">  149</span>                    src.parent,</div>
<div class="line"><span class="lineno">  150</span>                    app.config.external_content_directives,</div>
<div class="line"><span class="lineno">  151</span>                    app.config.source_encoding,</div>
<div class="line"><span class="lineno">  152</span>                    dstpath=dst.parent,</div>
<div class="line"><span class="lineno">  153</span>                )</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> filecmp.cmp(src_adjusted, dst):</div>
<div class="line"><span class="lineno">  156</span>                    dst.unlink()</div>
<div class="line"><span class="lineno">  157</span>                    shutil.move(os.fspath(src_adjusted), os.fspath(dst))</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="comment"># remove any previously copied file not present in the origin folder,</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="comment"># excepting those marked to be kept.</span></div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">for</span> file <span class="keywordflow">in</span> to_delete - to_keep:</div>
<div class="line"><span class="lineno">  162</span>        file.unlink()</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="ttc" id="anamespacezephyr_1_1external__content_html_a6a9f192f2fd867d5768c59a81ae51ca7"><div class="ttname"><a href="namespacezephyr_1_1external__content.html#a6a9f192f2fd867d5768c59a81ae51ca7">zephyr.external_content.sync_contents</a></div><div class="ttdeci">None sync_contents(Sphinx app)</div><div class="ttdef"><b>Definition:</b> <a href="external__content_8py_source.html#l00095">external_content.py:95</a></div></div>
<div class="ttc" id="anamespacezephyr_1_1external__content_html_ae4c560a73827fbe74bb01403d54ceec0"><div class="ttname"><a href="namespacezephyr_1_1external__content.html#ae4c560a73827fbe74bb01403d54ceec0">zephyr.external_content.adjust_includes</a></div><div class="ttdeci">None adjust_includes(Path fname, Path basepath, List[str] directives, str encoding, Optional[Path] dstpath=None)</div><div class="ttdef"><b>Definition:</b> <a href="external__content_8py_source.html#l00051">external_content.py:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="external__content_8py_source.html#l00057">zephyr.external_content.adjust_includes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7_cgraph.png" border="0" usemap="#anamespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7_cgraph" alt=""/></div>
<map name="anamespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7_cgraph" id="anamespacezephyr_1_1external__content_a6a9f192f2fd867d5768c59a81ae51ca7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,192,47"/>
<area shape="rect" href="namespacezephyr_1_1external__content.html#ae4c560a73827fbe74bb01403d54ceec0" title=" " alt="" coords="240,5,435,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab733259d136b61d033974b890a451df8" name="ab733259d136b61d033974b890a451df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab733259d136b61d033974b890a451df8">&#9670;&nbsp;</a></span>__version__</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string zephyr.external_content.__version__ = &quot;0.1.0&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="external__content_8py_source.html#l00044">44</a> of file <a class="el" href="external__content_8py_source.html">external_content.py</a>.</p>

</div>
</div>
<a id="a9939d12d69003f1f6a1b9e2ec6233850" name="a9939d12d69003f1f6a1b9e2ec6233850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9939d12d69003f1f6a1b9e2ec6233850">&#9670;&nbsp;</a></span>DEFAULT_DIRECTIVES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tuple zephyr.external_content.DEFAULT_DIRECTIVES = (&quot;figure&quot;, &quot;image&quot;, &quot;include&quot;, &quot;literalinclude&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="external__content_8py_source.html#l00047">47</a> of file <a class="el" href="external__content_8py_source.html">external_content.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacezephyr.html">zephyr</a></li><li class="navelem"><a class="el" href="namespacezephyr_1_1external__content.html">external_content</a></li>
    <li class="footer">Generated on Tue Oct 4 2022 19:30:01 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
