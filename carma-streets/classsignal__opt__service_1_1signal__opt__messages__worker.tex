\hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker}{}\doxysection{signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker Class Reference}
\label{classsignal__opt__service_1_1signal__opt__messages__worker}\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}


{\ttfamily \#include $<$signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h$>$}



Inheritance diagram for signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{classsignal__opt__service_1_1signal__opt__messages__worker__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsignal__opt__service_1_1signal__opt__messages__worker__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_aea7d4734734713b2d6c3007c082f9f5d}{signal\+\_\+opt\+\_\+messages\+\_\+worker}} ()
\item 
\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a48fb01d06c89d82c45370c1186aa736b}{$\sim$signal\+\_\+opt\+\_\+messages\+\_\+worker}} ()=default
\item 
bool \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a3e8ec178741956f8e1f30d5fa5e0dc1a}{add\+\_\+update\+\_\+vehicle}} (const std\+::string \&vehicle\+\_\+json) const
\begin{DoxyCompactList}\small\item\em Vehicle string from kafka stream in JSON format. Calling vehicle list library to persist vehicles. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_aa4808dcf2abffc7ae346232958c5e339}{update\+\_\+spat}} (const std\+::string \&spat\+\_\+json)
\begin{DoxyCompactList}\small\item\em Spat string from kafka stream in JSON format. Updating the spat with the latest spat info calling the signal\+\_\+phase\+\_\+timing library. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a1d815ad34177410cafc59d7bf9944d53}{request\+\_\+intersection\+\_\+info}} ()
\begin{DoxyCompactList}\small\item\em Send http GET request to intersection model at rate of configured HZ until it gets the valid (!= 0) signal group id from the intersection info. Updating the intersection info with the http response that has the valid signal group id, and stop sending any more GET request. \end{DoxyCompactList}\item 
const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \& \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a4b1466bac7425e2a286fc82c8fe83c58}{get\+\_\+intersection\+\_\+info}} () const
\begin{DoxyCompactList}\small\item\em Get the const intersection info pointer which does not allow caller to update the intersection info. \end{DoxyCompactList}\item 
const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classstreets__vehicles_1_1vehicle__list}{streets\+\_\+vehicles\+::vehicle\+\_\+list}} $>$ \& \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a79fb2ef0781f6f4a9a09b68dd91237cb}{get\+\_\+vehicle\+\_\+list}} () const
\begin{DoxyCompactList}\small\item\em Get the const vehicle list pointer which does not allow caller to update the vehicle list. \end{DoxyCompactList}\item 
const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat}} $>$ \& \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_a7d3755735be7c3fcfe503eb4b1833c49}{get\+\_\+latest\+\_\+spat}} () const
\begin{DoxyCompactList}\small\item\em Get the latest spat object pointer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}{intersection\+\_\+info\+\_\+ptr}}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat}} $>$ \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}{spat\+\_\+ptr}}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classstreets__vehicles_1_1vehicle__list}{streets\+\_\+vehicles\+::vehicle\+\_\+list}} $>$ \mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\+\_\+list\+\_\+ptr}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00022}{22}} of file \mbox{\hyperlink{signal__opt__messages__worker_8h_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_aea7d4734734713b2d6c3007c082f9f5d}\label{classsignal__opt__service_1_1signal__opt__messages__worker_aea7d4734734713b2d6c3007c082f9f5d}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!signal\_opt\_messages\_worker@{signal\_opt\_messages\_worker}}
\index{signal\_opt\_messages\_worker@{signal\_opt\_messages\_worker}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{signal\_opt\_messages\_worker()}{signal\_opt\_messages\_worker()}}
{\footnotesize\ttfamily signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::signal\+\_\+opt\+\_\+messages\+\_\+worker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00005}{5}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00006     \{}
\DoxyCodeLine{00007         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Construct signal\_opt\_messages\_worker"{}});}
\DoxyCodeLine{00008         this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}{intersection\_info\_ptr}} = std::make\_shared<OpenAPI::OAIIntersection\_info>();}
\DoxyCodeLine{00009         this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\_list\_ptr}} = std::make\_shared<streets\_vehicles::vehicle\_list>();}
\DoxyCodeLine{00010         this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\_list\_ptr}}-\/>set\_processor(std::make\_shared<streets\_vehicles::signalized\_status\_intent\_processor>());}
\DoxyCodeLine{00011         this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}{spat\_ptr}} = std::make\_shared<signal\_phase\_and\_timing::spat>();}
\DoxyCodeLine{00012     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00025}{intersection\+\_\+info\+\_\+ptr}}, \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00026}{spat\+\_\+ptr}}, and \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00027}{vehicle\+\_\+list\+\_\+ptr}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a48fb01d06c89d82c45370c1186aa736b}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a48fb01d06c89d82c45370c1186aa736b}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!````~signal\_opt\_messages\_worker@{$\sim$signal\_opt\_messages\_worker}}
\index{````~signal\_opt\_messages\_worker@{$\sim$signal\_opt\_messages\_worker}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{$\sim$signal\_opt\_messages\_worker()}{~signal\_opt\_messages\_worker()}}
{\footnotesize\ttfamily signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::$\sim$signal\+\_\+opt\+\_\+messages\+\_\+worker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a3e8ec178741956f8e1f30d5fa5e0dc1a}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a3e8ec178741956f8e1f30d5fa5e0dc1a}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!add\_update\_vehicle@{add\_update\_vehicle}}
\index{add\_update\_vehicle@{add\_update\_vehicle}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{add\_update\_vehicle()}{add\_update\_vehicle()}}
{\footnotesize\ttfamily bool signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::add\+\_\+update\+\_\+vehicle (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{vehicle\+\_\+json }\end{DoxyParamCaption}) const}



Vehicle string from kafka stream in JSON format. Calling vehicle list library to persist vehicles. 


\begin{DoxyParams}{Parameters}
{\em vehicle\+\_\+json} & Vehicle string from kafka stream in JSON format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the vehicle list is updated. 

false if the vehilce list is not updated. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00014}{14}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015     \{}
\DoxyCodeLine{00016         \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\_list\_ptr}})}
\DoxyCodeLine{00017         \{}
\DoxyCodeLine{00018             this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\_list\_ptr}}-\/>process\_update(vehicle\_json);}
\DoxyCodeLine{00019             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00020         \}}
\DoxyCodeLine{00021         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00022     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00027}{vehicle\+\_\+list\+\_\+ptr}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a4b1466bac7425e2a286fc82c8fe83c58}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a4b1466bac7425e2a286fc82c8fe83c58}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!get\_intersection\_info@{get\_intersection\_info}}
\index{get\_intersection\_info@{get\_intersection\_info}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{get\_intersection\_info()}{get\_intersection\_info()}}
{\footnotesize\ttfamily const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \& signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::get\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the const intersection info pointer which does not allow caller to update the intersection info. 

\begin{DoxyReturn}{Returns}
A constant intersection info pointer to prevent any update 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00072}{72}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00073     \{}
\DoxyCodeLine{00074         \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}{intersection\_info\_ptr}};}
\DoxyCodeLine{00075     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00025}{intersection\+\_\+info\+\_\+ptr}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a7d3755735be7c3fcfe503eb4b1833c49}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a7d3755735be7c3fcfe503eb4b1833c49}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!get\_latest\_spat@{get\_latest\_spat}}
\index{get\_latest\_spat@{get\_latest\_spat}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{get\_latest\_spat()}{get\_latest\_spat()}}
{\footnotesize\ttfamily const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat}} $>$ \& signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::get\+\_\+latest\+\_\+spat (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the latest spat object pointer. 

\begin{DoxyReturn}{Returns}
A constant spat pointer to prevent any update 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00082}{82}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00083     \{}
\DoxyCodeLine{00084         \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}{spat\_ptr}};}
\DoxyCodeLine{00085     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00026}{spat\+\_\+ptr}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a79fb2ef0781f6f4a9a09b68dd91237cb}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a79fb2ef0781f6f4a9a09b68dd91237cb}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!get\_vehicle\_list@{get\_vehicle\_list}}
\index{get\_vehicle\_list@{get\_vehicle\_list}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{get\_vehicle\_list()}{get\_vehicle\_list()}}
{\footnotesize\ttfamily const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classstreets__vehicles_1_1vehicle__list}{streets\+\_\+vehicles\+::vehicle\+\_\+list}} $>$ \& signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::get\+\_\+vehicle\+\_\+list (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the const vehicle list pointer which does not allow caller to update the vehicle list. 

\begin{DoxyReturn}{Returns}
A constant vehicle list pointer to prevent any update 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00077}{77}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078     \{}
\DoxyCodeLine{00079         \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}{vehicle\_list\_ptr}};}
\DoxyCodeLine{00080     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00027}{vehicle\+\_\+list\+\_\+ptr}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_a1d815ad34177410cafc59d7bf9944d53}\label{classsignal__opt__service_1_1signal__opt__messages__worker_a1d815ad34177410cafc59d7bf9944d53}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!request\_intersection\_info@{request\_intersection\_info}}
\index{request\_intersection\_info@{request\_intersection\_info}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{request\_intersection\_info()}{request\_intersection\_info()}}
{\footnotesize\ttfamily bool signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::request\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Send http GET request to intersection model at rate of configured HZ until it gets the valid (!= 0) signal group id from the intersection info. Updating the intersection info with the http response that has the valid signal group id, and stop sending any more GET request. 


\begin{DoxyParams}{Parameters}
{\em int\+\_\+info} & Http response from intersection model \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if intersection information is updated upon receiving valid signal group id. 

false if intersection information is not updated. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00035}{35}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036     \{}
\DoxyCodeLine{00037         \textcolor{keywordtype}{int} invalid\_signal\_group\_count = 0;}
\DoxyCodeLine{00038         \textcolor{keywordtype}{bool} signal\_group\_ids\_valid = \textcolor{keyword}{false};}
\DoxyCodeLine{00039         \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi}{OpenAPI::OAIDefaultApi}} apiInstance;}
\DoxyCodeLine{00040         QEventLoop loop;}
\DoxyCodeLine{00041         connect(\&apiInstance, \&\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a1d28886ea13c3f1818c0477fe309f9fd}{OpenAPI::OAIDefaultApi::getIntersectionInfoSignal}}, [\textcolor{keyword}{this}, \&signal\_group\_ids\_valid, \&invalid\_signal\_group\_count, \&loop](\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{OpenAPI::OAIIntersection\_info}} int\_info)}
\DoxyCodeLine{00042                 \{                   }
\DoxyCodeLine{00043                     SPDLOG\_INFO(\textcolor{stringliteral}{"{}request\_intersection\_info receives intersection information. Checking signal group ids update..."{}});}
\DoxyCodeLine{00044                     QList<OpenAPI::OAILanelet\_info> ll\_info\_list = int\_info.\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info_a5002b5e61e05bd67baf104eb96205b1c}{getLinkLanelets}}();}
\DoxyCodeLine{00045                     \textcolor{keywordflow}{for}(\textcolor{keyword}{const} \textcolor{keyword}{auto}\& ll\_info : ll\_info\_list)}
\DoxyCodeLine{00046                     \{}
\DoxyCodeLine{00047                         invalid\_signal\_group\_count += ll\_info.getSignalGroupId() == 0 ? 1 : 0;}
\DoxyCodeLine{00048                     \}  }
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050                     \textcolor{keywordflow}{if}(invalid\_signal\_group\_count == 0)}
\DoxyCodeLine{00051                     \{}
\DoxyCodeLine{00052                         \textcolor{comment}{//Update intersection info }}
\DoxyCodeLine{00053                         this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}{intersection\_info\_ptr}} = std::make\_shared<OpenAPI::OAIIntersection\_info>(int\_info); }
\DoxyCodeLine{00054                         signal\_group\_ids\_valid = \textcolor{keyword}{true};}
\DoxyCodeLine{00055                         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Intersection information is updated with valid signal group ids! "{}});}
\DoxyCodeLine{00056                     \}}
\DoxyCodeLine{00057                 SPDLOG\_INFO(\textcolor{stringliteral}{"{}Exit request\_intersection\_info."{}});}
\DoxyCodeLine{00058             loop.quit(); \});}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060         connect(\&apiInstance, \&\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a115becc3a08d245dc8591b7d263497d1}{OpenAPI::OAIDefaultApi::getIntersectionInfoSignalE}}, [\textcolor{keyword}{this}, \&signal\_group\_ids\_valid, \&invalid\_signal\_group\_count, \&loop](\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{OpenAPI::OAIIntersection\_info}}, QNetworkReply::NetworkError, QString error\_str)}
\DoxyCodeLine{00061                 \{ }
\DoxyCodeLine{00062                     SPDLOG\_ERROR(\textcolor{stringliteral}{"{}Error happened while issuing intersection model GET information request : \{0\}"{}},  error\_str.toStdString());}
\DoxyCodeLine{00063                     loop.quit(); \});}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065         apiInstance.\mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a682ffe8581eaecb7e32df4d3c66b6762}{getIntersectionInfo}}();}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067         QTimer::singleShot(5000, \&loop, \&QEventLoop::quit);}
\DoxyCodeLine{00068         loop.exec();}
\DoxyCodeLine{00069         \textcolor{keywordflow}{return} signal\_group\_ids\_valid;}
\DoxyCodeLine{00070     \}}

\end{DoxyCode}


References \mbox{\hyperlink{OAIDefaultApi_8cpp_source_l00295}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info()}}, \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a1d28886ea13c3f1818c0477fe309f9fd}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info\+Signal()}}, \mbox{\hyperlink{classOpenAPI_1_1OAIDefaultApi_a115becc3a08d245dc8591b7d263497d1}{Open\+API\+::\+OAIDefault\+Api\+::get\+Intersection\+Info\+Signal\+E()}}, \mbox{\hyperlink{intersection__client__api_2OAIIntersection__info_8cpp_source_l00152}{Open\+API\+::\+OAIIntersection\+\_\+info\+::get\+Link\+Lanelets()}}, and \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00025}{intersection\+\_\+info\+\_\+ptr}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsignal__opt__service_1_1signal__opt__messages__worker_a1d815ad34177410cafc59d7bf9944d53_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_aa4808dcf2abffc7ae346232958c5e339}\label{classsignal__opt__service_1_1signal__opt__messages__worker_aa4808dcf2abffc7ae346232958c5e339}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!update\_spat@{update\_spat}}
\index{update\_spat@{update\_spat}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{update\_spat()}{update\_spat()}}
{\footnotesize\ttfamily bool signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::update\+\_\+spat (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{spat\+\_\+json }\end{DoxyParamCaption})}



Spat string from kafka stream in JSON format. Updating the spat with the latest spat info calling the signal\+\_\+phase\+\_\+timing library. 


\begin{DoxyParams}{Parameters}
{\em spat\+\_\+json} & Spat string from kafka stream in JSON format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the Spat object is updated. 

false if the Spat object is not updated. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00024}{24}} of file \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025     \{}
\DoxyCodeLine{00026         \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}{spat\_ptr}})}
\DoxyCodeLine{00027         \{}
\DoxyCodeLine{00028             this-\/>\mbox{\hyperlink{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}{spat\_ptr}}-\/>fromJson(spat\_json);}
\DoxyCodeLine{00029             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00030         \}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00033     \}}

\end{DoxyCode}


References \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00026}{spat\+\_\+ptr}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}\label{classsignal__opt__service_1_1signal__opt__messages__worker_abbf2f5de3ae9566d20edffe5d9013b54}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!intersection\_info\_ptr@{intersection\_info\_ptr}}
\index{intersection\_info\_ptr@{intersection\_info\_ptr}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{intersection\_info\_ptr}{intersection\_info\_ptr}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}}$>$ signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::intersection\+\_\+info\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00025}{25}} of file \mbox{\hyperlink{signal__opt__messages__worker_8h_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h}}.



Referenced by \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00005}{signal\+\_\+opt\+\_\+messages\+\_\+worker()}}, \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00072}{get\+\_\+intersection\+\_\+info()}}, and \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00035}{request\+\_\+intersection\+\_\+info()}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}\label{classsignal__opt__service_1_1signal__opt__messages__worker_ad9280524aa7c9bfe03fecaca8d2a1648}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!spat\_ptr@{spat\_ptr}}
\index{spat\_ptr@{spat\_ptr}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{spat\_ptr}{spat\_ptr}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{structsignal__phase__and__timing_1_1spat}{signal\+\_\+phase\+\_\+and\+\_\+timing\+::spat}}$>$ signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::spat\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00026}{26}} of file \mbox{\hyperlink{signal__opt__messages__worker_8h_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h}}.



Referenced by \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00005}{signal\+\_\+opt\+\_\+messages\+\_\+worker()}}, \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00082}{get\+\_\+latest\+\_\+spat()}}, and \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00024}{update\+\_\+spat()}}.

\mbox{\Hypertarget{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}\label{classsignal__opt__service_1_1signal__opt__messages__worker_af48b6c29602eb3067df26cf7992c3db9}} 
\index{signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}!vehicle\_list\_ptr@{vehicle\_list\_ptr}}
\index{vehicle\_list\_ptr@{vehicle\_list\_ptr}!signal\_opt\_service::signal\_opt\_messages\_worker@{signal\_opt\_service::signal\_opt\_messages\_worker}}
\doxysubsubsection{\texorpdfstring{vehicle\_list\_ptr}{vehicle\_list\_ptr}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classstreets__vehicles_1_1vehicle__list}{streets\+\_\+vehicles\+::vehicle\+\_\+list}}$>$ signal\+\_\+opt\+\_\+service\+::signal\+\_\+opt\+\_\+messages\+\_\+worker\+::vehicle\+\_\+list\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{signal__opt__messages__worker_8h_source_l00027}{27}} of file \mbox{\hyperlink{signal__opt__messages__worker_8h_source}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h}}.



Referenced by \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00005}{signal\+\_\+opt\+\_\+messages\+\_\+worker()}}, \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00014}{add\+\_\+update\+\_\+vehicle()}}, and \mbox{\hyperlink{signal__opt__messages__worker_8cpp_source_l00077}{get\+\_\+vehicle\+\_\+list()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
signal\+\_\+opt\+\_\+service/include/\mbox{\hyperlink{signal__opt__messages__worker_8h}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+h}}\item 
signal\+\_\+opt\+\_\+service/src/\mbox{\hyperlink{signal__opt__messages__worker_8cpp}{signal\+\_\+opt\+\_\+messages\+\_\+worker.\+cpp}}\end{DoxyCompactItemize}
