\hypertarget{application_8py_source}{}\doxysection{application.\+py}
\label{application_8py_source}\index{doc/\_extensions/zephyr/application.py@{doc/\_extensions/zephyr/application.py}}
\mbox{\hyperlink{application_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00001}\mbox{\hyperlink{namespacezephyr_1_1application}{00001}} \textcolor{comment}{\# Copyright (c) 2017 Open Source Foundries Limited.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00002}00002 \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00003}00003 \textcolor{comment}{\# SPDX-\/License-\/Identifier: Apache-\/2.0}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00005}00005 \textcolor{stringliteral}{'''Sphinx extensions related to managing Zephyr applications.'''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00007}00007 \textcolor{keyword}{from} docutils \textcolor{keyword}{import} nodes}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00008}00008 \textcolor{keyword}{from} docutils.parsers.rst \textcolor{keyword}{import} Directive}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00009}00009 \textcolor{keyword}{from} docutils.parsers.rst \textcolor{keyword}{import} directives}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00012}00012 \textcolor{comment}{\# TODO: extend and modify this for Windows.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00013}00013 \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00014}00014 \textcolor{comment}{\# This could be as simple as generating a couple of sets of instructions, one}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00015}00015 \textcolor{comment}{\# for Unix environments, and another for Windows.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00016}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective}{00016}} \textcolor{keyword}{class }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective}{ZephyrAppCommandsDirective}}(Directive):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00017}00017     \textcolor{stringliteral}{r'''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00018}00018 \textcolor{stringliteral}{    This }\textcolor{keywordflow}{is} a Zephyr directive \textcolor{keywordflow}{for} generating consistent documentation}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00019}00019     of the shell commands needed to manage (build, flash, etc.) an application.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00021}00021     For example, to generate commands to build samples/hello\_world \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00022}00022     qemu\_x86 use::}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00024}00024        .. zephyr-\/app-\/commands::}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00025}00025           :zephyr-\/app: samples/hello\_world}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00026}00026           :board: qemu\_x86}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00027}00027           :goals: build}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00029}00029     Directive options:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00031}00031     \(\backslash\):tool:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00032}00032       which tool to use. Valid options are currently \textcolor{stringliteral}{'cmake'}, \textcolor{stringliteral}{'west'} \textcolor{keywordflow}{and} \textcolor{stringliteral}{'all'}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00033}00033       The default \textcolor{keywordflow}{is} \textcolor{stringliteral}{'west'}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00035}00035     \(\backslash\):app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00036}00036       path to the application to build.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00038}00038     \(\backslash\):zephyr-\/app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00039}00039       path to the application to build, this \textcolor{keywordflow}{is} an app present \textcolor{keywordflow}{in} the upstream}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00040}00040       zephyr repository. Mutually exclusive \textcolor{keyword}{with} \(\backslash\):app:.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00042}00042     \(\backslash\):cd-\/into:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00043}00043       \textcolor{keywordflow}{if} set, build instructions are given \textcolor{keyword}{from} within the \(\backslash\):app: folder,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00044}00044       instead of outside of it.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00046}00046     \(\backslash\):generator:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00047}00047       which build system to generate. Valid options are}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00048}00048       currently \textcolor{stringliteral}{'ninja'} \textcolor{keywordflow}{and} \textcolor{stringliteral}{'make'}. The default \textcolor{keywordflow}{is} \textcolor{stringliteral}{'ninja'}. This option}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00049}00049       \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} case sensitive.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00051}00051     \(\backslash\):host-\/os:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00052}00052       which host OS the instructions are \textcolor{keywordflow}{for}. Valid options are}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00053}00053       \textcolor{stringliteral}{'unix'}, \textcolor{stringliteral}{'win'} \textcolor{keywordflow}{and} \textcolor{stringliteral}{'all'}. The default \textcolor{keywordflow}{is} \textcolor{stringliteral}{'all'}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00055}00055     \(\backslash\):board:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00056}00056       \textcolor{keywordflow}{if} set, the application build will target the given board.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00058}00058     \(\backslash\):shield:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00059}00059       \textcolor{keywordflow}{if} set, the application build will target the given shield.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00061}00061     \(\backslash\):conf:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00062}00062       \textcolor{keywordflow}{if} set, the application build will use the given configuration}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00063}00063       file.  If multiple conf files are provided, enclose the}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00064}00064       space-\/separated list of files \textcolor{keyword}{with} quotes, e.g., \textcolor{stringliteral}{"{}a.conf b.conf"{}}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00066}00066     \(\backslash\):gen-\/args:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00067}00067       \textcolor{keywordflow}{if} set, additional arguments to the CMake invocation}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00069}00069     \(\backslash\):build-\/args:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00070}00070       \textcolor{keywordflow}{if} set, additional arguments to the build invocation}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00072}00072     \(\backslash\):build-\/dir:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00073}00073       \textcolor{keywordflow}{if} set, the application build directory will *APPEND* this}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00074}00074       (relative, Unix-\/separated) path to the standard build directory. This \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00075}00075       mostly useful \textcolor{keywordflow}{for} distinguishing builds \textcolor{keywordflow}{for} one application within a}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00076}00076       single page.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00078}00078     \(\backslash\):goals:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00079}00079       a whitespace-\/separated list of what to do \textcolor{keyword}{with} the app (\textcolor{keywordflow}{in}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00080}00080       \textcolor{stringliteral}{'build'}, \textcolor{stringliteral}{'flash'}, \textcolor{stringliteral}{'debug'}, \textcolor{stringliteral}{'debugserver'}, \textcolor{stringliteral}{'run'}). Commands to accomplish}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00081}00081       these tasks will be generated \textcolor{keywordflow}{in} the right order.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00083}00083     \(\backslash\):maybe-\/skip-\/config:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00084}00084       \textcolor{keywordflow}{if} set, this indicates the reader may have already}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00085}00085       created a build directory \textcolor{keywordflow}{and} changed there, \textcolor{keywordflow}{and} will tweak the text to}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00086}00086       note that doing so again \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} necessary.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00088}00088     \(\backslash\):compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00089}00089       \textcolor{keywordflow}{if} set, the generated output \textcolor{keywordflow}{is} a single code block \textcolor{keyword}{with} no}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00090}00090       additional comment lines}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00092}00092     \(\backslash\):west-\/args:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00093}00093       \textcolor{keywordflow}{if} set, additional arguments to the west invocation (ignored \textcolor{keywordflow}{for} CMake)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00095}00095     \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00096}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a3e496bb5f1e2ce8400a3595d3e2454e3}{00096}} \textcolor{stringliteral}{    has\_content = }\textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00097}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_aefb6018b471e728e62885bd6935b12ca}{00097}}     required\_arguments = 0}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00098}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a37750f9126310291defa546951902bbd}{00098}}     optional\_arguments = 0}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00099}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a0a397c6ff2d3bcadb58d8e98d87d14af}{00099}}     final\_argument\_whitespace = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00100}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a1f0e880a3a9854da1d644379eda8f98c}{00100}}     option\_spec = \{}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00101}00101         \textcolor{stringliteral}{'tool'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00102}00102         \textcolor{stringliteral}{'app'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00103}00103         \textcolor{stringliteral}{'zephyr-\/app'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00104}00104         \textcolor{stringliteral}{'cd-\/into'}: directives.flag,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00105}00105         \textcolor{stringliteral}{'generator'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00106}00106         \textcolor{stringliteral}{'host-\/os'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00107}00107         \textcolor{stringliteral}{'board'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00108}00108         \textcolor{stringliteral}{'shield'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00109}00109         \textcolor{stringliteral}{'conf'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00110}00110         \textcolor{stringliteral}{'gen-\/args'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00111}00111         \textcolor{stringliteral}{'build-\/args'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00112}00112         \textcolor{stringliteral}{'build-\/dir'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00113}00113         \textcolor{stringliteral}{'goals'}: directives.unchanged\_required,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00114}00114         \textcolor{stringliteral}{'maybe-\/skip-\/config'}: directives.flag,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00115}00115         \textcolor{stringliteral}{'compact'}: directives.flag,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00116}00116         \textcolor{stringliteral}{'west-\/args'}: directives.unchanged,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00117}00117     \}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00119}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_acde3bd4e5a5d7411da5a17a095b24725}{00119}}     TOOLS = [\textcolor{stringliteral}{'cmake'}, \textcolor{stringliteral}{'west'}, \textcolor{stringliteral}{'all'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00120}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a04a9a0e9b69ac240a3fe7eb86dc40235}{00120}}     GENERATORS = [\textcolor{stringliteral}{'make'}, \textcolor{stringliteral}{'ninja'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00121}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a97325484b7fd21b6aad6b38e161c2d13}{00121}}     HOST\_OS = [\textcolor{stringliteral}{'unix'}, \textcolor{stringliteral}{'win'}, \textcolor{stringliteral}{'all'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00122}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a6b5a520a57d59c0a195b623cf67bc1d5}{00122}}     IN\_TREE\_STR = \textcolor{stringliteral}{'\# From the root of the zephyr repository'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00124}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_ad2c609964829ace69d2d0408ed4db561}{00124}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_ad2c609964829ace69d2d0408ed4db561}{run}}(self):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00125}00125         \textcolor{comment}{\# Re-\/run on the current document if this directive's source changes.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00126}00126         self.state.document.settings.env.note\_dependency(\_\_file\_\_)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00128}00128         \textcolor{comment}{\# Parse directive options.  Don't use os.path.sep or os.path.join here!}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00129}00129         \textcolor{comment}{\# That would break if building the docs on Windows.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00130}00130         tool = self.options.get(\textcolor{stringliteral}{'tool'}, \textcolor{stringliteral}{'west'}).lower()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00131}00131         app = self.options.get(\textcolor{stringliteral}{'app'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00132}00132         zephyr\_app = self.options.get(\textcolor{stringliteral}{'zephyr-\/app'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00133}00133         cd\_into = \textcolor{stringliteral}{'cd-\/into'} \textcolor{keywordflow}{in} self.options}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00134}00134         generator = self.options.get(\textcolor{stringliteral}{'generator'}, \textcolor{stringliteral}{'ninja'}).lower()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00135}00135         host\_os = self.options.get(\textcolor{stringliteral}{'host-\/os'}, \textcolor{stringliteral}{'all'}).lower()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00136}00136         board = self.options.get(\textcolor{stringliteral}{'board'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00137}00137         shield = self.options.get(\textcolor{stringliteral}{'shield'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00138}00138         conf = self.options.get(\textcolor{stringliteral}{'conf'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00139}00139         gen\_args = self.options.get(\textcolor{stringliteral}{'gen-\/args'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00140}00140         build\_args = self.options.get(\textcolor{stringliteral}{'build-\/args'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00141}00141         build\_dir\_append = self.options.get(\textcolor{stringliteral}{'build-\/dir'}, \textcolor{stringliteral}{''}).strip(\textcolor{stringliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00142}00142         goals = self.options.get(\textcolor{stringliteral}{'goals'}).split()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00143}00143         skip\_config = \textcolor{stringliteral}{'maybe-\/skip-\/config'} \textcolor{keywordflow}{in} self.options}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00144}00144         compact = \textcolor{stringliteral}{'compact'} \textcolor{keywordflow}{in} self.options}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00145}00145         west\_args = self.options.get(\textcolor{stringliteral}{'west-\/args'}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00146}00146 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00147}00147         \textcolor{keywordflow}{if} tool \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_acde3bd4e5a5d7411da5a17a095b24725}{TOOLS}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00148}00148             \textcolor{keywordflow}{raise} self.error(\textcolor{stringliteral}{'Unknown tool \{\}; choose from: \{\}'}.format(}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00149}00149                 tool, self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_acde3bd4e5a5d7411da5a17a095b24725}{TOOLS}}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00151}00151         \textcolor{keywordflow}{if} app \textcolor{keywordflow}{and} zephyr\_app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00152}00152             \textcolor{keywordflow}{raise} self.error(\textcolor{stringliteral}{'Both app and zephyr-\/app options were given.'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00153}00153 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00154}00154         \textcolor{keywordflow}{if} generator \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a04a9a0e9b69ac240a3fe7eb86dc40235}{GENERATORS}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00155}00155             \textcolor{keywordflow}{raise} self.error(\textcolor{stringliteral}{'Unknown generator \{\}; choose from: \{\}'}.format(}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00156}00156                 generator, self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a04a9a0e9b69ac240a3fe7eb86dc40235}{GENERATORS}}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00157}00157 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00158}00158         \textcolor{keywordflow}{if} host\_os \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a97325484b7fd21b6aad6b38e161c2d13}{HOST\_OS}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00159}00159             \textcolor{keywordflow}{raise} self.error(\textcolor{stringliteral}{'Unknown host-\/os \{\}; choose from: \{\}'}.format(}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00160}00160                 host\_os, self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a97325484b7fd21b6aad6b38e161c2d13}{HOST\_OS}}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00162}00162         \textcolor{keywordflow}{if} compact \textcolor{keywordflow}{and} skip\_config:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00163}00163             \textcolor{keywordflow}{raise} self.error(\textcolor{stringliteral}{'Both compact and maybe-\/skip-\/config options were given.'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00165}00165         app = app \textcolor{keywordflow}{or} zephyr\_app}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00166}00166         in\_tree = self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a6b5a520a57d59c0a195b623cf67bc1d5}{IN\_TREE\_STR}} \textcolor{keywordflow}{if} zephyr\_app \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00167}00167         \textcolor{comment}{\# Allow build directories which are nested.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00168}00168         build\_dir = (\textcolor{stringliteral}{'build'} + \textcolor{stringliteral}{'/'} + build\_dir\_append).rstrip(\textcolor{stringliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00170}00170         \textcolor{comment}{\# Create host\_os array}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00171}00171         host\_os = [host\_os] \textcolor{keywordflow}{if} host\_os != \textcolor{stringliteral}{"{}all"{}} \textcolor{keywordflow}{else} [v \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a97325484b7fd21b6aad6b38e161c2d13}{HOST\_OS}}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00172}00172                                                         \textcolor{keywordflow}{if} v != \textcolor{stringliteral}{'all'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00173}00173         \textcolor{comment}{\# Create tools array}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00174}00174         tools = [tool] \textcolor{keywordflow}{if} tool != \textcolor{stringliteral}{"{}all"{}} \textcolor{keywordflow}{else} [v \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_acde3bd4e5a5d7411da5a17a095b24725}{TOOLS}}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00175}00175                                                 \textcolor{keywordflow}{if} v != \textcolor{stringliteral}{'all'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00176}00176         \textcolor{comment}{\# Build the command content as a list, then convert to string.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00177}00177         content = []}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00178}00178         tool\_comment = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00179}00179         \textcolor{keywordflow}{if} len(tools) > 1:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00180}00180             tool\_comment = \textcolor{stringliteral}{'Using \{\}:'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00182}00182         run\_config = \{}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00183}00183             \textcolor{stringliteral}{'host\_os'}: host\_os,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00184}00184             \textcolor{stringliteral}{'app'}: app,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00185}00185             \textcolor{stringliteral}{'in\_tree'}: in\_tree,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00186}00186             \textcolor{stringliteral}{'cd\_into'}: cd\_into,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00187}00187             \textcolor{stringliteral}{'board'}: board,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00188}00188             \textcolor{stringliteral}{'shield'}: shield,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00189}00189             \textcolor{stringliteral}{'conf'}: conf,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00190}00190             \textcolor{stringliteral}{'gen\_args'}: gen\_args,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00191}00191             \textcolor{stringliteral}{'build\_args'}: build\_args,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00192}00192             \textcolor{stringliteral}{'build\_dir'}: build\_dir,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00193}00193             \textcolor{stringliteral}{'goals'}: goals,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00194}00194             \textcolor{stringliteral}{'compact'}: compact,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00195}00195             \textcolor{stringliteral}{'skip\_config'}: skip\_config,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00196}00196             \textcolor{stringliteral}{'generator'}: generator,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00197}00197             \textcolor{stringliteral}{'west\_args'}: west\_args}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00198}00198             \}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00199}00199 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00200}00200         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'west'} \textcolor{keywordflow}{in} tools:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00201}00201             w = self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a3fbde2fe2d28eb6fac350b8c096d7322}{\_generate\_west}}(**run\_config)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00202}00202             \textcolor{keywordflow}{if} tool\_comment:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00203}00203                 paragraph = nodes.paragraph()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00204}00204                 paragraph += nodes.Text(tool\_comment.format(\textcolor{stringliteral}{'west'}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00205}00205                 content.append(paragraph)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00206}00206                 content.append(self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a2079f413619d17a370b58ee4ac7fa079}{\_lit\_block}}(w))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00207}00207             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00208}00208                 content.extend(w)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00210}00210         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'cmake'} \textcolor{keywordflow}{in} tools:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00211}00211             c = self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a80ed59beb7852b5f766d41f573cfc6ce}{\_generate\_cmake}}(**run\_config)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00212}00212             \textcolor{keywordflow}{if} tool\_comment:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00213}00213                 paragraph = nodes.paragraph()}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00214}00214                 paragraph += nodes.Text(tool\_comment.format(}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00215}00215                     \textcolor{stringliteral}{'CMake and \{\}'}.format(generator)))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00216}00216                 content.append(paragraph)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00217}00217                 content.append(self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a2079f413619d17a370b58ee4ac7fa079}{\_lit\_block}}(c))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00218}00218             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00219}00219                 content.extend(c)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00220}00220 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00221}00221         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} tool\_comment:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00222}00222             content = [self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a2079f413619d17a370b58ee4ac7fa079}{\_lit\_block}}(content)]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00223}00223 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00224}00224         \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00225}00225 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00226}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a2079f413619d17a370b58ee4ac7fa079}{00226}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a2079f413619d17a370b58ee4ac7fa079}{\_lit\_block}}(self, content):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00227}00227         content = \textcolor{stringliteral}{'\(\backslash\)n'}.join(content)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00228}00228 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00229}00229         \textcolor{comment}{\# Create the nodes.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00230}00230         literal = nodes.literal\_block(content, content)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00231}00231         self.add\_name(literal)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00232}00232         literal[\textcolor{stringliteral}{'language'}] = \textcolor{stringliteral}{'console'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00233}00233         \textcolor{keywordflow}{return} literal}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00234}00234 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00235}00235 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00236}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a3fbde2fe2d28eb6fac350b8c096d7322}{00236}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a3fbde2fe2d28eb6fac350b8c096d7322}{\_generate\_west}}(self, **kwargs):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00237}00237         content = []}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00238}00238         generator = kwargs[\textcolor{stringliteral}{'generator'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00239}00239         board = kwargs[\textcolor{stringliteral}{'board'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00240}00240         app = kwargs[\textcolor{stringliteral}{'app'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00241}00241         in\_tree = kwargs[\textcolor{stringliteral}{'in\_tree'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00242}00242         goals = kwargs[\textcolor{stringliteral}{'goals'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00243}00243         cd\_into = kwargs[\textcolor{stringliteral}{'cd\_into'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00244}00244         build\_dir = kwargs[\textcolor{stringliteral}{'build\_dir'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00245}00245         compact = kwargs[\textcolor{stringliteral}{'compact'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00246}00246         west\_args = kwargs[\textcolor{stringliteral}{'west\_args'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00247}00247         kwargs[\textcolor{stringliteral}{'board'}] = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00248}00248         \textcolor{comment}{\# west always defaults to ninja}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00249}00249         gen\_arg = \textcolor{stringliteral}{' -\/G\(\backslash\)'Unix Makefiles\(\backslash\)''} \textcolor{keywordflow}{if} generator == \textcolor{stringliteral}{'make'} \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00250}00250         cmake\_args = gen\_arg + self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a0f3a3671dbdd590865168f1ddd2a623c}{\_cmake\_args}}(**kwargs)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00251}00251         cmake\_args = \textcolor{stringliteral}{' -\/-\/\{\}'}.format(cmake\_args) \textcolor{keywordflow}{if} cmake\_args != \textcolor{stringliteral}{''} \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00252}00252         west\_args = \textcolor{stringliteral}{' \{\}'}.format(west\_args) \textcolor{keywordflow}{if} west\_args \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00253}00253         \textcolor{comment}{\# ignore zephyr\_app since west needs to run within}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00254}00254         \textcolor{comment}{\# the installation. Instead rely on relative path.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00255}00255         src = \textcolor{stringliteral}{' \{\}'}.format(app) \textcolor{keywordflow}{if} app \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} cd\_into \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00256}00256         dst = \textcolor{stringliteral}{' -\/d \{\}'}.format(build\_dir) \textcolor{keywordflow}{if} build\_dir != \textcolor{stringliteral}{'build'} \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00257}00257 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00258}00258         \textcolor{keywordflow}{if} in\_tree \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00259}00259             content.append(in\_tree)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00260}00260 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00261}00261         \textcolor{keywordflow}{if} cd\_into \textcolor{keywordflow}{and} app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00262}00262             content.append(\textcolor{stringliteral}{'cd \{\}'}.format(app))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00263}00263 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00264}00264         \textcolor{comment}{\# We always have to run west build.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00265}00265         \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00266}00266         \textcolor{comment}{\# FIXME: doing this unconditionally essentially ignores the}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00267}00267         \textcolor{comment}{\# maybe-\/skip-\/config option if set.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00268}00268         \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00269}00269         \textcolor{comment}{\# This whole script and its users from within the}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00270}00270         \textcolor{comment}{\# documentation needs to be overhauled now that we're}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00271}00271         \textcolor{comment}{\# defaulting to west.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00272}00272         \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00273}00273         \textcolor{comment}{\# For now, this keeps the resulting commands working.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00274}00274         content.append(\textcolor{stringliteral}{'west build -\/b \{\}\{\}\{\}\{\}\{\}'}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00275}00275                        format(board, west\_args, dst, src, cmake\_args))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00276}00276 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00277}00277         \textcolor{comment}{\# If we're signing, we want to do that next, so that flashing}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00278}00278         \textcolor{comment}{\# etc. commands can use the signed file which must be created}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00279}00279         \textcolor{comment}{\# in this step.}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00280}00280         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'sign'} \textcolor{keywordflow}{in} goals:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00281}00281             content.append(\textcolor{stringliteral}{'west sign\{\}'}.format(dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00282}00282 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00283}00283         \textcolor{keywordflow}{for} goal \textcolor{keywordflow}{in} goals:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00284}00284             \textcolor{keywordflow}{if} goal \textcolor{keywordflow}{in} \{\textcolor{stringliteral}{'build'}, \textcolor{stringliteral}{'sign'}\}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00285}00285                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00286}00286             \textcolor{keywordflow}{elif} goal == \textcolor{stringliteral}{'flash'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00287}00287                 content.append(\textcolor{stringliteral}{'west flash\{\}'}.format(dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00288}00288             \textcolor{keywordflow}{elif} goal == \textcolor{stringliteral}{'debug'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00289}00289                 content.append(\textcolor{stringliteral}{'west debug\{\}'}.format(dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00290}00290             \textcolor{keywordflow}{elif} goal == \textcolor{stringliteral}{'debugserver'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00291}00291                 content.append(\textcolor{stringliteral}{'west debugserver\{\}'}.format(dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00292}00292             \textcolor{keywordflow}{elif} goal == \textcolor{stringliteral}{'attach'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00293}00293                 content.append(\textcolor{stringliteral}{'west attach\{\}'}.format(dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00294}00294             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00295}00295                 content.append(\textcolor{stringliteral}{'west build -\/t \{\}\{\}'}.format(goal, dst))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00296}00296 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00297}00297         \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00298}00298 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00299}00299     \textcolor{preprocessor}{@staticmethod}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00300}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a651f4e560d1ae2186d75281b3a88905d}{00300}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a651f4e560d1ae2186d75281b3a88905d}{\_mkdir}}(mkdir, build\_dir, host\_os, skip\_config):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00301}00301         content = []}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00302}00302         \textcolor{keywordflow}{if} skip\_config:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00303}00303             content.append(\textcolor{stringliteral}{"{}\# If you already made a build directory (\{\}) and ran cmake, just 'cd \{\}' instead."{}}.format(build\_dir, build\_dir))  \textcolor{comment}{\# noqa: E501}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00304}00304         \textcolor{keywordflow}{if} host\_os == \textcolor{stringliteral}{'all'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00305}00305             content.append(\textcolor{stringliteral}{'mkdir \{\} \&\& cd \{\}'}.format(build\_dir, build\_dir))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00306}00306         \textcolor{keywordflow}{if} host\_os == \textcolor{stringliteral}{"{}unix"{}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00307}00307             content.append(\textcolor{stringliteral}{'\{\} \{\} \&\& cd \{\}'}.format(mkdir, build\_dir, build\_dir))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00308}00308         \textcolor{keywordflow}{elif} host\_os == \textcolor{stringliteral}{"{}win"{}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00309}00309             build\_dir = build\_dir.replace(\textcolor{stringliteral}{'/'}, \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00310}00310             content.append(\textcolor{stringliteral}{'mkdir \{\} \& cd \{\}'}.format(build\_dir, build\_dir))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00311}00311         \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00312}00312 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00313}00313     \textcolor{preprocessor}{@staticmethod}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00314}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a0f3a3671dbdd590865168f1ddd2a623c}{00314}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a0f3a3671dbdd590865168f1ddd2a623c}{\_cmake\_args}}(**kwargs):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00315}00315         board = kwargs[\textcolor{stringliteral}{'board'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00316}00316         shield = kwargs[\textcolor{stringliteral}{'shield'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00317}00317         conf = kwargs[\textcolor{stringliteral}{'conf'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00318}00318         gen\_args = kwargs[\textcolor{stringliteral}{'gen\_args'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00319}00319         board\_arg = \textcolor{stringliteral}{' -\/DBOARD=\{\}'}.format(board) \textcolor{keywordflow}{if} board \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00320}00320         shield\_arg = \textcolor{stringliteral}{' -\/DSHIELD=\{\}'}.format(shield) \textcolor{keywordflow}{if} shield \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00321}00321         conf\_arg = \textcolor{stringliteral}{' -\/DCONF\_FILE=\{\}'}.format(conf) \textcolor{keywordflow}{if} conf \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00322}00322         gen\_args = \textcolor{stringliteral}{' \{\}'}.format(gen\_args) \textcolor{keywordflow}{if} gen\_args \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00323}00323 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00324}00324         \textcolor{keywordflow}{return} \textcolor{stringliteral}{'\{\}\{\}\{\}\{\}'}.format(board\_arg, shield\_arg, conf\_arg, gen\_args)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00325}00325 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00326}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a54c4caa09db978c709eef4b201abeacb}{00326}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a54c4caa09db978c709eef4b201abeacb}{\_cd\_into}}(self, mkdir, **kwargs):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00327}00327         app = kwargs[\textcolor{stringliteral}{'app'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00328}00328         host\_os = kwargs[\textcolor{stringliteral}{'host\_os'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00329}00329         compact = kwargs[\textcolor{stringliteral}{'compact'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00330}00330         build\_dir = kwargs[\textcolor{stringliteral}{'build\_dir'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00331}00331         skip\_config = kwargs[\textcolor{stringliteral}{'skip\_config'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00332}00332         content = []}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00333}00333         os\_comment = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00334}00334         \textcolor{keywordflow}{if} len(host\_os) > 1:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00335}00335             os\_comment = \textcolor{stringliteral}{'\# On \{\}'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00336}00336             num\_slashes = build\_dir.count(\textcolor{stringliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00337}00337             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} app \textcolor{keywordflow}{and} mkdir \textcolor{keywordflow}{and} num\_slashes == 0:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00338}00338                 \textcolor{comment}{\# When there's no app and a single level deep build dir,}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00339}00339                 \textcolor{comment}{\# simplify output}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00340}00340                 content.extend(self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a651f4e560d1ae2186d75281b3a88905d}{\_mkdir}}(mkdir, build\_dir, \textcolor{stringliteral}{'all'},}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00341}00341                                skip\_config))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00342}00342                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00343}00343                     content.append(\textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00344}00344                 \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00345}00345         \textcolor{keywordflow}{for} host \textcolor{keywordflow}{in} host\_os:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00346}00346             \textcolor{keywordflow}{if} host == \textcolor{stringliteral}{"{}unix"{}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00347}00347                 \textcolor{keywordflow}{if} os\_comment:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00348}00348                     content.append(os\_comment.format(\textcolor{stringliteral}{'Linux/macOS'}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00349}00349                 \textcolor{keywordflow}{if} app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00350}00350                     content.append(\textcolor{stringliteral}{'cd \{\}'}.format(app))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00351}00351             \textcolor{keywordflow}{elif} host == \textcolor{stringliteral}{"{}win"{}}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00352}00352                 \textcolor{keywordflow}{if} os\_comment:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00353}00353                     content.append(os\_comment.format(\textcolor{stringliteral}{'Windows'}))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00354}00354                 \textcolor{keywordflow}{if} app:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00355}00355                     backslashified = app.replace(\textcolor{stringliteral}{'/'}, \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00356}00356                     content.append(\textcolor{stringliteral}{'cd \{\}'}.format(backslashified))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00357}00357             \textcolor{keywordflow}{if} mkdir:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00358}00358                 content.extend(self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a651f4e560d1ae2186d75281b3a88905d}{\_mkdir}}(mkdir, build\_dir, host, skip\_config))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00359}00359             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00360}00360                 content.append(\textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00361}00361         \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00362}00362 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00363}\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a80ed59beb7852b5f766d41f573cfc6ce}{00363}}     \textcolor{keyword}{def }\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a80ed59beb7852b5f766d41f573cfc6ce}{\_generate\_cmake}}(self, **kwargs):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00364}00364         generator = kwargs[\textcolor{stringliteral}{'generator'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00365}00365         cd\_into = kwargs[\textcolor{stringliteral}{'cd\_into'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00366}00366         app = kwargs[\textcolor{stringliteral}{'app'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00367}00367         in\_tree = kwargs[\textcolor{stringliteral}{'in\_tree'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00368}00368         build\_dir = kwargs[\textcolor{stringliteral}{'build\_dir'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00369}00369         build\_args = kwargs[\textcolor{stringliteral}{'build\_args'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00370}00370         skip\_config = kwargs[\textcolor{stringliteral}{'skip\_config'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00371}00371         goals = kwargs[\textcolor{stringliteral}{'goals'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00372}00372         compact = kwargs[\textcolor{stringliteral}{'compact'}]}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00373}00373 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00374}00374         content = []}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00375}00375 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00376}00376         \textcolor{keywordflow}{if} in\_tree \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00377}00377             content.append(in\_tree)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00378}00378 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00379}00379         \textcolor{keywordflow}{if} cd\_into:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00380}00380             num\_slashes = build\_dir.count(\textcolor{stringliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00381}00381             mkdir = \textcolor{stringliteral}{'mkdir'} \textcolor{keywordflow}{if} num\_slashes == 0 \textcolor{keywordflow}{else} \textcolor{stringliteral}{'mkdir -\/p'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00382}00382             content.extend(self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a54c4caa09db978c709eef4b201abeacb}{\_cd\_into}}(mkdir, **kwargs))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00383}00383             \textcolor{comment}{\# Prepare cmake/ninja/make variables}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00384}00384             source\_dir = \textcolor{stringliteral}{' '} + \textcolor{stringliteral}{'/'}.join([\textcolor{stringliteral}{'..'} \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(num\_slashes + 1)])}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00385}00385             cmake\_build\_dir = \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00386}00386             tool\_build\_dir = \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00387}00387         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00388}00388             source\_dir = \textcolor{stringliteral}{' \{\}'}.format(app) \textcolor{keywordflow}{if} app \textcolor{keywordflow}{else} \textcolor{stringliteral}{' .'}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00389}00389             cmake\_build\_dir = \textcolor{stringliteral}{' -\/B\{\}'}.format(build\_dir)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00390}00390             tool\_build\_dir = \textcolor{stringliteral}{' -\/C\{\}'}.format(build\_dir)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00391}00391 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00392}00392         \textcolor{comment}{\# Now generate the actual cmake and make/ninja commands}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00393}00393         gen\_arg = \textcolor{stringliteral}{' -\/GNinja'} \textcolor{keywordflow}{if} generator == \textcolor{stringliteral}{'ninja'} \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00394}00394         build\_args = \textcolor{stringliteral}{' \{\}'}.format(build\_args) \textcolor{keywordflow}{if} build\_args \textcolor{keywordflow}{else} \textcolor{stringliteral}{''}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00395}00395         cmake\_args = self.\mbox{\hyperlink{classzephyr_1_1application_1_1ZephyrAppCommandsDirective_a0f3a3671dbdd590865168f1ddd2a623c}{\_cmake\_args}}(**kwargs)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00396}00396 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00397}00397         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00398}00398             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} cd\_into \textcolor{keywordflow}{and} skip\_config:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00399}00399                 content.append(\textcolor{stringliteral}{"{}\# If you already ran cmake with -\/B\{\}, you "{}} \(\backslash\)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00400}00400                                \textcolor{stringliteral}{"{}can skip this step and run \{\} directly."{}}.}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00401}00401                                format(build\_dir, generator))  \textcolor{comment}{\# noqa: E501}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00402}00402             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00403}00403                 content.append(\textcolor{stringliteral}{'\# Use cmake to configure a \{\}-\/based build'} \(\backslash\)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00404}00404                                \textcolor{stringliteral}{'system:'}.format(generator.capitalize()))  \textcolor{comment}{\# noqa: E501}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00405}00405 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00406}00406         content.append(\textcolor{stringliteral}{'cmake\{\}\{\}\{\}\{\}'}.format(cmake\_build\_dir, gen\_arg,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00407}00407                                               cmake\_args, source\_dir))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00408}00408         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} compact:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00409}00409             content.extend([\textcolor{stringliteral}{''},}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00410}00410                             \textcolor{stringliteral}{'\# Now run ninja on the generated build system:'}])}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00411}00411 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00412}00412         \textcolor{keywordflow}{if} \textcolor{stringliteral}{'build'} \textcolor{keywordflow}{in} goals:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00413}00413             content.append(\textcolor{stringliteral}{'\{\}\{\}\{\}'}.format(generator, tool\_build\_dir,}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00414}00414                                            build\_args))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00415}00415         \textcolor{keywordflow}{for} goal \textcolor{keywordflow}{in} goals:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00416}00416             \textcolor{keywordflow}{if} goal == \textcolor{stringliteral}{'build'}:}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00417}00417                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00418}00418             content.append(\textcolor{stringliteral}{'\{\}\{\} \{\}'}.format(generator, tool\_build\_dir, goal))}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00419}00419 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00420}00420         \textcolor{keywordflow}{return} content}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00421}00421 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00422}00422 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00423}\mbox{\hyperlink{namespacezephyr_1_1application_a472b23f642f0c43ddb39b901b215ff67}{00423}} \textcolor{keyword}{def }\mbox{\hyperlink{namespacezephyr_1_1application_a472b23f642f0c43ddb39b901b215ff67}{setup}}(app):}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00424}00424     app.add\_directive(\textcolor{stringliteral}{'zephyr-\/app-\/commands'}, ZephyrAppCommandsDirective)}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00425}00425 }
\DoxyCodeLine{\Hypertarget{application_8py_source_l00426}00426     \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00427}00427         \textcolor{stringliteral}{'version'}: \textcolor{stringliteral}{'1.0'},}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00428}00428         \textcolor{stringliteral}{'parallel\_read\_safe'}: \textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00429}00429         \textcolor{stringliteral}{'parallel\_write\_safe'}: \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{application_8py_source_l00430}00430     \}}

\end{DoxyCode}
