\hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler}{}\doxysection{streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler Class Reference}
\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler}\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}


Abstract Class for extend to implement scheduling business logic.  




{\ttfamily \#include $<$vehicle\+\_\+scheduler.\+h$>$}



Inheritance diagram for streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a26f9acdf3e3fa08c8025bf4daebd1376}{vehicle\+\_\+scheduler}} ()=default
\begin{DoxyCompactList}\small\item\em Construct a new vehicle scheduler object. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_ab4ebf26e4aae6538e7481220b2df3488}{$\sim$vehicle\+\_\+scheduler}} ()=default
\begin{DoxyCompactList}\small\item\em Destroy the vehicle scheduler object. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a68ae44ddfa8ae16f298b2798ed93b9d2}{schedule\+\_\+vehicles}} (std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$ \&vehicles, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule}{intersection\+\_\+schedule}} $>$ \&schedule)=0
\begin{DoxyCompactList}\small\item\em Virtual method to schedule vehicle. Different implementations of vehicle scheduler can implement custom business logic for scheduling vehicle while taking advantage of polymorphism to dynamically assign class at runtime. \end{DoxyCompactList}\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a843b25b73b376d77df5a8d5e77f818d2}{get\+\_\+intersection\+\_\+info}} () const
\begin{DoxyCompactList}\small\item\em Get the intersection info object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a8b666aed7fe6d72a268315baeb1f85e1}{set\+\_\+intersection\+\_\+info}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \+\_\+intersection\+\_\+info)
\begin{DoxyCompactList}\small\item\em Set the intersection info object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a85947f43b293504a108619374c0c0dae}{estimate\+\_\+vehicles\+\_\+at\+\_\+common\+\_\+time}} (std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$ \&vehicles, const u\+\_\+int64\+\_\+t timestamp) const
\begin{DoxyCompactList}\small\item\em Method to estimate all vehicle\textquotesingle{}s speed and location at a common future time. The time needs to be time since epoch in milliseconds. To predict vehicle location and speed at future time, current kinematic information is used including speed and current acceleration. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af8916add714bef70d8f48efc0ccfca7b}{get\+\_\+entry\+\_\+lanelet\+\_\+info}} (const \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} \&veh) const
\begin{DoxyCompactList}\small\item\em Helper method to get entry lane OAILanelet\+\_\+info from intersection information given a vehicle. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af2c80eb87e5a9cabaad660544003663c}{get\+\_\+link\+\_\+lanelet\+\_\+info}} (const \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} \&veh) const
\begin{DoxyCompactList}\small\item\em Helper method to get link lane OAILanelet\+\_\+info from intersection information given a vehicle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}{intersection\+\_\+info}}
\begin{DoxyCompactList}\small\item\em shared pointer to intersection information required for scheduling. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Abstract Class for extend to implement scheduling business logic. 

Definition at line \mbox{\hyperlink{vehicle__scheduler_8h_source_l00020}{20}} of file \mbox{\hyperlink{vehicle__scheduler_8h_source}{vehicle\+\_\+scheduler.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a26f9acdf3e3fa08c8025bf4daebd1376}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a26f9acdf3e3fa08c8025bf4daebd1376}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!vehicle\_scheduler@{vehicle\_scheduler}}
\index{vehicle\_scheduler@{vehicle\_scheduler}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{vehicle\_scheduler()}{vehicle\_scheduler()}}
{\footnotesize\ttfamily streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



Construct a new vehicle scheduler object. 

\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_ab4ebf26e4aae6538e7481220b2df3488}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_ab4ebf26e4aae6538e7481220b2df3488}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!````~vehicle\_scheduler@{$\sim$vehicle\_scheduler}}
\index{````~vehicle\_scheduler@{$\sim$vehicle\_scheduler}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{$\sim$vehicle\_scheduler()}{~vehicle\_scheduler()}}
{\footnotesize\ttfamily virtual streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::$\sim$vehicle\+\_\+scheduler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



Destroy the vehicle scheduler object. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a85947f43b293504a108619374c0c0dae}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a85947f43b293504a108619374c0c0dae}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!estimate\_vehicles\_at\_common\_time@{estimate\_vehicles\_at\_common\_time}}
\index{estimate\_vehicles\_at\_common\_time@{estimate\_vehicles\_at\_common\_time}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{estimate\_vehicles\_at\_common\_time()}{estimate\_vehicles\_at\_common\_time()}}
{\footnotesize\ttfamily void streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::estimate\+\_\+vehicles\+\_\+at\+\_\+common\+\_\+time (\begin{DoxyParamCaption}\item[{std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$ \&}]{vehicles,  }\item[{const u\+\_\+int64\+\_\+t}]{timestamp }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Method to estimate all vehicle\textquotesingle{}s speed and location at a common future time. The time needs to be time since epoch in milliseconds. To predict vehicle location and speed at future time, current kinematic information is used including speed and current acceleration. 


\begin{DoxyParams}{Parameters}
{\em vehicles} & Vehicle for which to calculate future position and speed. \\
\hline
{\em timestamp} & Current or future time in milliseconds since epoch \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1scheduling__exception}{scheduling\+\_\+exception}}} & if vehicle update time for any vehicle is more recent than timestamp. \\
\hline
\end{DoxyExceptions}


Definition at line \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00049}{49}} of file \mbox{\hyperlink{vehicle__scheduler_8cpp_source}{vehicle\+\_\+scheduler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00050                                                                                                  \{}
\DoxyCodeLine{00051         \textcolor{keywordflow}{for} ( \textcolor{keyword}{auto} \&[v\_id, veh]: vehicles) \{}
\DoxyCodeLine{00052             \textcolor{comment}{// Time difference in seconds}}
\DoxyCodeLine{00053             \textcolor{keywordtype}{double} delta\_t = (double)(\mbox{\hyperlink{namespacesimulate__mobilityoperation_a53dff21a6d447ca660693de3432b79d0}{timestamp}} -\/ veh.\_cur\_time)/1000.0;}
\DoxyCodeLine{00054             \textcolor{keywordflow}{if} ( delta\_t > 500.0 ) \{}
\DoxyCodeLine{00055                 SPDLOG\_WARN(\textcolor{stringliteral}{"{}Vehicle update \{0\} is older than 5 times the vehicle update interval (500 ms)!"{}}, veh.\_id);}
\DoxyCodeLine{00056             \}}
\DoxyCodeLine{00057             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( delta\_t > 200.0) \{}
\DoxyCodeLine{00058                 SPDLOG\_WARN(\textcolor{stringliteral}{"{}Vehicle update \{0\} is older than double the vehicle update interval (200 ms)!"{}}, veh.\_id);}
\DoxyCodeLine{00059             \}}
\DoxyCodeLine{00060             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( delta\_t < 0) \{}
\DoxyCodeLine{00061                 \textcolor{keywordflow}{throw} scheduling\_exception(\textcolor{stringliteral}{"{}Timestamp "{}}+ \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{namespacesimulate__mobilityoperation_a53dff21a6d447ca660693de3432b79d0}{timestamp}}) + \textcolor{stringliteral}{"{} is earlier that latest vehicle update "{}} }
\DoxyCodeLine{00062                     + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(veh.\_cur\_time) + \textcolor{stringliteral}{"{} Vehicles can only be scheduled for current or future time."{}});}
\DoxyCodeLine{00063             \}}
\DoxyCodeLine{00064             \textcolor{comment}{// estimate future speed.}}
\DoxyCodeLine{00065             \textcolor{keywordtype}{double} v\_final = veh.\_cur\_speed + veh.\_cur\_accel*delta\_t;}
\DoxyCodeLine{00066             \textcolor{comment}{// estimate change in distance}}
\DoxyCodeLine{00067             \textcolor{keywordtype}{double} delta\_x = ((v\_final + veh.\_cur\_speed)/2.0)*delta\_t;}
\DoxyCodeLine{00068             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting speed for vehicle \{0\} from \{1\}m/s to \{2\}m/s."{}}, }
\DoxyCodeLine{00069                             veh.\_id, }
\DoxyCodeLine{00070                             veh.\_cur\_speed, }
\DoxyCodeLine{00071                             v\_final );}
\DoxyCodeLine{00072             veh.\_cur\_speed = v\_final;}
\DoxyCodeLine{00073             veh.\_cur\_time =  \mbox{\hyperlink{namespacesimulate__mobilityoperation_a53dff21a6d447ca660693de3432b79d0}{timestamp}};}
\DoxyCodeLine{00074             \textcolor{comment}{// Estimate distance to end of lanelet}}
\DoxyCodeLine{00075             \textcolor{keywordflow}{if} ( veh.\_cur\_distance -\/ delta\_x >= 0.0) \{}
\DoxyCodeLine{00076                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Setting distance for vehicle \{0\} from \{1\}m to \{2\}m."{}}, }
\DoxyCodeLine{00077                             veh.\_id, }
\DoxyCodeLine{00078                             veh.\_cur\_distance, }
\DoxyCodeLine{00079                             veh.\_cur\_distance-\/delta\_x );}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081                 veh.\_cur\_distance -\/= delta\_x;}
\DoxyCodeLine{00082             \}}
\DoxyCodeLine{00083             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00084                 \textcolor{comment}{// TODO: Could add lanelet transition estimation with intersection model information.}}
\DoxyCodeLine{00085                 veh.\_cur\_distance =  0.0;}
\DoxyCodeLine{00086             \}}
\DoxyCodeLine{00087             \textcolor{comment}{// Remove all future points not older than timestamp for estimation.}}
\DoxyCodeLine{00088             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = veh.\_future\_info.begin() ; it != veh.\_future\_info.end(); it++ ) \{}
\DoxyCodeLine{00089                 \textcolor{keywordflow}{if} ( \mbox{\hyperlink{namespacesimulate__mobilityoperation_a53dff21a6d447ca660693de3432b79d0}{timestamp}} > it-\/>timestamp ) \{}
\DoxyCodeLine{00090                     veh.\_future\_info.erase( it-\/-\/);}
\DoxyCodeLine{00091                 \}}
\DoxyCodeLine{00092             \}}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094         \}}
\DoxyCodeLine{00095     \}}

\end{DoxyCode}


References \mbox{\hyperlink{simulate__mobilityoperation_8py_source_l00026}{simulate\+\_\+mobilityoperation\+::timestamp}}, and \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{to\+\_\+string()}}.



Referenced by \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00009}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+vehicles()}}, and \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00005}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+vehicles()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a85947f43b293504a108619374c0c0dae_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a85947f43b293504a108619374c0c0dae_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af8916add714bef70d8f48efc0ccfca7b}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af8916add714bef70d8f48efc0ccfca7b}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!get\_entry\_lanelet\_info@{get\_entry\_lanelet\_info}}
\index{get\_entry\_lanelet\_info@{get\_entry\_lanelet\_info}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{get\_entry\_lanelet\_info()}{get\_entry\_lanelet\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::get\+\_\+entry\+\_\+lanelet\+\_\+info (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} \&}]{veh }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Helper method to get entry lane OAILanelet\+\_\+info from intersection information given a vehicle. 


\begin{DoxyParams}{Parameters}
{\em veh} & Vehicle for which to find entry lane OAILanlet\+\_\+info. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} for entry lane. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00013}{13}} of file \mbox{\hyperlink{vehicle__scheduler_8cpp_source}{vehicle\+\_\+scheduler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00013                                                                                                             \{}
\DoxyCodeLine{00014         \mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{OpenAPI::OAILanelet\_info}} entry\_lane;}
\DoxyCodeLine{00015         \textcolor{keywordtype}{bool} is\_found = \textcolor{keyword}{false};}
\DoxyCodeLine{00016         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&lanelet : \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}{intersection\_info}}-\/>getEntryLanelets() ) \{}
\DoxyCodeLine{00017             \textcolor{keywordtype}{int} lane\_id =lanelet.\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info_a489d1a475686159298697bccabd2bd52}{getId}}();}
\DoxyCodeLine{00018             \textcolor{keywordflow}{if} ( lane\_id == veh.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}} ) \{}
\DoxyCodeLine{00019                 entry\_lane =  lanelet;}
\DoxyCodeLine{00020                 is\_found = \textcolor{keyword}{true};}
\DoxyCodeLine{00021             \}}
\DoxyCodeLine{00022             }
\DoxyCodeLine{00023         \}}
\DoxyCodeLine{00024         \textcolor{keywordflow}{if} (!is\_found) \{}
\DoxyCodeLine{00025             \textcolor{keywordflow}{throw} scheduling\_exception(\textcolor{stringliteral}{"{}No entry lane "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(veh.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}}) + \textcolor{stringliteral}{"{} found in intersection info!"{}});}
\DoxyCodeLine{00026         \}}
\DoxyCodeLine{00027         \textcolor{keywordflow}{return} entry\_lane;}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \}}

\end{DoxyCode}


References \mbox{\hyperlink{vehicle_8h_source_l00049}{streets\+\_\+vehicles\+::vehicle\+::\+\_\+cur\+\_\+lane\+\_\+id}}, \mbox{\hyperlink{vehicle_8h_source_l00051}{streets\+\_\+vehicles\+::vehicle\+::\+\_\+entry\+\_\+lane\+\_\+id}}, \mbox{\hyperlink{intersection__client__api_2OAILanelet__info_8cpp_source_l00121}{Open\+API\+::\+OAILanelet\+\_\+info\+::get\+Id()}}, \mbox{\hyperlink{vehicle__scheduler_8h_source_l00026}{intersection\+\_\+info}}, and \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{to\+\_\+string()}}.



Referenced by \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00226}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::calculate\+\_\+earliest\+\_\+entering\+\_\+time()}}, and \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00390}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::estimate\+\_\+earliest\+\_\+time\+\_\+to\+\_\+stop\+\_\+bar()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af8916add714bef70d8f48efc0ccfca7b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af8916add714bef70d8f48efc0ccfca7b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a843b25b73b376d77df5a8d5e77f818d2}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a843b25b73b376d77df5a8d5e77f818d2}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!get\_intersection\_info@{get\_intersection\_info}}
\index{get\_intersection\_info@{get\_intersection\_info}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{get\_intersection\_info()}{get\_intersection\_info()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$ streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::get\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the intersection info object. 

\begin{DoxyReturn}{Returns}
std\+::shared\+\_\+ptr$<$\+Open\+API\+::\+OAIIntersection\+\_\+info$>$ 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00004}{4}} of file \mbox{\hyperlink{vehicle__scheduler_8cpp_source}{vehicle\+\_\+scheduler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00004                                                                                              \{}
\DoxyCodeLine{00005         \textcolor{keywordflow}{return} \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}{intersection\_info}};}
\DoxyCodeLine{00006     \}}

\end{DoxyCode}


References \mbox{\hyperlink{vehicle__scheduler_8h_source_l00026}{intersection\+\_\+info}}.

\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af2c80eb87e5a9cabaad660544003663c}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af2c80eb87e5a9cabaad660544003663c}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!get\_link\_lanelet\_info@{get\_link\_lanelet\_info}}
\index{get\_link\_lanelet\_info@{get\_link\_lanelet\_info}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{get\_link\_lanelet\_info()}{get\_link\_lanelet\_info()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::get\+\_\+link\+\_\+lanelet\+\_\+info (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} \&}]{veh }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Helper method to get link lane OAILanelet\+\_\+info from intersection information given a vehicle. 


\begin{DoxyParams}{Parameters}
{\em veh} & Vehicle for which to find link lane OAILanlet\+\_\+info. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{Open\+API\+::\+OAILanelet\+\_\+info}} for link lane. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00031}{31}} of file \mbox{\hyperlink{vehicle__scheduler_8cpp_source}{vehicle\+\_\+scheduler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031                                                                                                             \{}
\DoxyCodeLine{00032         \mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info}{OpenAPI::OAILanelet\_info}} link\_lane;}
\DoxyCodeLine{00033         \textcolor{keywordtype}{bool} is\_found = \textcolor{keyword}{false};}
\DoxyCodeLine{00034         \textcolor{keywordflow}{for} ( \textcolor{keyword}{const} \textcolor{keyword}{auto} \&lanelet : \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}{intersection\_info}}-\/>getLinkLanelets() ) \{}
\DoxyCodeLine{00035             \textcolor{keywordtype}{int} lane\_id = lanelet.\mbox{\hyperlink{classOpenAPI_1_1OAILanelet__info_a489d1a475686159298697bccabd2bd52}{getId}}();}
\DoxyCodeLine{00036             \textcolor{keywordflow}{if} ( lane\_id == veh.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_aaa9cbe97b2343b3f14841c1ed2bc8e3d}{\_link\_id}} ) \{}
\DoxyCodeLine{00037                 link\_lane =  lanelet;}
\DoxyCodeLine{00038                 is\_found = \textcolor{keyword}{true};}
\DoxyCodeLine{00039             \}}
\DoxyCodeLine{00040             }
\DoxyCodeLine{00041         \}}
\DoxyCodeLine{00042         \textcolor{keywordflow}{if} (!is\_found) \{}
\DoxyCodeLine{00043             \textcolor{keywordflow}{throw} scheduling\_exception(\textcolor{stringliteral}{"{}No link lane "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(veh.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}}) + \textcolor{stringliteral}{"{} found in intersection info!"{}});}
\DoxyCodeLine{00044         \}}
\DoxyCodeLine{00045         \textcolor{keywordflow}{return} link\_lane;}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047     \}}

\end{DoxyCode}


References \mbox{\hyperlink{vehicle_8h_source_l00049}{streets\+\_\+vehicles\+::vehicle\+::\+\_\+cur\+\_\+lane\+\_\+id}}, \mbox{\hyperlink{vehicle_8h_source_l00055}{streets\+\_\+vehicles\+::vehicle\+::\+\_\+link\+\_\+id}}, \mbox{\hyperlink{intersection__client__api_2OAILanelet__info_8cpp_source_l00121}{Open\+API\+::\+OAILanelet\+\_\+info\+::get\+Id()}}, \mbox{\hyperlink{vehicle__scheduler_8h_source_l00026}{intersection\+\_\+info}}, and \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{to\+\_\+string()}}.



Referenced by \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00226}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::calculate\+\_\+earliest\+\_\+entering\+\_\+time()}}, \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00432}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::consider\+\_\+departure\+\_\+position\+\_\+permutation()}}, \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00363}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::estimate\+\_\+clearance\+\_\+time()}}, \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00368}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::estimate\+\_\+entering\+\_\+time\+\_\+for\+\_\+ev()}}, \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00169}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::estimate\+\_\+et()}}, \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00046}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+dvs()}}, \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00117}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+dvs()}}, and \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00230}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+evs()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af2c80eb87e5a9cabaad660544003663c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classstreets__vehicle__scheduler_1_1vehicle__scheduler_af2c80eb87e5a9cabaad660544003663c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a68ae44ddfa8ae16f298b2798ed93b9d2}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a68ae44ddfa8ae16f298b2798ed93b9d2}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!schedule\_vehicles@{schedule\_vehicles}}
\index{schedule\_vehicles@{schedule\_vehicles}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{schedule\_vehicles()}{schedule\_vehicles()}}
{\footnotesize\ttfamily virtual void streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::schedule\+\_\+vehicles (\begin{DoxyParamCaption}\item[{std\+::unordered\+\_\+map$<$ std\+::string, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{streets\+\_\+vehicles\+::vehicle}} $>$ \&}]{vehicles,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule}{intersection\+\_\+schedule}} $>$ \&}]{schedule }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Virtual method to schedule vehicle. Different implementations of vehicle scheduler can implement custom business logic for scheduling vehicle while taking advantage of polymorphism to dynamically assign class at runtime. 


\begin{DoxyParams}{Parameters}
{\em vehicles} & unordered map of vehicles to schedule. \\
\hline
{\em schedule} & empty \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule}{intersection\+\_\+schedule}} shared pointer which is returned by reference to provide calculated scheduling information. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1all__stop__vehicle__scheduler_a930961b3e285b2a2d08f4276ffa22658}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler}}, and \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1signalized__vehicle__scheduler_a2572fdbb86e141df40174d618fe2a3d0}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler}}.

\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a8b666aed7fe6d72a268315baeb1f85e1}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a8b666aed7fe6d72a268315baeb1f85e1}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!set\_intersection\_info@{set\_intersection\_info}}
\index{set\_intersection\_info@{set\_intersection\_info}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{set\_intersection\_info()}{set\_intersection\_info()}}
{\footnotesize\ttfamily void streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::set\+\_\+intersection\+\_\+info (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}} $>$}]{\+\_\+intersection\+\_\+info }\end{DoxyParamCaption})}



Set the intersection info object. 


\begin{DoxyParams}{Parameters}
{\em \+\_\+intersection\+\_\+info} & \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00008}{8}} of file \mbox{\hyperlink{vehicle__scheduler_8cpp_source}{vehicle\+\_\+scheduler.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00008                                                                                                                 \{}
\DoxyCodeLine{00009         \mbox{\hyperlink{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}{intersection\_info}} = \_intersection\_info;}
\DoxyCodeLine{00010     \}}

\end{DoxyCode}


References \mbox{\hyperlink{vehicle__scheduler_8h_source_l00026}{intersection\+\_\+info}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}\label{classstreets__vehicle__scheduler_1_1vehicle__scheduler_a5fa37276e5ccb41e38cbef573e830e8e}} 
\index{streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}!intersection\_info@{intersection\_info}}
\index{intersection\_info@{intersection\_info}!streets\_vehicle\_scheduler::vehicle\_scheduler@{streets\_vehicle\_scheduler::vehicle\_scheduler}}
\doxysubsubsection{\texorpdfstring{intersection\_info}{intersection\_info}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classOpenAPI_1_1OAIIntersection__info}{Open\+API\+::\+OAIIntersection\+\_\+info}}$>$ streets\+\_\+vehicle\+\_\+scheduler\+::vehicle\+\_\+scheduler\+::intersection\+\_\+info\hspace{0.3cm}{\ttfamily [protected]}}



shared pointer to intersection information required for scheduling. 



Definition at line \mbox{\hyperlink{vehicle__scheduler_8h_source_l00026}{26}} of file \mbox{\hyperlink{vehicle__scheduler_8h_source}{vehicle\+\_\+scheduler.\+h}}.



Referenced by \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00013}{get\+\_\+entry\+\_\+lanelet\+\_\+info()}}, \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00004}{get\+\_\+intersection\+\_\+info()}}, \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00031}{get\+\_\+link\+\_\+lanelet\+\_\+info()}}, \mbox{\hyperlink{all__stop__vehicle__scheduler_8cpp_source_l00230}{streets\+\_\+vehicle\+\_\+scheduler\+::all\+\_\+stop\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+evs()}}, \mbox{\hyperlink{signalized__vehicle__scheduler_8cpp_source_l00078}{streets\+\_\+vehicle\+\_\+scheduler\+::signalized\+\_\+vehicle\+\_\+scheduler\+::schedule\+\_\+evs()}}, and \mbox{\hyperlink{vehicle__scheduler_8cpp_source_l00008}{set\+\_\+intersection\+\_\+info()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
streets\+\_\+utils/streets\+\_\+vehicle\+\_\+scheduler/include/\mbox{\hyperlink{vehicle__scheduler_8h}{vehicle\+\_\+scheduler.\+h}}\item 
streets\+\_\+utils/streets\+\_\+vehicle\+\_\+scheduler/src/\mbox{\hyperlink{vehicle__scheduler_8cpp}{vehicle\+\_\+scheduler.\+cpp}}\end{DoxyCompactItemize}
