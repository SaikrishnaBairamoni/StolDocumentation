\hypertarget{all__stop__status__intent__processor_8cpp_source}{}\doxysection{all\+\_\+stop\+\_\+status\+\_\+intent\+\_\+processor.\+cpp}
\label{all__stop__status__intent__processor_8cpp_source}\index{streets\_utils/streets\_vehicle\_list/src/message\_processors/all\_stop\_status\_intent\_processor.cpp@{streets\_utils/streets\_vehicle\_list/src/message\_processors/all\_stop\_status\_intent\_processor.cpp}}
\mbox{\hyperlink{all__stop__status__intent__processor_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{all__stop__status__intent__processor_8h}{all\_stop\_status\_intent\_processor.h}}"{}}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacestreets__vehicles}{streets\_vehicles}} \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00006}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90}{00006}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a7308fe8b861031993792d0c95cf82d90}{all\_stop\_status\_intent\_processor::from\_json}}(\textcolor{keyword}{const} rapidjson::GenericObject<true,rapidjson::Value> \&json, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}})\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00007}00007         }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00008}00008         \textcolor{comment}{/* the main function will check whether veh\_id is included in the message or not}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00009}00009 \textcolor{comment}{        *  if it is not included, this function cannot be executed!}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00010}00010 \textcolor{comment}{        */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00011}00011         \textcolor{comment}{// Get Meta Data}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00012}00012         \textcolor{keywordflow}{if} (json.FindMember(\textcolor{stringliteral}{"{}metadata"{}})-\/>value.IsObject())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00013}00013             rapidjson::GenericObject<true, rapidjson::Value> metadata = json.FindMember(\textcolor{stringliteral}{"{}metadata"{}})-\/>value.GetObject();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00014}00014             \textcolor{keywordflow}{if} (json.FindMember(\textcolor{stringliteral}{"{}payload"{}})-\/>value.IsObject())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00015}00015                 rapidjson::GenericObject<true, rapidjson::Value> payload = json.FindMember(\textcolor{stringliteral}{"{}payload"{}})-\/>value.GetObject();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00016}00016                 \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467}{read\_metadata}}( metadata, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00017}00017                 \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc}{read\_payload}}( payload, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} );  }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00018}00018                 \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}est\_paths"{}})-\/>value.IsArray()) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00019}00019                     rapidjson::GenericArray<true, rapidjson::Value> est\_path = payload.FindMember(\textcolor{stringliteral}{"{}est\_paths"{}})-\/>value.GetArray();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00020}00020                     \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d}{read\_est\_path}}(est\_path, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00021}00021                 \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00022}00022                 \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00023}00023                     SPDLOG\_WARN(\textcolor{stringliteral}{"{}The \(\backslash\)"{}est\_paths\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00024}00024                 \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00025}00025                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Vehicle Class Vehicle Info Update -\/ timestamp = \{0\}, vehicle = \{1\}, lane\_id = \{2\}, state = \{3\}, speed = \{4\} m/s, distance = \{5\} m, access = \{6\}"{}}, }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00026}00026                     \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a026375b9e6ffc8f8c8aee72465f352dc}{\_cur\_speed}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a21a6378ca2401ac4bc9ca6f6364833fb}{\_cur\_distance}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ad833d8707254668d96de2b3401ee81b6}{\_access}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00027}00027             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00028}00028         \}  }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00029}00029     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00031}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467}{00031}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a4315db81a214ecf564076d78397cb467}{all\_stop\_status\_intent\_processor::read\_metadata}}(\textcolor{keyword}{const} rapidjson::GenericObject<true, rapidjson::Value> \&metadata, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} )\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00032}00032         \textcolor{comment}{// MemberEnd check required for empty object possibility}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00033}00033         \textcolor{keywordflow}{if} ( metadata.FindMember(\textcolor{stringliteral}{"{}timestamp"{}}) != metadata.MemberEnd() \&\& metadata.FindMember(\textcolor{stringliteral}{"{}timestamp"{}})-\/>value.IsUint64()) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00034}00034             \textcolor{comment}{// timestamp in milliseconds }}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00035}00035             u\_int64\_t timeout\_time = std::chrono::duration\_cast<std::chrono::milliseconds>(std::chrono::system\_clock::now().time\_since\_epoch()).count() -\/ \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a2a4f2c264bedd086bd48c8b074e9ffa4}{\_timeout}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00036}00036             u\_int64\_t cur\_time = metadata.FindMember(\textcolor{stringliteral}{"{}timestamp"{}})-\/>value.GetUint64();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00037}00037             \textcolor{keywordflow}{if} ( timeout\_time > cur\_time ) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00038}00038                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}timestamp\(\backslash\)"{} "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(cur\_time) + \textcolor{stringliteral}{"{} for update older than "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(timeout\_time) + \textcolor{stringliteral}{"{}!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00039}00039             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00040}00040             \textcolor{comment}{// convert to seconds.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00041}00041             \textcolor{keywordflow}{if} ( cur\_time > \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}}) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00042}00042                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}} = cur\_time;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00043}00043             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00044}00044                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}Ignore incoming \(\backslash\)"{}timestamp\(\backslash\)"{} "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(cur\_time) + }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00045}00045                     \textcolor{stringliteral}{"{} older than stored last update "{}} + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}}) + \textcolor{stringliteral}{"{}!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00046}00046             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00047}00047         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00048}00048         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00049}00049             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}timestamp\(\backslash\)"{} is missing/incorrect in update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00050}00050         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00051}00051     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00053}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc}{00053}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_aecf488ec3917a0ca3ca8ca2c627f24fc}{all\_stop\_status\_intent\_processor::read\_payload}}(\textcolor{keyword}{const} rapidjson::GenericObject<true, rapidjson::Value> \&payload, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}})\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00054}00054         }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00055}00055         \textcolor{comment}{/* this if condition checks whether the vehicle has been seen before or not */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00056}00056         \textcolor{keywordflow}{if} (\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} == \textcolor{stringliteral}{"{}"{}})\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00057}00057             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00058}00058             \textcolor{keywordflow}{if} ( payload.FindMember(\textcolor{stringliteral}{"{}v\_id"{}})-\/>value.IsString() ) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00059}00059                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} = payload[\textcolor{stringliteral}{"{}v\_id"{}}].GetString();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00060}00060             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00061}00061                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}Update is missing \(\backslash\)"{}v\_id\(\backslash\)"{}! Cannot be processed!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00062}00062             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00063}00063             \textcolor{comment}{/* the unit of the received vehicle length from the message is centimeter without decimal places}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00064}00064 \textcolor{comment}{            *  but the unit of the vehicle length defined in the vehicle class is meter with decimal places. }}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00065}00065 \textcolor{comment}{            *  Therefore, a conversion has been added here.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00066}00066 \textcolor{comment}{            */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00067}00067             \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}v\_length"{}})-\/>value.IsInt())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00068}00068                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a8df55ea8c6a305540ae4601f5c770843}{\_length}} =(double)payload[\textcolor{stringliteral}{"{}v\_length"{}}].GetInt() / 100;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00069}00069             \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00070}00070                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}v\_length\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in the received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00071}00071             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00072}00072             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00073}00073             \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}min\_gap"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00074}00074                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a3a38a205ab41c1912245c3d2a3b8c907}{\_min\_gap}} = payload[\textcolor{stringliteral}{"{}min\_gap"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00075}00075             \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00076}00076                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}min\_gap\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00077}00077             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00078}00078             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00079}00079             \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}react\_t"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00080}00080                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a5c6b46bfbbb31785e7a07e96bc18ae76}{\_reaction\_time}} = payload[\textcolor{stringliteral}{"{}react\_t"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00081}00081             \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00082}00082                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}react\_t\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in the received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00083}00083             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00084}00084             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00085}00085             \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}max\_accel"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00086}00086                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a1180998ca4eeb7d695d135a1e4a75424}{\_accel\_max}} = payload[\textcolor{stringliteral}{"{}max\_accel"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00087}00087             \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00088}00088                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}max\_accel\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in the received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00089}00089             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00091}00091             \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}max\_decel"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00092}00092                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a253341595deb3473620116dcf63d9927}{\_decel\_max}} = payload[\textcolor{stringliteral}{"{}max\_decel"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00093}00093             \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00094}00094                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}max\_decel\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in the received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00095}00095             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00096}00096         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00098}00098             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00099}00099         \textcolor{comment}{/* the unit of the received speed from the message is 0.02 of meter per second}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00100}00100 \textcolor{comment}{        *  the unit of the speed defined in the vehicle class is meter per second. }}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00101}00101 \textcolor{comment}{        */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00102}00102         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}cur\_speed"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00103}00103             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a026375b9e6ffc8f8c8aee72465f352dc}{\_cur\_speed}} = payload[\textcolor{stringliteral}{"{}cur\_speed"{}}].GetDouble() * 0.02;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00104}00104         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00105}00105             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}cur\_speed\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00106}00106         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00108}00108         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}cur\_accel"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00109}00109             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a1feaabc1b77f7545bcdd28833ed71943}{\_cur\_accel}} = payload[\textcolor{stringliteral}{"{}cur\_accel"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00110}00110         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00111}00111             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}cur\_accel\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00112}00112         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00114}00114         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}cur\_lane\_id"{}})-\/>value.IsInt())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00115}00115             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} = payload[\textcolor{stringliteral}{"{}cur\_lane\_id"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00116}00116         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00117}00117             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}cur\_lane\_id\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00118}00118         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00119}00119         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}cur\_ds"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00120}00120             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a21a6378ca2401ac4bc9ca6f6364833fb}{\_cur\_distance}} = payload[\textcolor{stringliteral}{"{}cur\_ds"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00121}00121         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00122}00122             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}cur\_ds\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00123}00123         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00124}00124             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00125}00125         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}is\_allowed"{}})-\/>value.IsBool())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00126}00126             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ad833d8707254668d96de2b3401ee81b6}{\_access}} = payload[\textcolor{stringliteral}{"{}is\_allowed"{}}].GetBool();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00127}00127         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00128}00128             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}is\_allowed\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00131}00131         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}depart\_pos"{}})-\/>value.IsInt64())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00132}00132             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a5aaf317105b29db5a564b0a5c5468d7d}{\_departure\_position}} = payload[\textcolor{stringliteral}{"{}depart\_pos"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00133}00133         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00134}00134             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}depart\_pos\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00136}00136         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00138}00138         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}entry\_lane\_id"{}})-\/>value.IsInt() \&\& payload[\textcolor{stringliteral}{"{}entry\_lane\_id"{}}].GetInt() != 0)\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00139}00139             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}} = payload[\textcolor{stringliteral}{"{}entry\_lane\_id"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00140}00140         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00141}00141             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}entry\_lane\_id\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00142}00142         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00143}00143 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00144}00144         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}dest\_lane\_id"{}})-\/>value.IsInt() \&\& payload[\textcolor{stringliteral}{"{}dest\_lane\_id"{}}].GetInt() != 0)\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00145}00145             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ac841c7b0f836b2ffa73161f555195d14}{\_exit\_lane\_id}} =payload[\textcolor{stringliteral}{"{}dest\_lane\_id"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00146}00146         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00147}00147             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}dest\_lane\_id\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00148}00148         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00149}00149         }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00150}00150         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}link\_lane\_id"{}})-\/>value.IsInt() \&\& payload[\textcolor{stringliteral}{"{}link\_lane\_id"{}}].GetInt() != 0)\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00151}00151             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_aaa9cbe97b2343b3f14841c1ed2bc8e3d}{\_link\_id}} = payload[\textcolor{stringliteral}{"{}link\_lane\_id"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00152}00152         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00153}00153             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}link\_lane\_id\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00154}00154         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00155}00155 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00156}00156         \textcolor{keywordflow}{if} (payload.FindMember(\textcolor{stringliteral}{"{}direction"{}})-\/>value.IsString() )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00157}00157             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adeea1853cfdf53e36447ff2525656ff5}{\_direction}} = payload[\textcolor{stringliteral}{"{}direction"{}}].GetString();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00158}00158         \} \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00159}00159             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}The \(\backslash\)"{}direction\(\backslash\)"{} "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{} is missing/incorrect in received update!"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00160}00160         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00163}00163         \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9}{update\_vehicle\_state}}(\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00164}00164     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00166}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9}{00166}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_ae4a3f6bc8f4d1066c476a6b8d5e8e2f9}{all\_stop\_status\_intent\_processor::update\_vehicle\_state}}( \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} )\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00167}00167         SPDLOG\_INFO(\textcolor{stringliteral}{"{}Update vehilce status with all stop status and intent processor."{}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00168}00168         }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00169}00169         \textcolor{keywordflow}{if} (\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca9a116c50d133c8648404081885194300}{vehicle\_state::ND}} )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00170}00170             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} == \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}} ) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00171}00171                 \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} = \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{vehicle\_state::EV}} ;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00172}00172                 SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Vehicle \{0\} state is updated from ND to EV."{}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}});  }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00173}00173 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00174}00174             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00175}00175             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00176}00176                 SPDLOG\_CRITICAL( \textcolor{stringliteral}{"{}Vehicle with ND (Not Defined) STATE is NOT in entry lane \{0\} != \{1\}"{}},}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00177}00177                     \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00178}00178             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00179}00179 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00180}00180         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00181}00181         \textcolor{comment}{// Asssume vehicle is in entry lane if previous state is EV}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00182}00182         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{vehicle\_state::EV}} \&\& \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442}{is\_vehicle\_stopped}}( \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} ) )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00183}00183             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} != \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}} )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00184}00184                 SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}Stopped vehicle with EV (Entering Vehicle) STATE is NOT in entry lane \{0\} != \{1\}"{}} ,}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00185}00185                     \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00186}00186             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00187}00187             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} =  \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f}{vehicle\_state::RDV}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00188}00188             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ab142b19b021e3ac4908714eaa94cd47e}{\_actual\_st}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00189}00189             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Vehicle \{0\} state is updated from EV to RDV."{}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}});     }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00190}00190         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00191}00191         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f}{vehicle\_state::RDV}} \&\& \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ad833d8707254668d96de2b3401ee81b6}{\_access}} )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00192}00192             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} != \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}} )\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00193}00193                 SPDLOG\_CRITICAL(\textcolor{stringliteral}{"{}Departing vehicle with RDV (Ready to Depart Vehicle) VEHICLE STATE is NOT in entry lane \{0\} != \{1\}"{}} ,}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00194}00194                     \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a4ef0e2e811b0f5cb00f14b89a353c3b5}{\_entry\_lane\_id}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00195}00195             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00196}00196             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} = \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{vehicle\_state::DV}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00197}00197             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a9051ab70996c39cd47df9452bb6afe95}{\_actual\_et}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00198}00198             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Vehicle \{0\} state is updated from RDV to DV."{}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}});     }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00199}00199 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00200}00200         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}} == \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ac841c7b0f836b2ffa73161f555195d14}{\_exit\_lane\_id}} \&\& \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{vehicle\_state::DV}}) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00201}00201             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a54872859b3a12ee290b98e0eedd2864f}{\_cur\_state}} = \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405acaa7bdee32cb21f0abbf9f878cb06cfe16}{vehicle\_state::LV}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00202}00202             \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_ae136d2a443c41014973fa0ed1934cd35}{\_actual\_dt}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00203}00203             SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Vehicle \{0\} state is updated from DV to LV."{}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}});  }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00204}00204 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00205}00205         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00206}00206     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00207}00207 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00208}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d}{00208}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a5fb338e07c0bd7aa48c490d29823dd0d}{all\_stop\_status\_intent\_processor::read\_est\_path}}(\textcolor{keyword}{const} rapidjson::GenericArray<true,rapidjson::Value> \&est\_path, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00210}00210                 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00211}00211         \textcolor{comment}{/* the first point in the future path is the current point */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00212}00212         std::vector<future\_information> future\_info;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00213}00213         \mbox{\hyperlink{structstreets__vehicles_1_1future__information}{future\_information}} fi;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00214}00214         fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_a6b9fc65f4c4402fe6778cfadeb5d6a80}{timestamp}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a278b51810d25efcfcfb91bb13e43e6f3}{\_cur\_time}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00215}00215         fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_a1781159e74b91e5bd6c2ce9eeac2c283}{lane\_id}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_adc3dab0260f149fc908b9b7d49e1ba99}{\_cur\_lane\_id}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00216}00216         fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_aad18b529905ae9cdef265fffb5f0ec6f}{distance}} = \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a21a6378ca2401ac4bc9ca6f6364833fb}{\_cur\_distance}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00217}00217         future\_info.push\_back(fi);}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00218}00218         \textcolor{keywordflow}{for} (rapidjson::SizeType \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} = 0; \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}} < est\_path.Size(); ++\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}})\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00219}00219             rapidjson::GenericObject<true, rapidjson::Value> path\_point = est\_path[\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}].GetObject();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00220}00220             \textcolor{comment}{/* adding checks to make sure the necessary data exist in the future point */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00221}00221             \textcolor{comment}{// Added member end check for Int64 type}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00222}00222             \textcolor{keywordflow}{if} (path\_point.FindMember(\textcolor{stringliteral}{"{}ts"{}}) != path\_point.MemberEnd() \&\&}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00223}00223                 path\_point.FindMember(\textcolor{stringliteral}{"{}ts"{}})-\/>value.IsUint64() \&\& }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00224}00224                 path\_point.FindMember(\textcolor{stringliteral}{"{}id"{}})-\/>value.IsInt() \&\& }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00225}00225                 path\_point.FindMember(\textcolor{stringliteral}{"{}ds"{}})-\/>value.IsDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00227}00227                 \textcolor{comment}{/* adding checks to make sure only valid future points will be saved */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00228}00228                 \textcolor{keywordflow}{if} (path\_point[\textcolor{stringliteral}{"{}id"{}}].GetInt() == 0)\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00229}00229                     SPDLOG\_WARN(\textcolor{stringliteral}{"{}Ignoring incorrect future point with index \{0\} for vehicle \{1\}: \(\backslash\)"{}id\(\backslash\)"{} cannot be 0!"{}}, \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00230}00230                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00231}00231                 \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00232}00232                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (path\_point[\textcolor{stringliteral}{"{}ds"{}}].GetDouble() < 0)\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00233}00233                     SPDLOG\_WARN(\textcolor{stringliteral}{"{}Ignoring incorrect future point with index \{0\} for vehicle \{1\}: \(\backslash\)"{}ds\(\backslash\)"{} cannot be negative!"{}}, \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00234}00234                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00235}00235                 \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00236}00236             }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00237}00237                 \textcolor{comment}{/* the future path received from CARMA Platform does not consider the stopping requirement at the stop bar.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00238}00238 \textcolor{comment}{                *  therefore, CARMA Streets will force the stopping requirement to the vehicle's future path.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00239}00239 \textcolor{comment}{                *  basically, if the vehicle is an EV, or and RDV without access, if the vehicle lane id in the future path is not the same as the vehicle entry lane id, the scheduling service will ignore the future points.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00240}00240 \textcolor{comment}{                * */}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00241}00241                 \textcolor{keywordflow}{if} (future\_info[future\_info.size() -\/ 1].distance >= path\_point[\textcolor{stringliteral}{"{}ds"{}}].GetDouble())\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00242}00242                     fi = \mbox{\hyperlink{structstreets__vehicles_1_1future__information}{future\_information}}();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00243}00243                     \textcolor{comment}{// the unit of timestamp in here is sec with decimal places.}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00244}00244                     fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_a6b9fc65f4c4402fe6778cfadeb5d6a80}{timestamp}} = path\_point[\textcolor{stringliteral}{"{}ts"{}}].GetInt64();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00245}00245                     fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_aad18b529905ae9cdef265fffb5f0ec6f}{distance}} = path\_point[\textcolor{stringliteral}{"{}ds"{}}].GetDouble();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00246}00246                     fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_a1781159e74b91e5bd6c2ce9eeac2c283}{lane\_id}} = path\_point[\textcolor{stringliteral}{"{}id"{}}].GetInt();}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00247}00247                     SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}future path \{0\}: \{1\}, \{2\}, \{3\}, \{4\}"{}}, \mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}, fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_a1781159e74b91e5bd6c2ce9eeac2c283}{lane\_id}}, fi.\mbox{\hyperlink{structstreets__vehicles_1_1future__information_aad18b529905ae9cdef265fffb5f0ec6f}{distance}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00248}00248                     future\_info.push\_back(fi);}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00249}00249                 \} }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00250}00250                 \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00251}00251                     SPDLOG\_INFO(\textcolor{stringliteral}{"{}Vehicle \{0\}: the lane id of the vehicle in the est\_path has changed!"{}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00252}00252                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00253}00253                 \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00255}00255                 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00256}00256             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00257}00257             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00258}00258                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classstreets__vehicles_1_1status__intent__processing__exception}{status\_intent\_processing\_exception}}(\textcolor{stringliteral}{"{}Ignoring incorrect/incomplete future point with index "{}} }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00259}00259                     + \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{namespacesimulate__bsm_a29b8e2f01a805057636de5ad54422c21}{i}}) +\textcolor{stringliteral}{"{} for vehicle "{}} + \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a470605f661a8f625329ebbb10888e2b8}{\_id}} + \textcolor{stringliteral}{"{}!"{}} );}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00260}00260             \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00261}00261         \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00262}00262         }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00263}00263         \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_af37c524f5f0d5512606eb55d27c1ebcb}{\_future\_info}} = future\_info;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00264}00264     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00265}00265 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00266}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442}{00266}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a6d0b32c2cde092c20061998225df7442}{all\_stop\_status\_intent\_processor::is\_vehicle\_stopped}}(\textcolor{keyword}{const} \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}} \&\mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00267}00267         SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Stopping condition spd: \{0\}, dst: \{1\}; Vehicle condition spd: \{2\}, dst: \{3\} ."{}}, }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00268}00268             \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a0db9d9f3c3ff3e7373afeaab4e8872a5}{\_stopping\_speed}}, \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a7acafb46aa506f52816a47e259120b7c}{\_stopping\_distance}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a026375b9e6ffc8f8c8aee72465f352dc}{\_cur\_speed}}, \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a21a6378ca2401ac4bc9ca6f6364833fb}{\_cur\_distance}});}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00269}00269         \textcolor{keywordflow}{return} \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a026375b9e6ffc8f8c8aee72465f352dc}{\_cur\_speed}} <= \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a0db9d9f3c3ff3e7373afeaab4e8872a5}{\_stopping\_speed}} \&\& \mbox{\hyperlink{structstreets__vehicles_1_1vehicle}{vehicle}}.\mbox{\hyperlink{structstreets__vehicles_1_1vehicle_a21a6378ca2401ac4bc9ca6f6364833fb}{\_cur\_distance}} <= \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a7acafb46aa506f52816a47e259120b7c}{\_stopping\_distance}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00270}00270     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00271}00271 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00272}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a12a1b270d0eced95feb9e5062420a6f6}{00272}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a12a1b270d0eced95feb9e5062420a6f6}{all\_stop\_status\_intent\_processor::set\_timeout}}(uint64\_t timeout) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00273}00273         \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a2a4f2c264bedd086bd48c8b074e9ffa4}{\_timeout}} = timeout;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00274}00274     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00275}00275 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00276}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a701e67611fa726d7693f82b3302f0324}{00276}}     uint64\_t \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a701e67611fa726d7693f82b3302f0324}{all\_stop\_status\_intent\_processor::get\_timeout}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00277}00277         \textcolor{keywordflow}{return} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a2a4f2c264bedd086bd48c8b074e9ffa4}{\_timeout}};}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00278}00278     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00280}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_ab9df0a1a3f5a77fe4fcd0b405bfab0f4}{00280}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_ab9df0a1a3f5a77fe4fcd0b405bfab0f4}{all\_stop\_status\_intent\_processor::set\_stopping\_distance}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double} stopping\_distance) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00281}00281         \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a7acafb46aa506f52816a47e259120b7c}{\_stopping\_distance}} = stopping\_distance;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00282}00282     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00283}00283 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00284}\mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_af89822b6c6f045b584f622f7a604b33b}{00284}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_af89822b6c6f045b584f622f7a604b33b}{all\_stop\_status\_intent\_processor::set\_stopping\_speed}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double} stopping\_speed) \{}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00285}00285         \mbox{\hyperlink{classstreets__vehicles_1_1all__stop__status__intent__processor_a0db9d9f3c3ff3e7373afeaab4e8872a5}{\_stopping\_speed}} = stopping\_speed;}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00286}00286     \}}
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00287}00287 }
\DoxyCodeLine{\Hypertarget{all__stop__status__intent__processor_8cpp_source_l00288}00288 \}}

\end{DoxyCode}
