\hypertarget{all__stop__intersection__schedule_8cpp_source}{}\doxysection{all\+\_\+stop\+\_\+intersection\+\_\+schedule.\+cpp}
\label{all__stop__intersection__schedule_8cpp_source}\index{streets\_utils/streets\_vehicle\_scheduler/src/all\_stop\_intersection\_schedule.cpp@{streets\_utils/streets\_vehicle\_scheduler/src/all\_stop\_intersection\_schedule.cpp}}
\mbox{\hyperlink{all__stop__intersection__schedule_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{all__stop__intersection__schedule_8h}{all\_stop\_intersection\_schedule.h}}"{}}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacestreets__vehicle__scheduler}{streets\_vehicle\_scheduler}} \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00005}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a8583c8841aadc359909233cadf5a8158}{00005}}     uint64\_t \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a8583c8841aadc359909233cadf5a8158}{all\_stop\_intersection\_schedule::get\_delay}}()\textcolor{keyword}{ const}\{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00006}00006         uint64\_t delay = 0;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00007}00007         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&veh\_sched : \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a4d82548a820725102a705a16333fffa8}{vehicle\_schedules}} ) \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00008}00008             delay += veh\_sched.et -\/ veh\_sched.st; }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00009}00009         \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00010}00010         \textcolor{keywordflow}{return} delay;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00011}00011     \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00013}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a0c5f99dbf969cf98474aeb2c73c5bb7b}{00013}}     std::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a0c5f99dbf969cf98474aeb2c73c5bb7b}{all\_stop\_intersection\_schedule::toCSV}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00014}00014     }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00015}00015         std::string schedule\_info = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00016}00016         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&sched : \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a4d82548a820725102a705a16333fffa8}{vehicle\_schedules}} )\{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00017}00017             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00018}00018             schedule\_info += sched.v\_id + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00019}00019             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.entry\_lane) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00020}00020             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.link\_id) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00021}00021             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.dp) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00022}00022             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.est) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00023}00023             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.st) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00024}00024             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.et) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00025}00025             schedule\_info += \mbox{\hyperlink{ntcip__1202__ext_8h_a576de7b60eacee3f1a70393a005502cd}{std::to\_string}}(sched.dt) + \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00026}00026             schedule\_info += (sched.access ? \textcolor{stringliteral}{"{}true,"{}}: \textcolor{stringliteral}{"{}false,"{}});}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00027}00027             \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca58d6a88f13e2db7f5059c41047876f00}{streets\_vehicles::vehicle\_state::DV}}) \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00028}00028                 schedule\_info += \textcolor{stringliteral}{"{}DV"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00029}00029             \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405aca834d41112f2943c357f660165b6eb6de}{streets\_vehicles::vehicle\_state::EV}}) \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00030}00030                 schedule\_info += \textcolor{stringliteral}{"{}EV"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00031}00031             \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( sched.state == \mbox{\hyperlink{namespacestreets__vehicles_a41f5c896d8020c141aa96235cf1405acab08ef04fe84cf4f6645fef073717f36f}{streets\_vehicles::vehicle\_state::RDV}}) \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00032}00032                 schedule\_info += \textcolor{stringliteral}{"{}RDV"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00033}00033             \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00034}00034                 schedule\_info += \textcolor{stringliteral}{"{}ND"{}};}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00035}00035             \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00036}00036             schedule\_info += \textcolor{stringliteral}{"{}\(\backslash\)n"{}};  }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00037}00037         \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00039}00039         \textcolor{keywordflow}{return} schedule\_info;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00040}00040     \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00042}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a9f6500415a84f3693d8113166d193f89}{00042}}     std::string \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a9f6500415a84f3693d8113166d193f89}{all\_stop\_intersection\_schedule::toJson}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00043}00043         }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00044}00044         rapidjson::Document doc;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00045}00045         doc.SetObject();}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00046}00046         rapidjson::Document::AllocatorType \&allocator = doc.GetAllocator();}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00048}00048         rapidjson::Value metadata(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00049}00049         metadata.AddMember(\textcolor{stringliteral}{"{}timestamp"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1intersection__schedule_ad8c673b720928c7e181c7777ede5d3d4}{timestamp}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00050}00050         metadata.AddMember(\textcolor{stringliteral}{"{}intersection\_type"{}}, \textcolor{stringliteral}{"{}Carma/stop\_controlled\_intersection"{}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00051}00051         doc.AddMember(\textcolor{stringliteral}{"{}metadata"{}}, metadata, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00053}00053         rapidjson::Value json\_sched(rapidjson::kArrayType);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00054}00054         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&veh\_sched: \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__intersection__schedule_a4d82548a820725102a705a16333fffa8}{vehicle\_schedules}} ) \{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00055}00055             json\_sched.PushBack(veh\_sched.toJson(allocator), allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00056}00056         \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00057}00057         doc.AddMember(\textcolor{stringliteral}{"{}payload"{}}, json\_sched, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00059}00059         rapidjson::StringBuffer buffer;                }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00060}00060         rapidjson::Writer<rapidjson::StringBuffer> writer(buffer);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00061}00061         doc.Accept(writer);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00062}00062         std::string string\_sched = buffer.GetString();}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00064}00064         \textcolor{keywordflow}{return} string\_sched;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00065}00065     \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00067}\mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_a2726d915b4abd31525531fd583aafc50}{00067}}     rapidjson::Value \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_a2726d915b4abd31525531fd583aafc50}{all\_stop\_vehicle\_schedule::toJson}}(rapidjson::Document::AllocatorType\& allocator)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00069}00069         rapidjson::Value vehicle\_sched(rapidjson::kObjectType);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00070}00070         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}v\_id"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1vehicle__schedule_ad9c43fcd19029d3f8ddc56486a0a2cf1}{v\_id}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00071}00071         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}st"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_afa84a7abfc51bcf1494e9306993814b2}{st}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00072}00072         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}et"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_a7590a81d8cd1d8bb37f1a99e66ec0197}{et}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00073}00073         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}dt"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_ab735125526f509961867602dc459f8e6}{dt}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00074}00074         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}dp"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_a6bbade68e4c22a7bf0ac1fe77120ae02}{dp}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00075}00075         vehicle\_sched.AddMember(\textcolor{stringliteral}{"{}access"{}}, \mbox{\hyperlink{structstreets__vehicle__scheduler_1_1all__stop__vehicle__schedule_a50640de602629b4f186ab3b8e0a51510}{access}}, allocator);}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00076}00076         \textcolor{keywordflow}{return} vehicle\_sched;}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00077}00077     \}}
\DoxyCodeLine{\Hypertarget{all__stop__intersection__schedule_8cpp_source_l00078}00078 \}}

\end{DoxyCode}
