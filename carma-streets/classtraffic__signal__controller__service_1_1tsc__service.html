<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carma-streets: traffic_signal_controller_service::tsc_service Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Carma-streets<span id="projectnumber">&#160;v4.2.0</span>
   </div>
   <div id="projectbrief">CARMA Streets is a component of CARMA ecosystem that improves the efficiency and performance of the Transportation Systems Management and Operations (TSMO) strategies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtraffic__signal__controller__service_1_1tsc__service.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtraffic__signal__controller__service_1_1tsc__service-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">traffic_signal_controller_service::tsc_service Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for traffic_signal_controller_service::tsc_service:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service__coll__graph.png" border="0" usemap="#atraffic__signal__controller__service_1_1tsc__service_coll__map" alt="Collaboration graph"/></div>
<map name="atraffic__signal__controller__service_1_1tsc__service_coll__map" id="atraffic__signal__controller__service_1_1tsc__service_coll__map">
<area shape="rect" title=" " alt="" coords="591,189,773,487"/>
<area shape="rect" title=" " alt="" coords="5,13,180,105"/>
<area shape="rect" title=" " alt="" coords="204,5,376,112"/>
<area shape="rect" title=" " alt="" coords="400,5,572,112"/>
<area shape="rect" title=" " alt="" coords="596,5,768,112"/>
<area shape="rect" title=" " alt="" coords="793,13,969,105"/>
<area shape="rect" title=" " alt="" coords="993,5,1165,112"/>
<area shape="rect" title=" " alt="" coords="1205,20,1252,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abfe9b97a69e5c4c8c614ed2f7bfda80d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#abfe9b97a69e5c4c8c614ed2f7bfda80d">tsc_service</a> ()=default</td></tr>
<tr class="separator:abfe9b97a69e5c4c8c614ed2f7bfda80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82f97b9874e91dd19f3557d8fc4905f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa82f97b9874e91dd19f3557d8fc4905f">~tsc_service</a> ()</td></tr>
<tr class="separator:aa82f97b9874e91dd19f3557d8fc4905f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1557609aa8e488d04f646e09cde9414"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#af1557609aa8e488d04f646e09cde9414">tsc_service</a> (const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;)=delete</td></tr>
<tr class="separator:af1557609aa8e488d04f646e09cde9414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d64c3a5157eb5d30cac4e54772e4b90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0d64c3a5157eb5d30cac4e54772e4b90">operator=</a> (const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;)=delete</td></tr>
<tr class="separator:a0d64c3a5157eb5d30cac4e54772e4b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f10530cccdd582172877692d6f480f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5">initialize</a> ()</td></tr>
<tr class="memdesc:a0f10530cccdd582172877692d6f480f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to initialize the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5">More...</a><br /></td></tr>
<tr class="separator:a0f10530cccdd582172877692d6f480f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b524b54e3db0a25765546e2c136dd2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac8b524b54e3db0a25765546e2c136dd2">initialize_kafka_producer</a> (const std::string &amp;bootstap_server, const std::string &amp;spat_producer_topic)</td></tr>
<tr class="memdesc:ac8b524b54e3db0a25765546e2c136dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Kafka SPaT producer.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ac8b524b54e3db0a25765546e2c136dd2">More...</a><br /></td></tr>
<tr class="separator:ac8b524b54e3db0a25765546e2c136dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbce68544a01f99199a07fb642342f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">initialize_snmp_client</a> (const std::string &amp;server_ip, const int server_port, const std::string &amp;community, const int snmp_version, const int timeout)</td></tr>
<tr class="memdesc:a0bbce68544a01f99199a07fb642342f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SNMP Client to make SNMP calls to Traffic Signal Controller.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">More...</a><br /></td></tr>
<tr class="separator:a0bbce68544a01f99199a07fb642342f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad711d135587e232d5cd92447b9a5af"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">initialize_tsc_state</a> (const std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt; _snmp_client_ptr)</td></tr>
<tr class="memdesc:adad711d135587e232d5cd92447b9a5af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic Signal Controller including default phase sequence, phase timing information, and phase number to signal group mapping.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">More...</a><br /></td></tr>
<tr class="separator:adad711d135587e232d5cd92447b9a5af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c50831f1ed8f48d8123b05b6724b32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a> () const</td></tr>
<tr class="memdesc:a34c50831f1ed8f48d8123b05b6724b32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to enable spat using the TSC Service SNMP Client.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">More...</a><br /></td></tr>
<tr class="separator:a34c50831f1ed8f48d8123b05b6724b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">initialize_spat_worker</a> (const std::string &amp;udp_socket_ip, const int udp_socket_port, const int timeout, const bool use_tsc_timestamp)</td></tr>
<tr class="memdesc:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic Signal Controller NTCIP UDP SPaT messages and updating the SPaT object using this information.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">More...</a><br /></td></tr>
<tr class="separator:a470c3a6c64e310bc4ac0da205a2aeafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac8bd449d953386ac8db45dd89a5ec4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">initialize_intersection_client</a> ()</td></tr>
<tr class="memdesc:aac8bd449d953386ac8db45dd89a5ec4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and Intersection ID for SPaT message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">More...</a><br /></td></tr>
<tr class="separator:aac8bd449d953386ac8db45dd89a5ec4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e9845c840c058c682e215fe39a6e0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">initialize_spat</a> (const std::string &amp;intersection_name, const int intersection_id, const std::unordered_map&lt; int, int &gt; &amp;phase_number_to_signal_group)</td></tr>
<tr class="memdesc:a54e9845c840c058c682e215fe39a6e0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapping not provided in NTCIP UDP messages from TSC but required for interpretation.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">More...</a><br /></td></tr>
<tr class="separator:a54e9845c840c058c682e215fe39a6e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e2ac871cb45ef4a98354ca5bc49b25b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e2ac871cb45ef4a98354ca5bc49b25b">start</a> ()</td></tr>
<tr class="memdesc:a9e2ac871cb45ef4a98354ca5bc49b25b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to start all threads included in the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e2ac871cb45ef4a98354ca5bc49b25b">More...</a><br /></td></tr>
<tr class="separator:a9e2ac871cb45ef4a98354ca5bc49b25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">produce_spat_json</a> () const</td></tr>
<tr class="memdesc:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-streets kafka broker.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">More...</a><br /></td></tr>
<tr class="separator:aa4fb7763e7ae8b9e630fd7fa10bc2479"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1dfbd2157cd62094844fb2e1a6d70711"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a></td></tr>
<tr class="memdesc:a1dfbd2157cd62094844fb2e1a6d70711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kafka producer for spat JSON.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">More...</a><br /></td></tr>
<tr class="separator:a1dfbd2157cd62094844fb2e1a6d70711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390a1495b441c84b4ad620113635556f"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a></td></tr>
<tr class="memdesc:a390a1495b441c84b4ad620113635556f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> contains <a class="el" href="classtraffic__signal__controller__service_1_1udp__socket__listener.html">udp_socket_listener</a> and consumes UDP data packets and updates spat accordingly.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">More...</a><br /></td></tr>
<tr class="separator:a390a1495b441c84b4ad620113635556f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a></td></tr>
<tr class="memdesc:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> queries and stores traffic signal controller configurations including phase sequence, signal group (J2735) to phase number (NTCIP) maping and red clearance, yellow change, min/max green times.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">More...</a><br /></td></tr>
<tr class="separator:a26027ff7d1a2fdf05a67be10543aa1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a></td></tr>
<tr class="memdesc:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from the traffic signal controller.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">More...</a><br /></td></tr>
<tr class="separator:a9e901a004e42f8fd670d54e16f4fb3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77457ef9ea248e80a34a2a145a59096"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="structsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a></td></tr>
<tr class="memdesc:ae77457ef9ea248e80a34a2a145a59096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to spat object which is updated based on received UDP messsages from the traffic signal controller and broadcast on the carma-streets kafka broker as a JSON message.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">More...</a><br /></td></tr>
<tr class="separator:ae77457ef9ea248e80a34a2a145a59096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab618504f0fe46fe639c43e48f9d6a264"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a></td></tr>
<tr class="memdesc:ab618504f0fe46fe639c43e48f9d6a264"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> used to query intersection information including name and id from the <a class="el" href="namespaceintersection__model.html">intersection_model</a> REST API.  <a href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">More...</a><br /></td></tr>
<tr class="separator:ab618504f0fe46fe639c43e48f9d6a264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8612905672ceede1d032fd1123c2f484"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8612905672ceede1d032fd1123c2f484">use_tsc_state_spat_update_</a> = true</td></tr>
<tr class="separator:a8612905672ceede1d032fd1123c2f484"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00017">17</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abfe9b97a69e5c4c8c614ed2f7bfda80d" name="abfe9b97a69e5c4c8c614ed2f7bfda80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe9b97a69e5c4c8c614ed2f7bfda80d">&#9670;&nbsp;</a></span>tsc_service() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::tsc_service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa82f97b9874e91dd19f3557d8fc4905f" name="aa82f97b9874e91dd19f3557d8fc4905f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa82f97b9874e91dd19f3557d8fc4905f">&#9670;&nbsp;</a></span>~tsc_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::~tsc_service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00177">177</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  178</span>    {</div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>)</div>
<div class="line"><span class="lineno">  180</span>        {</div>
<div class="line"><span class="lineno">  181</span>            SPDLOG_WARN(<span class="stringliteral">&quot;Stopping spat producer!&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>-&gt;stop();</div>
<div class="line"><span class="lineno">  183</span>        }</div>
<div class="line"><span class="lineno">  184</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a1dfbd2157cd62094844fb2e1a6d70711"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">traffic_signal_controller_service::tsc_service::spat_producer</a></div><div class="ttdeci">std::shared_ptr&lt; kafka_clients::kafka_producer_worker &gt; spat_producer</div><div class="ttdoc">Kafka producer for spat JSON.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00022">tsc_service.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00022">spat_producer</a>.</p>

</div>
</div>
<a id="af1557609aa8e488d04f646e09cde9414" name="af1557609aa8e488d04f646e09cde9414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1557609aa8e488d04f646e09cde9414">&#9670;&nbsp;</a></span>tsc_service() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">traffic_signal_controller_service::tsc_service::tsc_service </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a34c50831f1ed8f48d8123b05b6724b32" name="a34c50831f1ed8f48d8123b05b6724b32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34c50831f1ed8f48d8123b05b6724b32">&#9670;&nbsp;</a></span>enable_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::enable_spat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to enable spat using the TSC Service SNMP Client. </p>
<dl class="section return"><dt>Returns</dt><dd>true if SET operation is successful. </dd>
<dd>
false if SET operation is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00098">98</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   98</span>                                       {</div>
<div class="line"><span class="lineno">   99</span>        <span class="comment">// Enable SPaT </span></div>
<div class="line"><span class="lineno">  100</span>        snmp_response_obj <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>;</div>
<div class="line"><span class="lineno">  101</span>        <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>.type = <a class="code hl_enumvalue" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">snmp_response_obj::response_type::INTEGER</a>;</div>
<div class="line"><span class="lineno">  102</span>        <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>.val_int = 2;</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a>-&gt;process_snmp_request(<a class="code hl_variable" href="namespacentcip__oids.html#ab1f88eabb00f61c8b06fea2deae959b5">ntcip_oids::ENABLE_SPAT_OID</a>, <a class="code hl_enumvalue" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a8c52684db8f49511e9b44471716bf164">request_type::SET</a>, <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>)){</div>
<div class="line"><span class="lineno">  104</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to enable SPaT broadcasting on Traffic Signal Controller!&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  106</span>        }</div>
<div class="line"><span class="lineno">  107</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Enabled UDP broadcasting of NTCIP SPaT data from TSC!&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a34c50831f1ed8f48d8123b05b6724b32"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">traffic_signal_controller_service::tsc_service::enable_spat</a></div><div class="ttdeci">bool enable_spat() const</div><div class="ttdoc">Method to enable spat using the TSC Service SNMP Client.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00098">tsc_service.cpp:98</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a9e901a004e42f8fd670d54e16f4fb3bb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">traffic_signal_controller_service::tsc_service::snmp_client_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; snmp_client &gt; snmp_client_ptr</div><div class="ttdoc">snmp_client used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00038">tsc_service.h:38</a></div></div>
<div class="ttc" id="anamespacentcip__oids_html_ab1f88eabb00f61c8b06fea2deae959b5"><div class="ttname"><a href="namespacentcip__oids.html#ab1f88eabb00f61c8b06fea2deae959b5">ntcip_oids::ENABLE_SPAT_OID</a></div><div class="ttdeci">static const std::string ENABLE_SPAT_OID</div><div class="ttdoc">OID for ENABLE_SPAT.</div><div class="ttdef"><b>Definition:</b> <a href="ntcip__oids_8h_source.html#l00012">ntcip_oids.h:12</a></div></div>
<div class="ttc" id="anamespacetraffic__signal__controller__service_html_aa91e53dd22b41ddac648a9b468615b61a8c52684db8f49511e9b44471716bf164"><div class="ttname"><a href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a8c52684db8f49511e9b44471716bf164">traffic_signal_controller_service::request_type::SET</a></div><div class="ttdeci">@ SET</div></div>
<div class="ttc" id="astructtraffic__signal__controller__service_1_1snmp__response__obj_html_a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c"><div class="ttname"><a href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::response_type::INTEGER</a></div><div class="ttdeci">@ INTEGER</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00098">enable_spat()</a>, <a class="el" href="ntcip__oids_8h_source.html#l00012">ntcip_oids::ENABLE_SPAT_OID</a>, <a class="el" href="structtraffic__signal__controller__service_1_1snmp__response__obj.html#a7379a4a3fcabddd7000d9be76111c38aa5d5cd46919fa987731fb2edefe0f2a0c">traffic_signal_controller_service::snmp_response_obj::INTEGER</a>, <a class="el" href="namespacetraffic__signal__controller__service.html#aa91e53dd22b41ddac648a9b468615b61a8c52684db8f49511e9b44471716bf164">traffic_signal_controller_service::SET</a>, and <a class="el" href="tsc__service_8h_source.html#l00038">snmp_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00098">enable_spat()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_cgraph">
<area shape="rect" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="5,29,160,85"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a34c50831f1ed8f48d8123b05b6724b32_icgraph">
<area shape="rect" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="307,29,461,85"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,29,259,85"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,44,56,71"/>
</map>
</div>

</div>
</div>
<a id="a0f10530cccdd582172877692d6f480f5" name="a0f10530cccdd582172877692d6f480f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f10530cccdd582172877692d6f480f5">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to initialize the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>true if successful. </dd>
<dd>
false if not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00006">6</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>                                 {</div>
<div class="line"><span class="lineno">    7</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">    8</span>        {</div>
<div class="line"><span class="lineno">    9</span>            <span class="comment">// Intialize spat kafka producer</span></div>
<div class="line"><span class="lineno">   10</span>            std::string bootstrap_server = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;bootstrap_server&quot;</span>);</div>
<div class="line"><span class="lineno">   11</span>            std::string spat_topic_name = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;spat_producer_topic&quot;</span>);</div>
<div class="line"><span class="lineno">   12</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac8b524b54e3db0a25765546e2c136dd2">initialize_kafka_producer</a>(bootstrap_server, spat_topic_name)) {</div>
<div class="line"><span class="lineno">   13</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   14</span>            }</div>
<div class="line"><span class="lineno">   15</span>            </div>
<div class="line"><span class="lineno">   16</span>            <span class="comment">// Initialize SNMP Client</span></div>
<div class="line"><span class="lineno">   17</span>            std::string target_ip = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;target_ip&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span>            <span class="keywordtype">int</span> target_port = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;target_port&quot;</span>);</div>
<div class="line"><span class="lineno">   19</span>            std::string community = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;community&quot;</span>);</div>
<div class="line"><span class="lineno">   20</span>            <span class="keywordtype">int</span> snmp_version = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;snmp_version&quot;</span>);</div>
<div class="line"><span class="lineno">   21</span>            <span class="keywordtype">int</span> timeout = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;timeout&quot;</span>);</div>
<div class="line"><span class="lineno">   22</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">initialize_snmp_client</a>(target_ip, target_port, community, snmp_version, timeout)) {</div>
<div class="line"><span class="lineno">   23</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   24</span>            }</div>
<div class="line"><span class="lineno">   25</span>            <span class="comment">//Initialize TSC State</span></div>
<div class="line"><span class="lineno">   26</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8612905672ceede1d032fd1123c2f484">use_tsc_state_spat_update_</a> = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_service::streets_configuration::get_boolean_config</a>(<span class="stringliteral">&quot;use_tsc_state_spat_update&quot;</span>);</div>
<div class="line"><span class="lineno">   27</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">initialize_tsc_state</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a>)){</div>
<div class="line"><span class="lineno">   28</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   29</span>            }</div>
<div class="line"><span class="lineno">   30</span>            <span class="comment">// Enable SPaT</span></div>
<div class="line"><span class="lineno">   31</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32">enable_spat</a>()) {</div>
<div class="line"><span class="lineno">   32</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   33</span>            }</div>
<div class="line"><span class="lineno">   34</span>            <span class="comment">// Initialize spat_worker</span></div>
<div class="line"><span class="lineno">   35</span>            std::string socket_ip = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a>(<span class="stringliteral">&quot;udp_socket_ip&quot;</span>);</div>
<div class="line"><span class="lineno">   36</span>            <span class="keywordtype">int</span> socket_port = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;udp_socket_port&quot;</span>);</div>
<div class="line"><span class="lineno">   37</span>            <span class="keywordtype">int</span> socket_timeout = <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a>(<span class="stringliteral">&quot;socket_timeout&quot;</span>);</div>
<div class="line"><span class="lineno">   38</span>            <span class="keywordtype">bool</span> use_msg_timestamp =  <a class="code hl_function" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_service::streets_configuration::get_boolean_config</a>(<span class="stringliteral">&quot;use_tsc_timestamp&quot;</span>);         </div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">initialize_spat_worker</a>(socket_ip, socket_port, socket_timeout, use_msg_timestamp)) {</div>
<div class="line"><span class="lineno">   40</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   41</span>            }</div>
<div class="line"><span class="lineno">   42</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">initialize_intersection_client</a>()) {</div>
<div class="line"><span class="lineno">   43</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   44</span>            }</div>
<div class="line"><span class="lineno">   45</span>            <span class="comment">// Add all phases to a single map</span></div>
<div class="line"><span class="lineno">   46</span>            <span class="keyword">auto</span> all_phases = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_vehicle_phase_map();</div>
<div class="line"><span class="lineno">   47</span>            <span class="keyword">auto</span> ped_phases = <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;get_ped_phase_map();</div>
<div class="line"><span class="lineno">   48</span>            <span class="comment">// Insert pedestrian phases into map of vehicle phases.</span></div>
<div class="line"><span class="lineno">   49</span>            all_phases.insert(ped_phases.begin(), ped_phases.end());</div>
<div class="line"><span class="lineno">   50</span>            <a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">initialize_spat</a>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;get_intersection_name(), <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;get_intersection_id(), </div>
<div class="line"><span class="lineno">   51</span>                                all_phases);</div>
<div class="line"><span class="lineno">   52</span>            </div>
<div class="line"><span class="lineno">   53</span>            <span class="comment">// Initialize spat ptr</span></div>
<div class="line"><span class="lineno">   54</span>            SPDLOG_INFO(<span class="stringliteral">&quot;Traffic Signal Controller Service initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">   55</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   56</span>        }</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classstreets__service_1_1streets__configuration__exception.html">streets_service::streets_configuration_exception</a> &amp;ex)</div>
<div class="line"><span class="lineno">   58</span>        {</div>
<div class="line"><span class="lineno">   59</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Signal Optimization Service Initialization failure: {0} &quot;</span>, ex.what());</div>
<div class="line"><span class="lineno">   60</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   61</span>        }</div>
<div class="line"><span class="lineno">   62</span>    }</div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration__exception_html"><div class="ttname"><a href="classstreets__service_1_1streets__configuration__exception.html">streets_service::streets_configuration_exception</a></div><div class="ttdoc">Streets Configuration Exception thrown when manifest.json configuration files are incorrectly formatt...</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration__exception_8h_source.html#l00011">streets_configuration_exception.h:11</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_a03603871626201e07690effb9f2440bf"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf">streets_service::streets_configuration::get_string_config</a></div><div class="ttdeci">static std::string get_string_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter string value with provided name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00103">streets_configuration.cpp:103</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_a48f38b0b6ecb3043cc051b624f12824b"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b">streets_service::streets_configuration::get_boolean_config</a></div><div class="ttdeci">static bool get_boolean_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter boolean value with provide name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00149">streets_configuration.cpp:149</a></div></div>
<div class="ttc" id="aclassstreets__service_1_1streets__configuration_html_ab33a5d183c0ca2b2f0d757f5466f200b"><div class="ttname"><a href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b">streets_service::streets_configuration::get_int_config</a></div><div class="ttdeci">static int get_int_config(const std::string &amp;config_param_name)</div><div class="ttdoc">Retreive configuration parameter integer value with provided name.</div><div class="ttdef"><b>Definition:</b> <a href="streets__configuration_8cpp_source.html#l00118">streets_configuration.cpp:118</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a0bbce68544a01f99199a07fb642342f9"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9">traffic_signal_controller_service::tsc_service::initialize_snmp_client</a></div><div class="ttdeci">bool initialize_snmp_client(const std::string &amp;server_ip, const int server_port, const std::string &amp;community, const int snmp_version, const int timeout)</div><div class="ttdoc">Initialize SNMP Client to make SNMP calls to Traffic Signal Controller.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00076">tsc_service.cpp:76</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a26027ff7d1a2fdf05a67be10543aa1bd"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">traffic_signal_controller_service::tsc_service::tsc_state_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; tsc_state &gt; tsc_state_ptr</div><div class="ttdoc">tsc_state queries and stores traffic signal controller configurations including phase sequence,...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00033">tsc_service.h:33</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a470c3a6c64e310bc4ac0da205a2aeafb"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb">traffic_signal_controller_service::tsc_service::initialize_spat_worker</a></div><div class="ttdeci">bool initialize_spat_worker(const std::string &amp;udp_socket_ip, const int udp_socket_port, const int timeout, const bool use_tsc_timestamp)</div><div class="ttdoc">Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00111">tsc_service.cpp:111</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a54e9845c840c058c682e215fe39a6e0c"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c">traffic_signal_controller_service::tsc_service::initialize_spat</a></div><div class="ttdeci">void initialize_spat(const std::string &amp;intersection_name, const int intersection_id, const std::unordered_map&lt; int, int &gt; &amp;phase_number_to_signal_group)</div><div class="ttdoc">Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00134">tsc_service.cpp:134</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a8612905672ceede1d032fd1123c2f484"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a8612905672ceede1d032fd1123c2f484">traffic_signal_controller_service::tsc_service::use_tsc_state_spat_update_</a></div><div class="ttdeci">bool use_tsc_state_spat_update_</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00054">tsc_service.h:54</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aac8bd449d953386ac8db45dd89a5ec4d"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d">traffic_signal_controller_service::tsc_service::initialize_intersection_client</a></div><div class="ttdeci">bool initialize_intersection_client()</div><div class="ttdoc">Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00124">tsc_service.cpp:124</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ab618504f0fe46fe639c43e48f9d6a264"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">traffic_signal_controller_service::tsc_service::intersection_client_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; intersection_client &gt; intersection_client_ptr</div><div class="ttdoc">Pointer to intersection_client used to query intersection information including name and id from the ...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00050">tsc_service.h:50</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ac8b524b54e3db0a25765546e2c136dd2"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ac8b524b54e3db0a25765546e2c136dd2">traffic_signal_controller_service::tsc_service::initialize_kafka_producer</a></div><div class="ttdeci">bool initialize_kafka_producer(const std::string &amp;bootstap_server, const std::string &amp;spat_producer_topic)</div><div class="ttdoc">Initialize Kafka SPaT producer.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00064">tsc_service.cpp:64</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_adad711d135587e232d5cd92447b9a5af"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af">traffic_signal_controller_service::tsc_service::initialize_tsc_state</a></div><div class="ttdeci">bool initialize_tsc_state(const std::shared_ptr&lt; snmp_client &gt; _snmp_client_ptr)</div><div class="ttdoc">Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00089">tsc_service.cpp:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00098">enable_spat()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00149">streets_service::streets_configuration::get_boolean_config()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00118">streets_service::streets_configuration::get_int_config()</a>, <a class="el" href="streets__configuration_8cpp_source.html#l00103">streets_service::streets_configuration::get_string_config()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00124">initialize_intersection_client()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00064">initialize_kafka_producer()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00076">initialize_snmp_client()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00134">initialize_spat()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00111">initialize_spat_worker()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00089">initialize_tsc_state()</a>, <a class="el" href="tsc__service_8h_source.html#l00050">intersection_client_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00038">snmp_client_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00033">tsc_state_ptr</a>, and <a class="el" href="tsc__service_8h_source.html#l00054">use_tsc_state_spat_update_</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__client__service_2src_2main_8cpp_source.html#l00007">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_cgraph">
<area shape="rect" title="Method to initialize the tsc_service." alt="" coords="5,344,160,400"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a34c50831f1ed8f48d8123b05b6724b32" title="Method to enable spat using the TSC Service SNMP Client." alt="" coords="240,29,395,85"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a48f38b0b6ecb3043cc051b624f12824b" title="Retreive configuration parameter boolean value with provide name." alt="" coords="208,109,427,150"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#ab33a5d183c0ca2b2f0d757f5466f200b" title="Retreive configuration parameter integer value with provided name." alt="" coords="223,174,411,215"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a03603871626201e07690effb9f2440bf" title="Retreive configuration parameter string value with provided name." alt="" coords="214,239,421,281"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aac8bd449d953386ac8db45dd89a5ec4d" title="Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In..." alt="" coords="227,304,407,360"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#ac8b524b54e3db0a25765546e2c136dd2" title="Initialize Kafka SPaT producer." alt="" coords="235,384,399,440"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0bbce68544a01f99199a07fb642342f9" title="Initialize SNMP Client to make SNMP calls to Traffic Signal Controller." alt="" coords="240,464,395,520"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a54e9845c840c058c682e215fe39a6e0c" title="Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp..." alt="" coords="240,544,395,600"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a470c3a6c64e310bc4ac0da205a2aeafb" title="Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic..." alt="" coords="240,624,395,680"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#adad711d135587e232d5cd92447b9a5af" title="Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S..." alt="" coords="240,704,395,760"/>
<area shape="rect" href="classstreets__service_1_1streets__configuration.html#a92ea5469cbab9198efb4696b7e5598eb" title=" " alt="" coords="475,174,660,215"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a0f10530cccdd582172877692d6f480f5_icgraph">
<area shape="rect" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="aac8bd449d953386ac8db45dd89a5ec4d" name="aac8bd449d953386ac8db45dd89a5ec4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac8bd449d953386ac8db45dd89a5ec4d">&#9670;&nbsp;</a></span>initialize_intersection_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_intersection_client </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and Intersection ID for SPaT message. </p>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00124">124</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>                                                     {</div>
<div class="line"><span class="lineno">  125</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a> = std::make_shared&lt;intersection_client&gt;();</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ab618504f0fe46fe639c43e48f9d6a264">intersection_client_ptr</a>-&gt;request_intersection_info() ) {</div>
<div class="line"><span class="lineno">  127</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to retrieve intersection information from intersection model!&quot;</span>);</div>
<div class="line"><span class="lineno">  128</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  129</span>        }</div>
<div class="line"><span class="lineno">  130</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Intersection client initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  132</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00050">intersection_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aac8bd449d953386ac8db45dd89a5ec4d_icgraph">
<area shape="rect" title="Initialize Intersection Client used to query Intersection Model REST API for Intersection Name and In..." alt="" coords="307,5,487,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="ac8b524b54e3db0a25765546e2c136dd2" name="ac8b524b54e3db0a25765546e2c136dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b524b54e3db0a25765546e2c136dd2">&#9670;&nbsp;</a></span>initialize_kafka_producer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_kafka_producer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>bootstap_server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>spat_producer_topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Kafka SPaT producer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bootstap_server</td><td>for CARMA-Streets Kafka broker. </td></tr>
    <tr><td class="paramname">spat_producer_topic</td><td>name of topic to produce to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00064">64</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   64</span>                                                                                                                      {</div>
<div class="line"><span class="lineno">   65</span>        <span class="keyword">auto</span> client = std::make_unique&lt;kafka_clients::kafka_client&gt;();</div>
<div class="line"><span class="lineno">   66</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a> = client-&gt;create_producer(bootstrap_server, spat_producer_topc);</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>-&gt;init())</div>
<div class="line"><span class="lineno">   68</span>        {</div>
<div class="line"><span class="lineno">   69</span>            SPDLOG_CRITICAL(<span class="stringliteral">&quot;Kafka spat producer initialize error&quot;</span>);</div>
<div class="line"><span class="lineno">   70</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   71</span>        }</div>
<div class="line"><span class="lineno">   72</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Initialized SPAT Kafka producer!&quot;</span>);</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   74</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00022">spat_producer</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_ac8b524b54e3db0a25765546e2c136dd2_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_ac8b524b54e3db0a25765546e2c136dd2_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_ac8b524b54e3db0a25765546e2c136dd2_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_ac8b524b54e3db0a25765546e2c136dd2_icgraph">
<area shape="rect" title="Initialize Kafka SPaT producer." alt="" coords="307,5,471,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a0bbce68544a01f99199a07fb642342f9" name="a0bbce68544a01f99199a07fb642342f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bbce68544a01f99199a07fb642342f9">&#9670;&nbsp;</a></span>initialize_snmp_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_snmp_client </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>server_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>community</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>snmp_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SNMP Client to make SNMP calls to Traffic Signal Controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_ip</td><td>of Traffic Signal Controller. </td></tr>
    <tr><td class="paramname">server_port</td><td>of Traffic Signal Controller NTCIP Server. </td></tr>
    <tr><td class="paramname">community</td><td>of SNMP communication used. </td></tr>
    <tr><td class="paramname">snmp_version</td><td>of SNMP communication used. </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout micro seconds of SNMP connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00076">76</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                                                                   {</div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   79</span>            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e901a004e42f8fd670d54e16f4fb3bb">snmp_client_ptr</a> = std::make_shared&lt;snmp_client&gt;(server_ip, server_port, community, snmp_version, timeout);</div>
<div class="line"><span class="lineno">   80</span>            SPDLOG_DEBUG(<span class="stringliteral">&quot;SNMP Client initialized!&quot;</span>);</div>
<div class="line"><span class="lineno">   81</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   82</span>        }</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> snmp_client_exception &amp;e) {</div>
<div class="line"><span class="lineno">   84</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Exception encountered initializing snmp client : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   86</span>        }</div>
<div class="line"><span class="lineno">   87</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00038">snmp_client_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a0bbce68544a01f99199a07fb642342f9_icgraph">
<area shape="rect" title="Initialize SNMP Client to make SNMP calls to Traffic Signal Controller." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a54e9845c840c058c682e215fe39a6e0c" name="a54e9845c840c058c682e215fe39a6e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e9845c840c058c682e215fe39a6e0c">&#9670;&nbsp;</a></span>initialize_spat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::initialize_spat </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>intersection_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>intersection_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>phase_number_to_signal_group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapping not provided in NTCIP UDP messages from TSC but required for interpretation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intersection_name</td><td>J2735 Intersection name </td></tr>
    <tr><td class="paramname">intersection_id</td><td>J2735 Intersection ID </td></tr>
    <tr><td class="paramname">phase_number_to_signal_group</td><td>map of phase numbers (NTCIP) to signal groups provided by TSC State </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00134">134</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>                                                                                               {</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a> =  std::make_shared&lt;signal_phase_and_timing::spat&gt;();</div>
<div class="line"><span class="lineno">  137</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;initialize_intersection( intersection_name, intersection_id, phase_number_to_signal_group);</div>
<div class="line"><span class="lineno">  138</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_ae77457ef9ea248e80a34a2a145a59096"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">traffic_signal_controller_service::tsc_service::spat_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; signal_phase_and_timing::spat &gt; spat_ptr</div><div class="ttdoc">Pointer to spat object which is updated based on received UDP messsages from the traffic signal contr...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00044">tsc_service.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00044">spat_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a54e9845c840c058c682e215fe39a6e0c_icgraph">
<area shape="rect" title="Initialize SPaT pointer with intersection name, intersection id and phase number to signal group mapp..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a470c3a6c64e310bc4ac0da205a2aeafb" name="a470c3a6c64e310bc4ac0da205a2aeafb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470c3a6c64e310bc4ac0da205a2aeafb">&#9670;&nbsp;</a></span>initialize_spat_worker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_spat_worker </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>udp_socket_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>udp_socket_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>use_tsc_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic Signal Controller NTCIP UDP SPaT messages and updating the SPaT object using this information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">udp_socket_ip</td><td>IP of localhost where UDP packets will be received. </td></tr>
    <tr><td class="paramname">udp_socket_port</td><td>Port of localhost where UDP packets will be received. </td></tr>
    <tr><td class="paramname">timeout</td><td>Timeout in seconds for UDP client. UDP socket will throw an exception if no messages are receive for timeount window. </td></tr>
    <tr><td class="paramname">use_tsc_timestamp</td><td>bool flag to indicate whether to use TSC timestamp provided in UDP packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00111">111</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                                                                         {</div>
<div class="line"><span class="lineno">  113</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a> = std::make_shared&lt;spat_worker&gt;(udp_socket_ip, udp_socket_port, timeout, use_tsc_timestamp);</div>
<div class="line"><span class="lineno">  114</span>        <span class="comment">// HTTP request to update intersection information</span></div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a>-&gt;initialize())</div>
<div class="line"><span class="lineno">  116</span>        {</div>
<div class="line"><span class="lineno">  117</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize spat worker!&quot;</span>);</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  119</span>        }</div>
<div class="line"><span class="lineno">  120</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;Spat worker initialized successfully!&quot;</span>);</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  122</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_a390a1495b441c84b4ad620113635556f"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">traffic_signal_controller_service::tsc_service::spat_worker_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; spat_worker &gt; spat_worker_ptr</div><div class="ttdoc">spat_worker contains udp_socket_listener and consumes UDP data packets and updates spat accordingly.</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8h_source.html#l00027">tsc_service.h:27</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00027">spat_worker_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a470c3a6c64e310bc4ac0da205a2aeafb_icgraph">
<area shape="rect" title="Initialize SPaT Worker which is responsible for standing up UDP Socket Listener and consuming Traffic..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="adad711d135587e232d5cd92447b9a5af" name="adad711d135587e232d5cd92447b9a5af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad711d135587e232d5cd92447b9a5af">&#9670;&nbsp;</a></span>initialize_tsc_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::initialize_tsc_state </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> &gt;&#160;</td>
          <td class="paramname"><em>_snmp_client_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic Signal Controller including default phase sequence, phase timing information, and phase number to signal group mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_snmp_client_ptr</td><td>SNMP client to use for querying initial information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if initialization is successful. </dd>
<dd>
false if initialization is not successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00089">89</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>                                                                                             {</div>
<div class="line"><span class="lineno">   90</span>        <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a> = std::make_shared&lt;tsc_state&gt;(_snmp_client_ptr );</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">if</span> ( !<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;initialize() ){</div>
<div class="line"><span class="lineno">   92</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Failed to initialize tsc_state!&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   94</span>        }</div>
<div class="line"><span class="lineno">   95</span>        SPDLOG_DEBUG(<span class="stringliteral">&quot;TSC State initialized!&quot;</span>);</div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   97</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00033">tsc_state_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_adad711d135587e232d5cd92447b9a5af_icgraph">
<area shape="rect" title="Initialize TSC State object which uses an SNMP Client to query initial information from the Traffic S..." alt="" coords="307,5,461,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a0f10530cccdd582172877692d6f480f5" title="Method to initialize the tsc_service." alt="" coords="104,5,259,61"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a0d64c3a5157eb5d30cac4e54772e4b90" name="a0d64c3a5157eb5d30cac4e54772e4b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d64c3a5157eb5d30cac4e54772e4b90">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp; traffic_signal_controller_service::tsc_service::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4fb7763e7ae8b9e630fd7fa10bc2479" name="aa4fb7763e7ae8b9e630fd7fa10bc2479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fb7763e7ae8b9e630fd7fa10bc2479">&#9670;&nbsp;</a></span>produce_spat_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::produce_spat_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-streets kafka broker. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00141">141</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  141</span>                                              {</div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  144</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  145</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a390a1495b441c84b4ad620113635556f">spat_worker_ptr</a>-&gt;receive_spat(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>);</div>
<div class="line"><span class="lineno">  146</span>                    </div>
<div class="line"><span class="lineno">  147</span>                    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a8612905672ceede1d032fd1123c2f484">use_tsc_state_spat_update_</a>){</div>
<div class="line"><span class="lineno">  148</span>                        <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">  149</span>                            <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a26027ff7d1a2fdf05a67be10543aa1bd">tsc_state_ptr</a>-&gt;add_future_movement_events(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>);</div>
<div class="line"><span class="lineno">  150</span>                        }</div>
<div class="line"><span class="lineno">  151</span>                        <span class="keywordflow">catch</span>(<span class="keyword">const</span> <a class="code hl_class" href="classtraffic__signal__controller__service_1_1monitor__states__exception.html">traffic_signal_controller_service::monitor_states_exception</a> &amp;e){</div>
<div class="line"><span class="lineno">  152</span>                            SPDLOG_ERROR(<span class="stringliteral">&quot;Could not update movement events, spat not published. Encounted exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  153</span>                        }</div>
<div class="line"><span class="lineno">  154</span>                    }</div>
<div class="line"><span class="lineno">  155</span>                    </div>
<div class="line"><span class="lineno">  156</span>                    <a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#a1dfbd2157cd62094844fb2e1a6d70711">spat_producer</a>-&gt;send(<a class="code hl_variable" href="classtraffic__signal__controller__service_1_1tsc__service.html#ae77457ef9ea248e80a34a2a145a59096">spat_ptr</a>-&gt;toJson());</div>
<div class="line"><span class="lineno">  157</span>                    </div>
<div class="line"><span class="lineno">  158</span>                }</div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">catch</span>( <span class="keyword">const</span> <a class="code hl_class" href="classsignal__phase__and__timing_1_1signal__phase__and__timing__exception.html">signal_phase_and_timing::signal_phase_and_timing_exception</a> &amp;e ) {</div>
<div class="line"><span class="lineno">  160</span>                    SPDLOG_ERROR(<span class="stringliteral">&quot;Encounted exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  161</span>                }   </div>
<div class="line"><span class="lineno">  162</span>            }</div>
<div class="line"><span class="lineno">  163</span>        }</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">catch</span>( <span class="keyword">const</span> udp_socket_listener_exception &amp;e) {</div>
<div class="line"><span class="lineno">  165</span>            SPDLOG_ERROR(<span class="stringliteral">&quot;Encounted exception : \n {0}&quot;</span>, e.what());</div>
<div class="line"><span class="lineno">  166</span>        }</div>
<div class="line"><span class="lineno">  167</span>        </div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="ttc" id="aclasssignal__phase__and__timing_1_1signal__phase__and__timing__exception_html"><div class="ttname"><a href="classsignal__phase__and__timing_1_1signal__phase__and__timing__exception.html">signal_phase_and_timing::signal_phase_and_timing_exception</a></div><div class="ttdoc">Runtime error related to processing signal_phase_and_timing JSON updates.</div><div class="ttdef"><b>Definition:</b> <a href="signal__phase__and__timing__exception_8h_source.html#l00013">signal_phase_and_timing_exception.h:13</a></div></div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1monitor__states__exception_html"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1monitor__states__exception.html">traffic_signal_controller_service::monitor_states_exception</a></div><div class="ttdoc">Runtime error related to SNMP client used to communicate with Traffic Signal Controller (NTCIP).</div><div class="ttdef"><b>Definition:</b> <a href="monitor__states__exception_8h_source.html#l00012">monitor_states_exception.h:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8h_source.html#l00022">spat_producer</a>, <a class="el" href="tsc__service_8h_source.html#l00044">spat_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00027">spat_worker_ptr</a>, <a class="el" href="tsc__service_8h_source.html#l00033">tsc_state_ptr</a>, and <a class="el" href="tsc__service_8h_source.html#l00054">use_tsc_state_spat_update_</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00172">start()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_aa4fb7763e7ae8b9e630fd7fa10bc2479_icgraph">
<area shape="rect" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="328,5,483,61"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#a9e2ac871cb45ef4a98354ca5bc49b25b" title="Method to start all threads included in the tsc_service." alt="" coords="104,13,280,54"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,20,56,47"/>
</map>
</div>

</div>
</div>
<a id="a9e2ac871cb45ef4a98354ca5bc49b25b" name="a9e2ac871cb45ef4a98354ca5bc49b25b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e2ac871cb45ef4a98354ca5bc49b25b">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void traffic_signal_controller_service::tsc_service::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to start all threads included in the <a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a>. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8cpp_source.html#l00172">172</a> of file <a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  172</span>                            {</div>
<div class="line"><span class="lineno">  173</span>        std::thread spat_t(&amp;<a class="code hl_function" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">tsc_service::produce_spat_json</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  174</span>        spat_t.join();</div>
<div class="line"><span class="lineno">  175</span>    }</div>
<div class="ttc" id="aclasstraffic__signal__controller__service_1_1tsc__service_html_aa4fb7763e7ae8b9e630fd7fa10bc2479"><div class="ttname"><a href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479">traffic_signal_controller_service::tsc_service::produce_spat_json</a></div><div class="ttdeci">void produce_spat_json() const</div><div class="ttdoc">Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma-s...</div><div class="ttdef"><b>Definition:</b> <a href="tsc__service_8cpp_source.html#l00141">tsc_service.cpp:141</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__client__service_2src_2main_8cpp_source.html#l00007">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_cgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_cgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_cgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_cgraph">
<area shape="rect" title="Method to start all threads included in the tsc_service." alt="" coords="5,13,181,54"/>
<area shape="rect" href="classtraffic__signal__controller__service_1_1tsc__service.html#aa4fb7763e7ae8b9e630fd7fa10bc2479" title="Method to receive UDP data from traffic signal controller and broadcast spat JSON data to the carma&#45;s..." alt="" coords="229,5,384,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_icgraph.png" border="0" usemap="#aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_icgraph" alt=""/></div>
<map name="aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_icgraph" id="aclasstraffic__signal__controller__service_1_1tsc__service_a9e2ac871cb45ef4a98354ca5bc49b25b_icgraph">
<area shape="rect" title="Method to start all threads included in the tsc_service." alt="" coords="104,5,280,47"/>
<area shape="rect" href="tsc__client__service_2src_2main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,39"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab618504f0fe46fe639c43e48f9d6a264" name="ab618504f0fe46fe639c43e48f9d6a264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab618504f0fe46fe639c43e48f9d6a264">&#9670;&nbsp;</a></span>intersection_client_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a>&gt; traffic_signal_controller_service::tsc_service::intersection_client_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to <a class="el" href="classtraffic__signal__controller__service_1_1intersection__client.html">intersection_client</a> used to query intersection information including name and id from the <a class="el" href="namespaceintersection__model.html">intersection_model</a> REST API. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00050">50</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00124">initialize_intersection_client()</a>.</p>

</div>
</div>
<a id="a9e901a004e42f8fd670d54e16f4fb3bb" name="a9e901a004e42f8fd670d54e16f4fb3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e901a004e42f8fd670d54e16f4fb3bb">&#9670;&nbsp;</a></span>snmp_client_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a>&gt; traffic_signal_controller_service::tsc_service::snmp_client_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1snmp__client.html">snmp_client</a> used for making SNMP GET and SET calls th NTCIP OIDs to set and retrieve information from the traffic signal controller. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00038">38</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00098">enable_spat()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00076">initialize_snmp_client()</a>.</p>

</div>
</div>
<a id="a1dfbd2157cd62094844fb2e1a6d70711" name="a1dfbd2157cd62094844fb2e1a6d70711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfbd2157cd62094844fb2e1a6d70711">&#9670;&nbsp;</a></span>spat_producer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classkafka__clients_1_1kafka__producer__worker.html">kafka_clients::kafka_producer_worker</a>&gt; traffic_signal_controller_service::tsc_service::spat_producer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Kafka producer for spat JSON. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00022">22</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00177">~tsc_service()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00064">initialize_kafka_producer()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

</div>
</div>
<a id="ae77457ef9ea248e80a34a2a145a59096" name="ae77457ef9ea248e80a34a2a145a59096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77457ef9ea248e80a34a2a145a59096">&#9670;&nbsp;</a></span>spat_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="structsignal__phase__and__timing_1_1spat.html">signal_phase_and_timing::spat</a>&gt; traffic_signal_controller_service::tsc_service::spat_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to spat object which is updated based on received UDP messsages from the traffic signal controller and broadcast on the carma-streets kafka broker as a JSON message. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00044">44</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00134">initialize_spat()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a390a1495b441c84b4ad620113635556f" name="a390a1495b441c84b4ad620113635556f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390a1495b441c84b4ad620113635556f">&#9670;&nbsp;</a></span>spat_worker_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a>&gt; traffic_signal_controller_service::tsc_service::spat_worker_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1spat__worker.html">spat_worker</a> contains <a class="el" href="classtraffic__signal__controller__service_1_1udp__socket__listener.html">udp_socket_listener</a> and consumes UDP data packets and updates spat accordingly. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00027">27</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00111">initialize_spat_worker()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a26027ff7d1a2fdf05a67be10543aa1bd" name="a26027ff7d1a2fdf05a67be10543aa1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26027ff7d1a2fdf05a67be10543aa1bd">&#9670;&nbsp;</a></span>tsc_state_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a>&gt; traffic_signal_controller_service::tsc_service::tsc_state_ptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classtraffic__signal__controller__service_1_1tsc__state.html">tsc_state</a> queries and stores traffic signal controller configurations including phase sequence, signal group (J2735) to phase number (NTCIP) maping and red clearance, yellow change, min/max green times. </p>

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00033">33</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>, <a class="el" href="tsc__service_8cpp_source.html#l00089">initialize_tsc_state()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

</div>
</div>
<a id="a8612905672ceede1d032fd1123c2f484" name="a8612905672ceede1d032fd1123c2f484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8612905672ceede1d032fd1123c2f484">&#9670;&nbsp;</a></span>use_tsc_state_spat_update_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool traffic_signal_controller_service::tsc_service::use_tsc_state_spat_update_ = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tsc__service_8h_source.html#l00054">54</a> of file <a class="el" href="tsc__service_8h_source.html">tsc_service.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="tsc__service_8cpp_source.html#l00006">initialize()</a>, and <a class="el" href="tsc__service_8cpp_source.html#l00141">produce_spat_json()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tsc_client_service/include/<a class="el" href="tsc__service_8h_source.html">tsc_service.h</a></li>
<li>tsc_client_service/src/<a class="el" href="tsc__service_8cpp_source.html">tsc_service.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetraffic__signal__controller__service.html">traffic_signal_controller_service</a></li><li class="navelem"><a class="el" href="classtraffic__signal__controller__service_1_1tsc__service.html">tsc_service</a></li>
    <li class="footer">Generated on Wed Oct 5 2022 20:49:31 for Carma-streets by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
